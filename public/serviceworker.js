!function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var r=function(e){return e&&e.Math==Math&&e},n=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof e&&e)||function(){return this}()||Function("return this")(),o={exports:{}},i=n,a=function(e,t){try{Object.defineProperty(i,e,{value:t,configurable:!0,writable:!0})}catch(r){i[e]=t}return t},c=a,u=n["__core-js_shared__"]||c("__core-js_shared__",{}),s=u;(o.exports=function(e,t){return s[e]||(s[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.18.3",mode:"global",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"});var l,f,d=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},h=d,v=function(e){return Object(h(e))},p=v,y={}.hasOwnProperty,g=Object.hasOwn||function(e,t){return y.call(p(e),t)},m=0,b=Math.random(),w=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++m+b).toString(36)},S=function(e){return"function"==typeof e},_=n,I=S,E=function(e){return I(e)?e:void 0},x=function(e,t){return arguments.length<2?E(_[e]):_[e]&&_[e][t]},j=x("navigator","userAgent")||"",O=n,T=j,R=O.process,A=O.Deno,k=R&&R.versions||A&&A.version,L=k&&k.v8;L?f=(l=L.split("."))[0]<4?1:l[0]+l[1]:T&&(!(l=T.match(/Edge\/(\d+)/))||l[1]>=74)&&(l=T.match(/Chrome\/(\d+)/))&&(f=l[1]);var P=f&&+f,C=function(e){try{return!!e()}catch(e){return!0}},N=P,D=C,F=!!Object.getOwnPropertySymbols&&!D((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&N&&N<41})),M=F&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,B=n,z=o.exports,q=g,U=w,W=F,V=M,G=z("wks"),Y=B.Symbol,H=V?Y:Y&&Y.withoutSetter||U,K=function(e){return q(G,e)&&(W||"string"==typeof G[e])||(W&&q(Y,e)?G[e]=Y[e]:G[e]=H("Symbol."+e)),G[e]},$={};$[K("toStringTag")]="z";var X="[object z]"===String($),Q={exports:{}},J=!C((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),Z={},ee=S,te=function(e){return"object"==typeof e?null!==e:ee(e)},re=te,ne=n.document,oe=re(ne)&&re(ne.createElement),ie=function(e){return oe?ne.createElement(e):{}},ae=ie,ce=!J&&!C((function(){return 7!=Object.defineProperty(ae("div"),"a",{get:function(){return 7}}).a})),ue=te,se=function(e){if(ue(e))return e;throw TypeError(String(e)+" is not an object")},le=S,fe=x,de=M?function(e){return"symbol"==typeof e}:function(e){var t=fe("Symbol");return le(t)&&Object(e)instanceof t},he=function(e){try{return String(e)}catch(e){return"Object"}},ve=S,pe=he,ye=function(e){if(ve(e))return e;throw TypeError(pe(e)+" is not a function")},ge=ye,me=function(e,t){var r=e[t];return null==r?void 0:ge(r)},be=S,we=te,Se=te,_e=de,Ie=me,Ee=function(e,t){var r,n;if("string"===t&&be(r=e.toString)&&!we(n=r.call(e)))return n;if(be(r=e.valueOf)&&!we(n=r.call(e)))return n;if("string"!==t&&be(r=e.toString)&&!we(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")},xe=K("toPrimitive"),je=function(e,t){if(!Se(e)||_e(e))return e;var r,n=Ie(e,xe);if(n){if(void 0===t&&(t="default"),r=n.call(e,t),!Se(r)||_e(r))return r;throw TypeError("Can't convert object to primitive value")}return void 0===t&&(t="number"),Ee(e,t)},Oe=de,Te=function(e){var t=je(e,"string");return Oe(t)?t:String(t)},Re=J,Ae=ce,ke=se,Le=Te,Pe=Object.defineProperty;Z.f=Re?Pe:function(e,t,r){if(ke(e),t=Le(t),ke(r),Ae)try{return Pe(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[t]=r.value),e};var Ce=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},Ne=Z,De=Ce,Fe=J?function(e,t,r){return Ne.f(e,t,De(1,r))}:function(e,t,r){return e[t]=r,e},Me=S,Be=u,ze=Function.toString;Me(Be.inspectSource)||(Be.inspectSource=function(e){return ze.call(e)});var qe,Ue,We,Ve=Be.inspectSource,Ge=S,Ye=Ve,He=n.WeakMap,Ke=Ge(He)&&/native code/.test(Ye(He)),$e=o.exports,Xe=w,Qe=$e("keys"),Je=function(e){return Qe[e]||(Qe[e]=Xe(e))},Ze={},et=Ke,tt=te,rt=Fe,nt=g,ot=u,it=Je,at=Ze,ct=n.WeakMap;if(et||ot.state){var ut=ot.state||(ot.state=new ct),st=ut.get,lt=ut.has,ft=ut.set;qe=function(e,t){if(lt.call(ut,e))throw new TypeError("Object already initialized");return t.facade=e,ft.call(ut,e,t),t},Ue=function(e){return st.call(ut,e)||{}},We=function(e){return lt.call(ut,e)}}else{var dt=it("state");at[dt]=!0,qe=function(e,t){if(nt(e,dt))throw new TypeError("Object already initialized");return t.facade=e,rt(e,dt,t),t},Ue=function(e){return nt(e,dt)?e[dt]:{}},We=function(e){return nt(e,dt)}}var ht={set:qe,get:Ue,has:We,enforce:function(e){return We(e)?Ue(e):qe(e,{})},getterFor:function(e){return function(t){var r;if(!tt(t)||(r=Ue(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return r}}},vt=J,pt=g,yt=Function.prototype,gt=vt&&Object.getOwnPropertyDescriptor,mt=pt(yt,"name"),bt={EXISTS:mt,PROPER:mt&&"something"===function(){}.name,CONFIGURABLE:mt&&(!vt||vt&&gt(yt,"name").configurable)},wt=n,St=S,_t=g,It=Fe,Et=a,xt=Ve,jt=bt.CONFIGURABLE,Ot=ht.get,Tt=ht.enforce,Rt=String(String).split("String");(Q.exports=function(e,t,r,n){var o,i=!!n&&!!n.unsafe,a=!!n&&!!n.enumerable,c=!!n&&!!n.noTargetGet,u=n&&void 0!==n.name?n.name:t;St(r)&&("Symbol("===String(u).slice(0,7)&&(u="["+String(u).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!_t(r,"name")||jt&&r.name!==u)&&It(r,"name",u),(o=Tt(r)).source||(o.source=Rt.join("string"==typeof u?u:""))),e!==wt?(i?!c&&e[t]&&(a=!0):delete e[t],a?e[t]=r:It(e,t,r)):a?e[t]=r:Et(t,r)})(Function.prototype,"toString",(function(){return St(this)&&Ot(this).source||xt(this)}));var At={}.toString,kt=function(e){return At.call(e).slice(8,-1)},Lt=X,Pt=S,Ct=kt,Nt=K("toStringTag"),Dt="Arguments"==Ct(function(){return arguments}()),Ft=Lt?Ct:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),Nt))?r:Dt?Ct(t):"Object"==(n=Ct(t))&&Pt(t.callee)?"Arguments":n},Mt=Ft,Bt=X?{}.toString:function(){return"[object "+Mt(this)+"]"},zt=X,qt=Q.exports,Ut=Bt;zt||qt(Object.prototype,"toString",Ut,{unsafe:!0});var Wt={},Vt={},Gt={}.propertyIsEnumerable,Yt=Object.getOwnPropertyDescriptor,Ht=Yt&&!Gt.call({1:2},1);Vt.f=Ht?function(e){var t=Yt(this,e);return!!t&&t.enumerable}:Gt;var Kt=kt,$t="".split,Xt=C((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==Kt(e)?$t.call(e,""):Object(e)}:Object,Qt=Xt,Jt=d,Zt=function(e){return Qt(Jt(e))},er=J,tr=Vt,rr=Ce,nr=Zt,or=Te,ir=g,ar=ce,cr=Object.getOwnPropertyDescriptor;Wt.f=er?cr:function(e,t){if(e=nr(e),t=or(t),ar)try{return cr(e,t)}catch(e){}if(ir(e,t))return rr(!tr.f.call(e,t),e[t])};var ur={},sr=Math.ceil,lr=Math.floor,fr=function(e){var t=+e;return t!=t||0===t?0:(t>0?lr:sr)(t)},dr=fr,hr=Math.max,vr=Math.min,pr=fr,yr=Math.min,gr=function(e){return e>0?yr(pr(e),9007199254740991):0},mr=gr,br=function(e){return mr(e.length)},wr=Zt,Sr=function(e,t){var r=dr(e);return r<0?hr(r+t,0):vr(r,t)},_r=br,Ir=function(e){return function(t,r,n){var o,i=wr(t),a=_r(i),c=Sr(n,a);if(e&&r!=r){for(;a>c;)if((o=i[c++])!=o)return!0}else for(;a>c;c++)if((e||c in i)&&i[c]===r)return e||c||0;return!e&&-1}},Er={includes:Ir(!0),indexOf:Ir(!1)},xr=g,jr=Zt,Or=Er.indexOf,Tr=Ze,Rr=function(e,t){var r,n=jr(e),o=0,i=[];for(r in n)!xr(Tr,r)&&xr(n,r)&&i.push(r);for(;t.length>o;)xr(n,r=t[o++])&&(~Or(i,r)||i.push(r));return i},Ar=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],kr=Rr,Lr=Ar.concat("length","prototype");ur.f=Object.getOwnPropertyNames||function(e){return kr(e,Lr)};var Pr={};Pr.f=Object.getOwnPropertySymbols;var Cr=ur,Nr=Pr,Dr=se,Fr=x("Reflect","ownKeys")||function(e){var t=Cr.f(Dr(e)),r=Nr.f;return r?t.concat(r(e)):t},Mr=g,Br=Fr,zr=Wt,qr=Z,Ur=C,Wr=S,Vr=/#|\.prototype\./,Gr=function(e,t){var r=Hr[Yr(e)];return r==$r||r!=Kr&&(Wr(t)?Ur(t):!!t)},Yr=Gr.normalize=function(e){return String(e).replace(Vr,".").toLowerCase()},Hr=Gr.data={},Kr=Gr.NATIVE="N",$r=Gr.POLYFILL="P",Xr=Gr,Qr=n,Jr=Wt.f,Zr=Fe,en=Q.exports,tn=a,rn=function(e,t){for(var r=Br(t),n=qr.f,o=zr.f,i=0;i<r.length;i++){var a=r[i];Mr(e,a)||n(e,a,o(t,a))}},nn=Xr,on=function(e,t){var r,n,o,i,a,c=e.target,u=e.global,s=e.stat;if(r=u?Qr:s?Qr[c]||tn(c,{}):(Qr[c]||{}).prototype)for(n in t){if(i=t[n],o=e.noTargetGet?(a=Jr(r,n))&&a.value:r[n],!nn(u?n:c+(s?".":"#")+n,e.forced)&&void 0!==o){if(typeof i==typeof o)continue;rn(i,o)}(e.sham||o&&o.sham)&&Zr(i,"sham",!0),en(r,n,i,e)}},an=n.Promise,cn=Q.exports,un=function(e,t,r){for(var n in t)cn(e,n,t[n],r);return e},sn=S,ln=se,fn=function(e){if("object"==typeof e||sn(e))return e;throw TypeError("Can't set "+String(e)+" as a prototype")},dn=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),t=r instanceof Array}catch(e){}return function(r,n){return ln(r),fn(n),t?e.call(r,n):r.__proto__=n,r}}():void 0),hn=Z.f,vn=g,pn=K("toStringTag"),yn=function(e,t,r){e&&!vn(e=r?e:e.prototype,pn)&&hn(e,pn,{configurable:!0,value:t})},gn=x,mn=Z,bn=J,wn=K("species"),Sn=function(e){var t=gn(e),r=mn.f;bn&&t&&!t[wn]&&r(t,wn,{configurable:!0,get:function(){return this}})},_n=function(e,t,r){if(e instanceof t)return e;throw TypeError("Incorrect "+(r?r+" ":"")+"invocation")},In={},En=In,xn=K("iterator"),jn=Array.prototype,On=ye,Tn=function(e,t,r){if(On(e),void 0===t)return e;switch(r){case 0:return function(){return e.call(t)};case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}},Rn=Ft,An=me,kn=In,Ln=K("iterator"),Pn=function(e){if(null!=e)return An(e,Ln)||An(e,"@@iterator")||kn[Rn(e)]},Cn=ye,Nn=se,Dn=Pn,Fn=se,Mn=me,Bn=se,zn=function(e){return void 0!==e&&(En.Array===e||jn[xn]===e)},qn=br,Un=Tn,Wn=function(e,t){var r=arguments.length<2?Dn(e):t;if(Cn(r))return Nn(r.call(e));throw TypeError(String(e)+" is not iterable")},Vn=Pn,Gn=function(e,t,r){var n,o;Fn(e);try{if(!(n=Mn(e,"return"))){if("throw"===t)throw r;return r}n=n.call(e)}catch(e){o=!0,n=e}if("throw"===t)throw r;if(o)throw n;return Fn(n),r},Yn=function(e,t){this.stopped=e,this.result=t},Hn=function(e,t,r){var n,o,i,a,c,u,s,l=r&&r.that,f=!(!r||!r.AS_ENTRIES),d=!(!r||!r.IS_ITERATOR),h=!(!r||!r.INTERRUPTED),v=Un(t,l,1+f+h),p=function(e){return n&&Gn(n,"normal",e),new Yn(!0,e)},y=function(e){return f?(Bn(e),h?v(e[0],e[1],p):v(e[0],e[1])):h?v(e,p):v(e)};if(d)n=e;else{if(!(o=Vn(e)))throw TypeError(String(e)+" is not iterable");if(zn(o)){for(i=0,a=qn(e);a>i;i++)if((c=y(e[i]))&&c instanceof Yn)return c;return new Yn(!1)}n=Wn(e,o)}for(u=n.next;!(s=u.call(n)).done;){try{c=y(s.value)}catch(e){Gn(n,"throw",e)}if("object"==typeof c&&c&&c instanceof Yn)return c}return new Yn(!1)},Kn=K("iterator"),$n=!1;try{var Xn=0,Qn={next:function(){return{done:!!Xn++}},return:function(){$n=!0}};Qn[Kn]=function(){return this},Array.from(Qn,(function(){throw 2}))}catch(e){}var Jn,Zn,eo,to,ro=function(e,t){if(!t&&!$n)return!1;var r=!1;try{var n={};n[Kn]=function(){return{next:function(){return{done:r=!0}}}},e(n)}catch(e){}return r},no=C,oo=S,io=Ft,ao=Ve,co=[],uo=x("Reflect","construct"),so=/^\s*(?:class|function)\b/,lo=so.exec,fo=!so.exec((function(){})),ho=function(e){if(!oo(e))return!1;try{return uo(Object,co,e),!0}catch(e){return!1}},vo=!uo||no((function(){var e;return ho(ho.call)||!ho(Object)||!ho((function(){e=!0}))||e}))?function(e){if(!oo(e))return!1;switch(io(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return fo||!!lo.call(so,ao(e))}:ho,po=vo,yo=he,go=se,mo=function(e){if(po(e))return e;throw TypeError(yo(e)+" is not a constructor")},bo=K("species"),wo=function(e,t){var r,n=go(e).constructor;return void 0===n||null==(r=go(n)[bo])?t:mo(r)},So=x("document","documentElement"),_o=/(?:ipad|iphone|ipod).*applewebkit/i.test(j),Io="process"==kt(n.process),Eo=n,xo=S,jo=C,Oo=Tn,To=So,Ro=ie,Ao=_o,ko=Io,Lo=Eo.setImmediate,Po=Eo.clearImmediate,Co=Eo.process,No=Eo.MessageChannel,Do=Eo.Dispatch,Fo=0,Mo={};try{Jn=Eo.location}catch(e){}var Bo=function(e){if(Mo.hasOwnProperty(e)){var t=Mo[e];delete Mo[e],t()}},zo=function(e){return function(){Bo(e)}},qo=function(e){Bo(e.data)},Uo=function(e){Eo.postMessage(String(e),Jn.protocol+"//"+Jn.host)};Lo&&Po||(Lo=function(e){for(var t=[],r=arguments.length,n=1;r>n;)t.push(arguments[n++]);return Mo[++Fo]=function(){(xo(e)?e:Function(e)).apply(void 0,t)},Zn(Fo),Fo},Po=function(e){delete Mo[e]},ko?Zn=function(e){Co.nextTick(zo(e))}:Do&&Do.now?Zn=function(e){Do.now(zo(e))}:No&&!Ao?(to=(eo=new No).port2,eo.port1.onmessage=qo,Zn=Oo(to.postMessage,to,1)):Eo.addEventListener&&xo(Eo.postMessage)&&!Eo.importScripts&&Jn&&"file:"!==Jn.protocol&&!jo(Uo)?(Zn=Uo,Eo.addEventListener("message",qo,!1)):Zn="onreadystatechange"in Ro("script")?function(e){To.appendChild(Ro("script")).onreadystatechange=function(){To.removeChild(this),Bo(e)}}:function(e){setTimeout(zo(e),0)});var Wo,Vo,Go,Yo,Ho,Ko,$o,Xo,Qo={set:Lo,clear:Po},Jo=n,Zo=/ipad|iphone|ipod/i.test(j)&&void 0!==Jo.Pebble,ei=/web0s(?!.*chrome)/i.test(j),ti=n,ri=Wt.f,ni=Qo.set,oi=_o,ii=Zo,ai=ei,ci=Io,ui=ti.MutationObserver||ti.WebKitMutationObserver,si=ti.document,li=ti.process,fi=ti.Promise,di=ri(ti,"queueMicrotask"),hi=di&&di.value;hi||(Wo=function(){var e,t;for(ci&&(e=li.domain)&&e.exit();Vo;){t=Vo.fn,Vo=Vo.next;try{t()}catch(e){throw Vo?Yo():Go=void 0,e}}Go=void 0,e&&e.enter()},oi||ci||ai||!ui||!si?!ii&&fi&&fi.resolve?(($o=fi.resolve(void 0)).constructor=fi,Xo=$o.then,Yo=function(){Xo.call($o,Wo)}):Yo=ci?function(){li.nextTick(Wo)}:function(){ni.call(ti,Wo)}:(Ho=!0,Ko=si.createTextNode(""),new ui(Wo).observe(Ko,{characterData:!0}),Yo=function(){Ko.data=Ho=!Ho}));var vi=hi||function(e){var t={fn:e,next:void 0};Go&&(Go.next=t),Vo||(Vo=t,Yo()),Go=t},pi={},yi=ye,gi=function(e){var t,r;this.promise=new e((function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n})),this.resolve=yi(t),this.reject=yi(r)};pi.f=function(e){return new gi(e)};var mi,bi,wi,Si,_i=se,Ii=te,Ei=pi,xi=function(e,t){if(_i(e),Ii(t)&&t.constructor===e)return t;var r=Ei.f(e);return(0,r.resolve)(t),r.promise},ji=n,Oi="object"==typeof window,Ti=on,Ri=n,Ai=x,ki=an,Li=Q.exports,Pi=un,Ci=dn,Ni=yn,Di=Sn,Fi=ye,Mi=S,Bi=te,zi=_n,qi=Ve,Ui=Hn,Wi=ro,Vi=wo,Gi=Qo.set,Yi=vi,Hi=xi,Ki=function(e,t){var r=ji.console;r&&r.error&&(1===arguments.length?r.error(e):r.error(e,t))},$i=pi,Xi=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},Qi=ht,Ji=Xr,Zi=Oi,ea=Io,ta=P,ra=K("species"),na="Promise",oa=Qi.get,ia=Qi.set,aa=Qi.getterFor(na),ca=ki&&ki.prototype,ua=ki,sa=ca,la=Ri.TypeError,fa=Ri.document,da=Ri.process,ha=$i.f,va=ha,pa=!!(fa&&fa.createEvent&&Ri.dispatchEvent),ya=Mi(Ri.PromiseRejectionEvent),ga=!1,ma=Ji(na,(function(){var e=qi(ua),t=e!==String(ua);if(!t&&66===ta)return!0;if(ta>=51&&/native code/.test(e))return!1;var r=new ua((function(e){e(1)})),n=function(e){e((function(){}),(function(){}))};return(r.constructor={})[ra]=n,!(ga=r.then((function(){}))instanceof n)||!t&&Zi&&!ya})),ba=ma||!Wi((function(e){ua.all(e).catch((function(){}))})),wa=function(e){var t;return!(!Bi(e)||!Mi(t=e.then))&&t},Sa=function(e,t){if(!e.notified){e.notified=!0;var r=e.reactions;Yi((function(){for(var n=e.value,o=1==e.state,i=0;r.length>i;){var a,c,u,s=r[i++],l=o?s.ok:s.fail,f=s.resolve,d=s.reject,h=s.domain;try{l?(o||(2===e.rejection&&xa(e),e.rejection=1),!0===l?a=n:(h&&h.enter(),a=l(n),h&&(h.exit(),u=!0)),a===s.promise?d(la("Promise-chain cycle")):(c=wa(a))?c.call(a,f,d):f(a)):d(n)}catch(e){h&&!u&&h.exit(),d(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&Ia(e)}))}},_a=function(e,t,r){var n,o;pa?((n=fa.createEvent("Event")).promise=t,n.reason=r,n.initEvent(e,!1,!0),Ri.dispatchEvent(n)):n={promise:t,reason:r},!ya&&(o=Ri["on"+e])?o(n):"unhandledrejection"===e&&Ki("Unhandled promise rejection",r)},Ia=function(e){Gi.call(Ri,(function(){var t,r=e.facade,n=e.value;if(Ea(e)&&(t=Xi((function(){ea?da.emit("unhandledRejection",n,r):_a("unhandledrejection",r,n)})),e.rejection=ea||Ea(e)?2:1,t.error))throw t.value}))},Ea=function(e){return 1!==e.rejection&&!e.parent},xa=function(e){Gi.call(Ri,(function(){var t=e.facade;ea?da.emit("rejectionHandled",t):_a("rejectionhandled",t,e.value)}))},ja=function(e,t,r){return function(n){e(t,n,r)}},Oa=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=2,Sa(e,!0))},Ta=function(e,t,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===t)throw la("Promise can't be resolved itself");var n=wa(t);n?Yi((function(){var r={done:!1};try{n.call(t,ja(Ta,r,e),ja(Oa,r,e))}catch(t){Oa(r,t,e)}})):(e.value=t,e.state=1,Sa(e,!1))}catch(t){Oa({done:!1},t,e)}}};if(ma&&(sa=(ua=function(e){zi(this,ua,na),Fi(e),mi.call(this);var t=oa(this);try{e(ja(Ta,t),ja(Oa,t))}catch(e){Oa(t,e)}}).prototype,(mi=function(e){ia(this,{type:na,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=Pi(sa,{then:function(e,t){var r=aa(this),n=ha(Vi(this,ua));return n.ok=!Mi(e)||e,n.fail=Mi(t)&&t,n.domain=ea?da.domain:void 0,r.parent=!0,r.reactions.push(n),0!=r.state&&Sa(r,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),bi=function(){var e=new mi,t=oa(e);this.promise=e,this.resolve=ja(Ta,t),this.reject=ja(Oa,t)},$i.f=ha=function(e){return e===ua||e===wi?new bi(e):va(e)},Mi(ki)&&ca!==Object.prototype)){Si=ca.then,ga||(Li(ca,"then",(function(e,t){var r=this;return new ua((function(e,t){Si.call(r,e,t)})).then(e,t)}),{unsafe:!0}),Li(ca,"catch",sa.catch,{unsafe:!0}));try{delete ca.constructor}catch(e){}Ci&&Ci(ca,sa)}Ti({global:!0,wrap:!0,forced:ma},{Promise:ua}),Ni(ua,na,!1),Di(na),wi=Ai(na),Ti({target:na,stat:!0,forced:ma},{reject:function(e){var t=ha(this);return t.reject.call(void 0,e),t.promise}}),Ti({target:na,stat:!0,forced:ma},{resolve:function(e){return Hi(this,e)}}),Ti({target:na,stat:!0,forced:ba},{all:function(e){var t=this,r=ha(t),n=r.resolve,o=r.reject,i=Xi((function(){var r=Fi(t.resolve),i=[],a=0,c=1;Ui(e,(function(e){var u=a++,s=!1;i.push(void 0),c++,r.call(t,e).then((function(e){s||(s=!0,i[u]=e,--c||n(i))}),o)})),--c||n(i)}));return i.error&&o(i.value),r.promise},race:function(e){var t=this,r=ha(t),n=r.reject,o=Xi((function(){var o=Fi(t.resolve);Ui(e,(function(e){o.call(t,e).then(r.resolve,n)}))}));return o.error&&n(o.value),r.promise}});var Ra=on,Aa=an,ka=C,La=x,Pa=S,Ca=wo,Na=xi,Da=Q.exports;if(Ra({target:"Promise",proto:!0,real:!0,forced:!!Aa&&ka((function(){Aa.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=Ca(this,La("Promise")),r=Pa(e);return this.then(r?function(r){return Na(t,e()).then((function(){return r}))}:e,r?function(r){return Na(t,e()).then((function(){throw r}))}:e)}}),Pa(Aa)){var Fa=La("Promise").prototype.finally;Aa.prototype.finally!==Fa&&Da(Aa.prototype,"finally",Fa,{unsafe:!0})}var Ma,Ba=Rr,za=Ar,qa=Object.keys||function(e){return Ba(e,za)},Ua=Z,Wa=se,Va=qa,Ga=J?Object.defineProperties:function(e,t){Wa(e);for(var r,n=Va(t),o=n.length,i=0;o>i;)Ua.f(e,r=n[i++],t[r]);return e},Ya=se,Ha=Ga,Ka=Ar,$a=Ze,Xa=So,Qa=ie,Ja=Je("IE_PROTO"),Za=function(){},ec=function(e){return"<script>"+e+"<\/script>"},tc=function(e){e.write(ec("")),e.close();var t=e.parentWindow.Object;return e=null,t},rc=function(){try{Ma=new ActiveXObject("htmlfile")}catch(e){}var e,t;rc="undefined"!=typeof document?document.domain&&Ma?tc(Ma):((t=Qa("iframe")).style.display="none",Xa.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(ec("document.F=Object")),e.close(),e.F):tc(Ma);for(var r=Ka.length;r--;)delete rc.prototype[Ka[r]];return rc()};$a[Ja]=!0;var nc,oc,ic,ac=Object.create||function(e,t){var r;return null!==e?(Za.prototype=Ya(e),r=new Za,Za.prototype=null,r[Ja]=e):r=rc(),void 0===t?r:Ha(r,t)},cc=!C((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),uc=g,sc=S,lc=v,fc=cc,dc=Je("IE_PROTO"),hc=Object.prototype,vc=fc?Object.getPrototypeOf:function(e){var t=lc(e);if(uc(t,dc))return t[dc];var r=t.constructor;return sc(r)&&t instanceof r?r.prototype:t instanceof Object?hc:null},pc=C,yc=S,gc=vc,mc=Q.exports,bc=K("iterator"),wc=!1;[].keys&&("next"in(ic=[].keys())?(oc=gc(gc(ic)))!==Object.prototype&&(nc=oc):wc=!0),(null==nc||pc((function(){var e={};return nc[bc].call(e)!==e})))&&(nc={}),yc(nc[bc])||mc(nc,bc,(function(){return this}));var Sc={IteratorPrototype:nc,BUGGY_SAFARI_ITERATORS:wc},_c=Sc.IteratorPrototype,Ic=ac,Ec=Ce,xc=yn,jc=In,Oc=function(){return this},Tc=function(e,t,r){var n=t+" Iterator";return e.prototype=Ic(_c,{next:Ec(1,r)}),xc(e,n,!1),jc[n]=Oc,e},Rc=Ft,Ac=function(e){if("Symbol"===Rc(e))throw TypeError("Cannot convert a Symbol value to a string");return String(e)},kc=te,Lc=kt,Pc=K("match"),Cc=se,Nc=function(){var e=Cc(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},Dc=fr,Fc=Ac,Mc=d,Bc=function(e){return function(t,r){var n,o,i=Fc(Mc(t)),a=Dc(r),c=i.length;return a<0||a>=c?e?"":void 0:(n=i.charCodeAt(a))<55296||n>56319||a+1===c||(o=i.charCodeAt(a+1))<56320||o>57343?e?i.charAt(a):n:e?i.slice(a,a+2):o-56320+(n-55296<<10)+65536}},zc={codeAt:Bc(!1),charAt:Bc(!0)},qc=zc.charAt,Uc=function(e,t,r){return t+(r?qc(e,t).length:1)},Wc={},Vc=C,Gc=n.RegExp;Wc.UNSUPPORTED_Y=Vc((function(){var e=Gc("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),Wc.BROKEN_CARET=Vc((function(){var e=Gc("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));var Yc,Hc,Kc=C,$c=n.RegExp,Xc=Kc((function(){var e=$c(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)})),Qc=C,Jc=n.RegExp,Zc=Qc((function(){var e=Jc("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")})),eu=Ac,tu=Nc,ru=Wc,nu=o.exports,ou=ac,iu=ht.get,au=Xc,cu=Zc,uu=RegExp.prototype.exec,su=nu("native-string-replace",String.prototype.replace),lu=uu,fu=(Yc=/a/,Hc=/b*/g,uu.call(Yc,"a"),uu.call(Hc,"a"),0!==Yc.lastIndex||0!==Hc.lastIndex),du=ru.UNSUPPORTED_Y||ru.BROKEN_CARET,hu=void 0!==/()??/.exec("")[1];(fu||hu||du||au||cu)&&(lu=function(e){var t,r,n,o,i,a,c,u=this,s=iu(u),l=eu(e),f=s.raw;if(f)return f.lastIndex=u.lastIndex,t=lu.call(f,l),u.lastIndex=f.lastIndex,t;var d=s.groups,h=du&&u.sticky,v=tu.call(u),p=u.source,y=0,g=l;if(h&&(-1===(v=v.replace("y","")).indexOf("g")&&(v+="g"),g=l.slice(u.lastIndex),u.lastIndex>0&&(!u.multiline||u.multiline&&"\n"!==l.charAt(u.lastIndex-1))&&(p="(?: "+p+")",g=" "+g,y++),r=new RegExp("^(?:"+p+")",v)),hu&&(r=new RegExp("^"+p+"$(?!\\s)",v)),fu&&(n=u.lastIndex),o=uu.call(h?r:u,g),h?o?(o.input=o.input.slice(y),o[0]=o[0].slice(y),o.index=u.lastIndex,u.lastIndex+=o[0].length):u.lastIndex=0:fu&&o&&(u.lastIndex=u.global?o.index+o[0].length:n),hu&&o&&o.length>1&&su.call(o[0],r,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)})),o&&d)for(o.groups=a=ou(null),i=0;i<d.length;i++)a[(c=d[i])[0]]=o[c[1]];return o});var vu=lu,pu=se,yu=S,gu=kt,mu=vu,bu=function(e,t){var r=e.exec;if(yu(r)){var n=r.call(e,t);return null!==n&&pu(n),n}if("RegExp"===gu(e))return mu.call(e,t);throw TypeError("RegExp#exec called on incompatible receiver")},wu=on,Su=Tc,_u=d,Iu=gr,Eu=Ac,xu=se,ju=function(e){var t;return kc(e)&&(void 0!==(t=e[Pc])?!!t:"RegExp"==Lc(e))},Ou=Nc,Tu=me,Ru=Q.exports,Au=C,ku=wo,Lu=Uc,Pu=bu,Cu=ht,Nu=K("matchAll"),Du=Cu.set,Fu=Cu.getterFor("RegExp String Iterator"),Mu=RegExp.prototype,Bu="".matchAll,zu=!!Bu&&!Au((function(){"a".matchAll(/./)})),qu=Su((function(e,t,r,n){Du(this,{type:"RegExp String Iterator",regexp:e,string:t,global:r,unicode:n,done:!1})}),"RegExp String",(function(){var e=Fu(this);if(e.done)return{value:void 0,done:!0};var t=e.regexp,r=e.string,n=Pu(t,r);return null===n?{value:void 0,done:e.done=!0}:e.global?(""===Eu(n[0])&&(t.lastIndex=Lu(r,Iu(t.lastIndex),e.unicode)),{value:n,done:!1}):(e.done=!0,{value:n,done:!1})})),Uu=function(e){var t,r,n,o,i,a,c=xu(this),u=Eu(e);return t=ku(c,RegExp),void 0===(r=c.flags)&&c instanceof RegExp&&!("flags"in Mu)&&(r=Ou.call(c)),n=void 0===r?"":Eu(r),o=new t(t===RegExp?c.source:c,n),i=!!~n.indexOf("g"),a=!!~n.indexOf("u"),o.lastIndex=Iu(c.lastIndex),new qu(o,u,i,a)};wu({target:"String",proto:!0,forced:zu},{matchAll:function(e){var t,r,n=_u(this);if(null!=e){if(ju(e)&&!~Eu(_u("flags"in Mu?e.flags:Ou.call(e))).indexOf("g"))throw TypeError("`.matchAll` does not allow non-global regexes");if(zu)return Bu.apply(n,arguments);if(r=Tu(e,Nu))return r.call(e,n)}else if(zu)return Bu.apply(n,arguments);return t=Eu(n),new RegExp(e,"g")[Nu](t)}}),Nu in Mu||Ru(Mu,Nu,Uu);var Wu=kt,Vu=Array.isArray||function(e){return"Array"==Wu(e)},Gu=Vu,Yu=vo,Hu=te,Ku=K("species"),$u=function(e){var t;return Gu(e)&&(t=e.constructor,(Yu(t)&&(t===Array||Gu(t.prototype))||Hu(t)&&null===(t=t[Ku]))&&(t=void 0)),void 0===t?Array:t},Xu=function(e,t){return new($u(e))(0===t?0:t)},Qu=Tn,Ju=Xt,Zu=v,es=br,ts=Xu,rs=[].push,ns=function(e){var t=1==e,r=2==e,n=3==e,o=4==e,i=6==e,a=7==e,c=5==e||i;return function(u,s,l,f){for(var d,h,v=Zu(u),p=Ju(v),y=Qu(s,l,3),g=es(p),m=0,b=f||ts,w=t?b(u,g):r||a?b(u,0):void 0;g>m;m++)if((c||m in p)&&(h=y(d=p[m],m,v),e))if(t)w[m]=h;else if(h)switch(e){case 3:return!0;case 5:return d;case 6:return m;case 2:rs.call(w,d)}else switch(e){case 4:return!1;case 7:rs.call(w,d)}return i?-1:n||o?o:w}},os={forEach:ns(0),map:ns(1),filter:ns(2),some:ns(3),every:ns(4),find:ns(5),findIndex:ns(6),filterReject:ns(7)},is=C,as=P,cs=K("species"),us=function(e){return as>=51||!is((function(){var t=[];return(t.constructor={})[cs]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},ss=os.map;on({target:"Array",proto:!0,forced:!us("map")},{map:function(e){return ss(this,e,arguments.length>1?arguments[1]:void 0)}});var ls=C,fs=on,ds=Zt,hs=[].join,vs=Xt!=Object,ps=function(e,t){var r=[][e];return!!r&&ls((function(){r.call(null,t||function(){throw 1},1)}))}("join",",");fs({target:"Array",proto:!0,forced:vs||!ps},{join:function(e){return hs.call(ds(this),void 0===e?",":e)}});var ys=ac,gs=Z,ms=K("unscopables"),bs=Array.prototype;null==bs[ms]&&gs.f(bs,ms,{configurable:!0,value:ys(null)});var ws=on,Ss=bt,_s=S,Is=Tc,Es=vc,xs=dn,js=yn,Os=Fe,Ts=Q.exports,Rs=In,As=Ss.PROPER,ks=Ss.CONFIGURABLE,Ls=Sc.IteratorPrototype,Ps=Sc.BUGGY_SAFARI_ITERATORS,Cs=K("iterator"),Ns=function(){return this},Ds=function(e,t,r,n,o,i,a){Is(r,t,n);var c,u,s,l=function(e){if(e===o&&p)return p;if(!Ps&&e in h)return h[e];switch(e){case"keys":case"values":case"entries":return function(){return new r(this,e)}}return function(){return new r(this)}},f=t+" Iterator",d=!1,h=e.prototype,v=h[Cs]||h["@@iterator"]||o&&h[o],p=!Ps&&v||l(o),y="Array"==t&&h.entries||v;if(y&&(c=Es(y.call(new e)))!==Object.prototype&&c.next&&(Es(c)!==Ls&&(xs?xs(c,Ls):_s(c[Cs])||Ts(c,Cs,Ns)),js(c,f,!0)),As&&"values"==o&&v&&"values"!==v.name&&(ks?Os(h,"name","values"):(d=!0,p=function(){return v.call(this)})),o)if(u={values:l("values"),keys:i?p:l("keys"),entries:l("entries")},a)for(s in u)(Ps||d||!(s in h))&&Ts(h,s,u[s]);else ws({target:t,proto:!0,forced:Ps||d},u);return h[Cs]!==p&&Ts(h,Cs,p,{name:o}),Rs[t]=p,u},Fs=Zt,Ms=function(e){bs[ms][e]=!0},Bs=In,zs=ht,qs=Ds,Us=zs.set,Ws=zs.getterFor("Array Iterator"),Vs=qs(Array,"Array",(function(e,t){Us(this,{type:"Array Iterator",target:Fs(e),index:0,kind:t})}),(function(){var e=Ws(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}}),"values");Bs.Arguments=Bs.Array,Ms("keys"),Ms("values"),Ms("entries");var Gs=ie("span").classList,Ys=Gs&&Gs.constructor&&Gs.constructor.prototype,Hs=Ys===Object.prototype?void 0:Ys,Ks=n,$s={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Xs=Hs,Qs=Vs,Js=Fe,Zs=K,el=Zs("iterator"),tl=Zs("toStringTag"),rl=Qs.values,nl=function(e,t){if(e){if(e[el]!==rl)try{Js(e,el,rl)}catch(t){e[el]=rl}if(e[tl]||Js(e,tl,t),$s[t])for(var r in Qs)if(e[r]!==Qs[r])try{Js(e,r,Qs[r])}catch(t){e[r]=Qs[r]}}};for(var ol in $s)nl(Ks[ol]&&Ks[ol].prototype,ol);nl(Xs,"DOMTokenList");var il=zc.charAt,al=Ac,cl=ht,ul=Ds,sl=cl.set,ll=cl.getterFor("String Iterator");ul(String,"String",(function(e){sl(this,{type:"String Iterator",string:al(e),index:0})}),(function(){var e,t=ll(this),r=t.string,n=t.index;return n>=r.length?{value:void 0,done:!0}:(e=il(r,n),t.index+=e.length,{value:e,done:!1})}));on({target:"RegExp",proto:!0,forced:/./.exec!==vu},{exec:vu});var fl=Q.exports,dl=vu,hl=C,vl=K,pl=Fe,yl=vl("species"),gl=RegExp.prototype,ml=function(e,t,r,n){var o=vl(e),i=!hl((function(){var t={};return t[o]=function(){return 7},7!=""[e](t)})),a=i&&!hl((function(){var t=!1,r=/a/;return"split"===e&&((r={}).constructor={},r.constructor[yl]=function(){return r},r.flags="",r[o]=/./[o]),r.exec=function(){return t=!0,null},r[o](""),!t}));if(!i||!a||r){var c=/./[o],u=t(o,""[e],(function(e,t,r,n,o){var a=t.exec;return a===dl||a===gl.exec?i&&!o?{done:!0,value:c.call(t,r,n)}:{done:!0,value:e.call(r,t,n)}:{done:!1}}));fl(String.prototype,e,u[0]),fl(gl,o,u[1])}n&&pl(gl[o],"sham",!0)},bl=se,wl=gr,Sl=Ac,_l=d,Il=me,El=Uc,xl=bu;ml("match",(function(e,t,r){return[function(t){var r=_l(this),n=null==t?void 0:Il(t,e);return n?n.call(t,r):new RegExp(t)[e](Sl(r))},function(e){var n=bl(this),o=Sl(e),i=r(t,n,o);if(i.done)return i.value;if(!n.global)return xl(n,o);var a=n.unicode;n.lastIndex=0;for(var c,u=[],s=0;null!==(c=xl(n,o));){var l=Sl(c[0]);u[s]=l,""===l&&(n.lastIndex=El(o,wl(n.lastIndex),a)),s++}return 0===s?null:u}]}));var jl=Te,Ol=Z,Tl=Ce,Rl=on,Al=C,kl=Vu,Ll=te,Pl=v,Cl=br,Nl=function(e,t,r){var n=jl(t);n in e?Ol.f(e,n,Tl(0,r)):e[n]=r},Dl=Xu,Fl=us,Ml=P,Bl=K("isConcatSpreadable"),zl=Ml>=51||!Al((function(){var e=[];return e[Bl]=!1,e.concat()[0]!==e})),ql=Fl("concat"),Ul=function(e){if(!Ll(e))return!1;var t=e[Bl];return void 0!==t?!!t:kl(e)};Rl({target:"Array",proto:!0,forced:!zl||!ql},{concat:function(e){var t,r,n,o,i,a=Pl(this),c=Dl(a,0),u=0;for(t=-1,n=arguments.length;t<n;t++)if(Ul(i=-1===t?a:arguments[t])){if(u+(o=Cl(i))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(r=0;r<o;r++,u++)r in i&&Nl(c,u,i[r])}else{if(u>=9007199254740991)throw TypeError("Maximum allowed index exceeded");Nl(c,u++,i)}return c.length=u,c}});var Wl={exports:{}};
/*!
	    localForage -- Offline Storage, Improved
	    Version 1.10.0
	    https://localforage.github.io/localForage
	    (c) 2013-2017 Mozilla, Apache License 2.0
	*/Wl.exports=function e(r,n,o){function i(c,u){if(!n[c]){if(!r[c]){if(!u&&t)return t(c);if(a)return a(c,!0);var s=new Error("Cannot find module '"+c+"'");throw s.code="MODULE_NOT_FOUND",s}var l=n[c]={exports:{}};r[c][0].call(l.exports,(function(e){var t=r[c][1][e];return i(t||e)}),l,l.exports,e,r,n,o)}return n[c].exports}for(var a=t,c=0;c<o.length;c++)i(o[c]);return i}({1:[function(t,r,n){(function(e){var t,n,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var i=0,a=new o(l),c=e.document.createTextNode("");a.observe(c,{characterData:!0}),t=function(){c.data=i=++i%2}}else if(e.setImmediate||void 0===e.MessageChannel)t="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){l(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(l,0)};else{var u=new e.MessageChannel;u.port1.onmessage=l,t=function(){u.port2.postMessage(0)}}var s=[];function l(){var e,t;n=!0;for(var r=s.length;r;){for(t=s,s=[],e=-1;++e<r;)t[e]();r=s.length}n=!1}r.exports=function(e){1!==s.push(e)||n||t()}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,r){var n=e(1);function o(){}var i={},a=["REJECTED"],c=["FULFILLED"],u=["PENDING"];function s(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,e!==o&&h(this,e)}function l(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function f(e,t,r){n((function(){var n;try{n=t(r)}catch(t){return i.reject(e,t)}n===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,n)}))}function d(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function h(e,t){var r=!1;function n(t){r||(r=!0,i.reject(e,t))}function o(t){r||(r=!0,i.resolve(e,t))}var a=v((function(){t(o,n)}));"error"===a.status&&n(a.value)}function v(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}t.exports=s,s.prototype.catch=function(e){return this.then(null,e)},s.prototype.then=function(e,t){if("function"!=typeof e&&this.state===c||"function"!=typeof t&&this.state===a)return this;var r=new this.constructor(o);return this.state!==u?f(r,this.state===c?e:t,this.outcome):this.queue.push(new l(r,e,t)),r},l.prototype.callFulfilled=function(e){i.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){f(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){i.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){f(this.promise,this.onRejected,e)},i.resolve=function(e,t){var r=v(d,t);if("error"===r.status)return i.reject(e,r.value);var n=r.value;if(n)h(e,n);else{e.state=c,e.outcome=t;for(var o=-1,a=e.queue.length;++o<a;)e.queue[o].callFulfilled(t)}return e},i.reject=function(e,t){e.state=a,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},s.resolve=function(e){return e instanceof this?e:i.resolve(new this(o),e)},s.reject=function(e){var t=new this(o);return i.reject(t,e)},s.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var a=new Array(r),c=0,u=-1,s=new this(o);++u<r;)l(e[u],u);return s;function l(e,o){t.resolve(e).then((function(e){a[o]=e,++c!==r||n||(n=!0,i.resolve(s,a))}),(function(e){n||(n=!0,i.reject(s,e))}))}},s.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var a,c=-1,u=new this(o);++c<r;)a=e[c],t.resolve(a).then((function(e){n||(n=!0,i.resolve(u,e))}),(function(e){n||(n=!0,i.reject(u,e))}));return u}},{1:1}],3:[function(t,r,n){(function(e){"function"!=typeof e.Promise&&(e.Promise=t(2))}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,r){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();function i(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if("TypeError"!==o.name)throw o;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),n=0;n<e.length;n+=1)r.append(e[n]);return r.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var a=Promise;function c(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function u(e,t,r){"function"==typeof t&&e.then(t),"function"==typeof r&&e.catch(r)}function s(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function l(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var f=void 0,d={},h=Object.prototype.toString;function v(e){return"boolean"==typeof f?a.resolve(f):function(e){return new a((function(t){var r=e.transaction("local-forage-detect-blob-support","readwrite"),n=i([""]);r.objectStore("local-forage-detect-blob-support").put(n,"key"),r.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},r.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);t(r||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}(e).then((function(e){return f=e}))}function p(e){var t=d[e.name],r={};r.promise=new a((function(e,t){r.resolve=e,r.reject=t})),t.deferredOperations.push(r),t.dbReady?t.dbReady=t.dbReady.then((function(){return r.promise})):t.dbReady=r.promise}function y(e){var t=d[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function g(e,t){var r=d[e.name].deferredOperations.pop();if(r)return r.reject(t),r.promise}function m(e,t){return new a((function(r,n){if(d[e.name]=d[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!t)return r(e.db);p(e),e.db.close()}var i=[e.name];t&&i.push(e.version);var a=o.open.apply(o,i);t&&(a.onupgradeneeded=function(t){var r=a.result;try{r.createObjectStore(e.storeName),t.oldVersion<=1&&r.createObjectStore("local-forage-detect-blob-support")}catch(r){if("ConstraintError"!==r.name)throw r;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),a.onerror=function(e){e.preventDefault(),n(a.error)},a.onsuccess=function(){var t=a.result;t.onversionchange=function(e){e.target.close()},r(t),y(e)}}))}function b(e){return m(e,!1)}function w(e){return m(e,!0)}function S(e,t){if(!e.db)return!0;var r=!e.db.objectStoreNames.contains(e.storeName),n=e.version<e.db.version,o=e.version>e.db.version;if(n&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),o||r){if(r){var i=e.db.version+1;i>e.version&&(e.version=i)}return!0}return!1}function _(e){return i([function(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),o=0;o<t;o++)n[o]=e.charCodeAt(o);return r}(atob(e.data))],{type:e.type})}function I(e){return e&&e.__local_forage_encoded_blob}function E(e){var t=this,r=t._initReady().then((function(){var e=d[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return u(r,e,e),r}function x(e,t,r,n){void 0===n&&(n=1);try{var o=e.db.transaction(e.storeName,t);r(null,o)}catch(o){if(n>0&&(!e.db||"InvalidStateError"===o.name||"NotFoundError"===o.name))return a.resolve().then((function(){if(!e.db||"NotFoundError"===o.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),w(e)})).then((function(){return function(e){p(e);for(var t=d[e.name],r=t.forages,n=0;n<r.length;n++){var o=r[n];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return e.db=null,b(e).then((function(t){return e.db=t,S(e)?w(e):t})).then((function(n){e.db=t.db=n;for(var o=0;o<r.length;o++)r[o]._dbInfo.db=n})).catch((function(t){throw g(e,t),t}))}(e).then((function(){x(e,t,r,n-1)}))})).catch(r);r(o)}}var j={_driver:"asyncStorage",_initStorage:function(e){var t=this,r={db:null};if(e)for(var n in e)r[n]=e[n];var o=d[r.name];o||(o={forages:[],db:null,dbReady:null,deferredOperations:[]},d[r.name]=o),o.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=E);var i=[];function c(){return a.resolve()}for(var u=0;u<o.forages.length;u++){var s=o.forages[u];s!==t&&i.push(s._initReady().catch(c))}var l=o.forages.slice(0);return a.all(i).then((function(){return r.db=o.db,b(r)})).then((function(e){return r.db=e,S(r,t._defaultConfig.version)?w(r):e})).then((function(e){r.db=o.db=e,t._dbInfo=r;for(var n=0;n<l.length;n++){var i=l[n];i!==t&&(i._dbInfo.db=r.db,i._dbInfo.version=r.version)}}))},_support:function(){try{if(!o||!o.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),iterate:function(e,t){var r=this,n=new a((function(t,n){r.ready().then((function(){x(r._dbInfo,"readonly",(function(o,i){if(o)return n(o);try{var a=i.objectStore(r._dbInfo.storeName).openCursor(),c=1;a.onsuccess=function(){var r=a.result;if(r){var n=r.value;I(n)&&(n=_(n));var o=e(n,r.key,c++);void 0!==o?t(o):r.continue()}else t()},a.onerror=function(){n(a.error)}}catch(e){n(e)}}))})).catch(n)}));return c(n,t),n},getItem:function(e,t){var r=this;e=s(e);var n=new a((function(t,n){r.ready().then((function(){x(r._dbInfo,"readonly",(function(o,i){if(o)return n(o);try{var a=i.objectStore(r._dbInfo.storeName).get(e);a.onsuccess=function(){var e=a.result;void 0===e&&(e=null),I(e)&&(e=_(e)),t(e)},a.onerror=function(){n(a.error)}}catch(e){n(e)}}))})).catch(n)}));return c(n,t),n},setItem:function(e,t,r){var n=this;e=s(e);var o=new a((function(r,o){var i;n.ready().then((function(){return i=n._dbInfo,"[object Blob]"===h.call(t)?v(i.db).then((function(e){return e?t:(r=t,new a((function(e,t){var n=new FileReader;n.onerror=t,n.onloadend=function(t){var n=btoa(t.target.result||"");e({__local_forage_encoded_blob:!0,data:n,type:r.type})},n.readAsBinaryString(r)})));var r})):t})).then((function(t){x(n._dbInfo,"readwrite",(function(i,a){if(i)return o(i);try{var c=a.objectStore(n._dbInfo.storeName);null===t&&(t=void 0);var u=c.put(t,e);a.oncomplete=function(){void 0===t&&(t=null),r(t)},a.onabort=a.onerror=function(){var e=u.error?u.error:u.transaction.error;o(e)}}catch(e){o(e)}}))})).catch(o)}));return c(o,r),o},removeItem:function(e,t){var r=this;e=s(e);var n=new a((function(t,n){r.ready().then((function(){x(r._dbInfo,"readwrite",(function(o,i){if(o)return n(o);try{var a=i.objectStore(r._dbInfo.storeName).delete(e);i.oncomplete=function(){t()},i.onerror=function(){n(a.error)},i.onabort=function(){var e=a.error?a.error:a.transaction.error;n(e)}}catch(e){n(e)}}))})).catch(n)}));return c(n,t),n},clear:function(e){var t=this,r=new a((function(e,r){t.ready().then((function(){x(t._dbInfo,"readwrite",(function(n,o){if(n)return r(n);try{var i=o.objectStore(t._dbInfo.storeName).clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){var e=i.error?i.error:i.transaction.error;r(e)}}catch(e){r(e)}}))})).catch(r)}));return c(r,e),r},length:function(e){var t=this,r=new a((function(e,r){t.ready().then((function(){x(t._dbInfo,"readonly",(function(n,o){if(n)return r(n);try{var i=o.objectStore(t._dbInfo.storeName).count();i.onsuccess=function(){e(i.result)},i.onerror=function(){r(i.error)}}catch(e){r(e)}}))})).catch(r)}));return c(r,e),r},key:function(e,t){var r=this,n=new a((function(t,n){e<0?t(null):r.ready().then((function(){x(r._dbInfo,"readonly",(function(o,i){if(o)return n(o);try{var a=i.objectStore(r._dbInfo.storeName),c=!1,u=a.openKeyCursor();u.onsuccess=function(){var r=u.result;r?0===e||c?t(r.key):(c=!0,r.advance(e)):t(null)},u.onerror=function(){n(u.error)}}catch(e){n(e)}}))})).catch(n)}));return c(n,t),n},keys:function(e){var t=this,r=new a((function(e,r){t.ready().then((function(){x(t._dbInfo,"readonly",(function(n,o){if(n)return r(n);try{var i=o.objectStore(t._dbInfo.storeName).openKeyCursor(),a=[];i.onsuccess=function(){var t=i.result;t?(a.push(t.key),t.continue()):e(a)},i.onerror=function(){r(i.error)}}catch(e){r(e)}}))})).catch(r)}));return c(r,e),r},dropInstance:function(e,t){t=l.apply(this,arguments);var r=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName);var n,i=this;if(e.name){var u=e.name===r.name&&i._dbInfo.db,s=u?a.resolve(i._dbInfo.db):b(e).then((function(t){var r=d[e.name],n=r.forages;r.db=t;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=t;return t}));n=e.storeName?s.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var r=t.version+1;p(e);var n=d[e.name],i=n.forages;t.close();for(var c=0;c<i.length;c++){var u=i[c];u._dbInfo.db=null,u._dbInfo.version=r}return new a((function(t,n){var i=o.open(e.name,r);i.onerror=function(e){i.result.close(),n(e)},i.onupgradeneeded=function(){i.result.deleteObjectStore(e.storeName)},i.onsuccess=function(){var e=i.result;e.close(),t(e)}})).then((function(e){n.db=e;for(var t=0;t<i.length;t++){var r=i[t];r._dbInfo.db=e,y(r._dbInfo)}})).catch((function(t){throw(g(e,t)||a.resolve()).catch((function(){})),t}))}})):s.then((function(t){p(e);var r=d[e.name],n=r.forages;t.close();for(var i=0;i<n.length;i++)n[i]._dbInfo.db=null;return new a((function(t,r){var n=o.deleteDatabase(e.name);n.onerror=function(){var e=n.result;e&&e.close(),r(n.error)},n.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},n.onsuccess=function(){var e=n.result;e&&e.close(),t(e)}})).then((function(e){r.db=e;for(var t=0;t<n.length;t++)y(n[t]._dbInfo)})).catch((function(t){throw(g(e,t)||a.resolve()).catch((function(){})),t}))}))}else n=a.reject("Invalid arguments");return c(n,t),n}},O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=/^~~local_forage_type~([^~]+)~/,R="__lfsc__:".length,A=R+"arbf".length,k=Object.prototype.toString;function L(e){var t,r,n,o,i,a=.75*e.length,c=e.length,u=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var s=new ArrayBuffer(a),l=new Uint8Array(s);for(t=0;t<c;t+=4)r=O.indexOf(e[t]),n=O.indexOf(e[t+1]),o=O.indexOf(e[t+2]),i=O.indexOf(e[t+3]),l[u++]=r<<2|n>>4,l[u++]=(15&n)<<4|o>>2,l[u++]=(3&o)<<6|63&i;return s}function P(e){var t,r=new Uint8Array(e),n="";for(t=0;t<r.length;t+=3)n+=O[r[t]>>2],n+=O[(3&r[t])<<4|r[t+1]>>4],n+=O[(15&r[t+1])<<2|r[t+2]>>6],n+=O[63&r[t+2]];return r.length%3==2?n=n.substring(0,n.length-1)+"=":r.length%3==1&&(n=n.substring(0,n.length-2)+"=="),n}var C={serialize:function(e,t){var r="";if(e&&(r=k.call(e)),e&&("[object ArrayBuffer]"===r||e.buffer&&"[object ArrayBuffer]"===k.call(e.buffer))){var n,o="__lfsc__:";e instanceof ArrayBuffer?(n=e,o+="arbf"):(n=e.buffer,"[object Int8Array]"===r?o+="si08":"[object Uint8Array]"===r?o+="ui08":"[object Uint8ClampedArray]"===r?o+="uic8":"[object Int16Array]"===r?o+="si16":"[object Uint16Array]"===r?o+="ur16":"[object Int32Array]"===r?o+="si32":"[object Uint32Array]"===r?o+="ui32":"[object Float32Array]"===r?o+="fl32":"[object Float64Array]"===r?o+="fl64":t(new Error("Failed to get type for BinaryArray"))),t(o+P(n))}else if("[object Blob]"===r){var i=new FileReader;i.onload=function(){var r="~~local_forage_type~"+e.type+"~"+P(this.result);t("__lfsc__:blob"+r)},i.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(r){console.error("Couldn't convert value into a JSON string: ",e),t(null,r)}},deserialize:function(e){if("__lfsc__:"!==e.substring(0,R))return JSON.parse(e);var t,r=e.substring(A),n=e.substring(R,A);if("blob"===n&&T.test(r)){var o=r.match(T);t=o[1],r=r.substring(o[0].length)}var a=L(r);switch(n){case"arbf":return a;case"blob":return i([a],{type:t});case"si08":return new Int8Array(a);case"ui08":return new Uint8Array(a);case"uic8":return new Uint8ClampedArray(a);case"si16":return new Int16Array(a);case"ur16":return new Uint16Array(a);case"si32":return new Int32Array(a);case"ui32":return new Uint32Array(a);case"fl32":return new Float32Array(a);case"fl64":return new Float64Array(a);default:throw new Error("Unkown type: "+n)}},stringToBuffer:L,bufferToString:P};function N(e,t,r,n){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],r,n)}function D(e,t,r,n,o,i){e.executeSql(r,n,o,(function(e,a){a.code===a.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,c){c.rows.length?i(e,a):N(e,t,(function(){e.executeSql(r,n,o,i)}),i)}),i):i(e,a)}),i)}function F(e,t,r,n){var o=this;e=s(e);var i=new a((function(i,a){o.ready().then((function(){void 0===t&&(t=null);var c=t,u=o._dbInfo;u.serializer.serialize(t,(function(t,s){s?a(s):u.db.transaction((function(r){D(r,u,"INSERT OR REPLACE INTO "+u.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){i(c)}),(function(e,t){a(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(n>0)return void i(F.apply(o,[e,c,r,n-1]));a(t)}}))}))})).catch(a)}));return c(i,r),i}function M(e){return new a((function(t,r){e.transaction((function(n){n.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(r,n){for(var o=[],i=0;i<n.rows.length;i++)o.push(n.rows.item(i).name);t({db:e,storeNames:o})}),(function(e,t){r(t)}))}),(function(e){r(e)}))}))}var B={_driver:"webSQLStorage",_initStorage:function(e){var t=this,r={db:null};if(e)for(var n in e)r[n]="string"!=typeof e[n]?e[n].toString():e[n];var o=new a((function(e,n){try{r.db=openDatabase(r.name,String(r.version),r.description,r.size)}catch(e){return n(e)}r.db.transaction((function(o){N(o,r,(function(){t._dbInfo=r,e()}),(function(e,t){n(t)}))}),n)}));return r.serializer=C,o},_support:"function"==typeof openDatabase,iterate:function(e,t){var r=this,n=new a((function(t,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){D(r,o,"SELECT * FROM "+o.storeName,[],(function(r,n){for(var i=n.rows,a=i.length,c=0;c<a;c++){var u=i.item(c),s=u.value;if(s&&(s=o.serializer.deserialize(s)),void 0!==(s=e(s,u.key,c+1)))return void t(s)}t()}),(function(e,t){n(t)}))}))})).catch(n)}));return c(n,t),n},getItem:function(e,t){var r=this;e=s(e);var n=new a((function(t,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){D(r,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,r){var n=r.rows.length?r.rows.item(0).value:null;n&&(n=o.serializer.deserialize(n)),t(n)}),(function(e,t){n(t)}))}))})).catch(n)}));return c(n,t),n},setItem:function(e,t,r){return F.apply(this,[e,t,r,1])},removeItem:function(e,t){var r=this;e=s(e);var n=new a((function(t,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){D(r,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){n(t)}))}))})).catch(n)}));return c(n,t),n},clear:function(e){var t=this,r=new a((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){D(t,n,"DELETE FROM "+n.storeName,[],(function(){e()}),(function(e,t){r(t)}))}))})).catch(r)}));return c(r,e),r},length:function(e){var t=this,r=new a((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){D(t,n,"SELECT COUNT(key) as c FROM "+n.storeName,[],(function(t,r){var n=r.rows.item(0).c;e(n)}),(function(e,t){r(t)}))}))})).catch(r)}));return c(r,e),r},key:function(e,t){var r=this,n=new a((function(t,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){D(r,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,r){var n=r.rows.length?r.rows.item(0).key:null;t(n)}),(function(e,t){n(t)}))}))})).catch(n)}));return c(n,t),n},keys:function(e){var t=this,r=new a((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){D(t,n,"SELECT key FROM "+n.storeName,[],(function(t,r){for(var n=[],o=0;o<r.rows.length;o++)n.push(r.rows.item(o).key);e(n)}),(function(e,t){r(t)}))}))})).catch(r)}));return c(r,e),r},dropInstance:function(e,t){t=l.apply(this,arguments);var r=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName);var n,o=this;return c(n=e.name?new a((function(t){var n;n=e.name===r.name?o._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:n,storeNames:[e.storeName]}):t(M(n))})).then((function(e){return new a((function(t,r){e.db.transaction((function(n){function o(e){return new a((function(t,r){n.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){r(t)}))}))}for(var i=[],c=0,u=e.storeNames.length;c<u;c++)i.push(o(e.storeNames[c]));a.all(i).then((function(){t()})).catch((function(e){r(e)}))}),(function(e){r(e)}))}))})):a.reject("Invalid arguments"),t),n}};function z(e,t){var r=e.name+"/";return e.storeName!==t.storeName&&(r+=e.storeName+"/"),r}function q(){return!function(){try{return localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1}catch(e){return!0}}()||localStorage.length>0}var U={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var r in e)t[r]=e[r];return t.keyPrefix=z(e,this._defaultConfig),q()?(this._dbInfo=t,t.serializer=C,a.resolve()):a.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(e,t){var r=this,n=r.ready().then((function(){for(var t=r._dbInfo,n=t.keyPrefix,o=n.length,i=localStorage.length,a=1,c=0;c<i;c++){var u=localStorage.key(c);if(0===u.indexOf(n)){var s=localStorage.getItem(u);if(s&&(s=t.serializer.deserialize(s)),void 0!==(s=e(s,u.substring(o),a++)))return s}}}));return c(n,t),n},getItem:function(e,t){var r=this;e=s(e);var n=r.ready().then((function(){var t=r._dbInfo,n=localStorage.getItem(t.keyPrefix+e);return n&&(n=t.serializer.deserialize(n)),n}));return c(n,t),n},setItem:function(e,t,r){var n=this;e=s(e);var o=n.ready().then((function(){void 0===t&&(t=null);var r=t;return new a((function(o,i){var a=n._dbInfo;a.serializer.serialize(t,(function(t,n){if(n)i(n);else try{localStorage.setItem(a.keyPrefix+e,t),o(r)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||i(e),i(e)}}))}))}));return c(o,r),o},removeItem:function(e,t){var r=this;e=s(e);var n=r.ready().then((function(){var t=r._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return c(n,t),n},clear:function(e){var t=this,r=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,r=localStorage.length-1;r>=0;r--){var n=localStorage.key(r);0===n.indexOf(e)&&localStorage.removeItem(n)}}));return c(r,e),r},length:function(e){var t=this.keys().then((function(e){return e.length}));return c(t,e),t},key:function(e,t){var r=this,n=r.ready().then((function(){var t,n=r._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(n.keyPrefix.length)),t}));return c(n,t),n},keys:function(e){var t=this,r=t.ready().then((function(){for(var e=t._dbInfo,r=localStorage.length,n=[],o=0;o<r;o++){var i=localStorage.key(o);0===i.indexOf(e.keyPrefix)&&n.push(i.substring(e.keyPrefix.length))}return n}));return c(r,e),r},dropInstance:function(e,t){if(t=l.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var r=this.config();e.name=e.name||r.name,e.storeName=e.storeName||r.storeName}var n,o=this;return c(n=e.name?new a((function(t){e.storeName?t(z(e,o._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var r=localStorage.key(t);0===r.indexOf(e)&&localStorage.removeItem(r)}})):a.reject("Invalid arguments"),t),n}},W=function(e,t){for(var r,n,o=e.length,i=0;i<o;){if((r=e[i])===(n=t)||"number"==typeof r&&"number"==typeof n&&isNaN(r)&&isNaN(n))return!0;i++}return!1},V=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},G={},Y={},H={INDEXEDDB:j,WEBSQL:B,LOCALSTORAGE:U},K=[H.INDEXEDDB._driver,H.WEBSQL._driver,H.LOCALSTORAGE._driver],$=["dropInstance"],X=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat($),Q={description:"",driver:K.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function J(e,t){e[t]=function(){var r=arguments;return e.ready().then((function(){return e[t].apply(e,r)}))}}function Z(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var r in t)t.hasOwnProperty(r)&&(V(t[r])?arguments[0][r]=t[r].slice():arguments[0][r]=t[r])}return arguments[0]}var ee=new(function(){function e(t){for(var r in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),H)if(H.hasOwnProperty(r)){var n=H[r],o=n._driver;this[r]=o,G[o]||this.defineDriver(n)}this._defaultConfig=Z({},Q),this._config=Z({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":n(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,r){var n=new a((function(t,r){try{var n=e._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void r(o);for(var i=X.concat("_initStorage"),u=0,s=i.length;u<s;u++){var l=i[u];if((!W($,l)||e[l])&&"function"!=typeof e[l])return void r(o)}!function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),r=a.reject(t);return c(r,arguments[arguments.length-1]),r}},r=0,n=$.length;r<n;r++){var o=$[r];e[o]||(e[o]=t(o))}}();var f=function(r){G[n]&&console.info("Redefining LocalForage driver: "+n),G[n]=e,Y[n]=r,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(f,r):f(!!e._support):f(!0)}catch(e){r(e)}}));return u(n,t,r),n},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,r){var n=G[e]?a.resolve(G[e]):a.reject(new Error("Driver not found."));return u(n,t,r),n},e.prototype.getSerializer=function(e){var t=a.resolve(C);return u(t,e),t},e.prototype.ready=function(e){var t=this,r=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return u(r,e,e),r},e.prototype.setDriver=function(e,t,r){var n=this;V(e)||(e=[e]);var o=this._getSupportedDrivers(e);function i(){n._config.driver=n.driver()}function c(e){return n._extend(e),i(),n._ready=n._initStorage(n._config),n._ready}var s=null!==this._driverSet?this._driverSet.catch((function(){return a.resolve()})):a.resolve();return this._driverSet=s.then((function(){var e=o[0];return n._dbInfo=null,n._ready=null,n.getDriver(e).then((function(e){n._driver=e._driver,i(),n._wrapLibraryMethodsWithReady(),n._initDriver=function(e){return function(){var t=0;return function r(){for(;t<e.length;){var o=e[t];return t++,n._dbInfo=null,n._ready=null,n.getDriver(o).then(c).catch(r)}i();var u=new Error("No available storage method found.");return n._driverSet=a.reject(u),n._driverSet}()}}(o)}))})).catch((function(){i();var e=new Error("No available storage method found.");return n._driverSet=a.reject(e),n._driverSet})),u(this._driverSet,t,r),this._driverSet},e.prototype.supports=function(e){return!!Y[e]},e.prototype._extend=function(e){Z(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],r=0,n=e.length;r<n;r++){var o=e[r];this.supports(o)&&t.push(o)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=X.length;e<t;e++)J(this,X[e])},e.prototype.createInstance=function(t){return new e(t)},e}());t.exports=ee},{3:3}]},{},[4])(4);var Vl=Wl.exports;function Gl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Hl(e,t,r){return t&&Yl(e.prototype,t),r&&Yl(e,r),e}function Kl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ql(e,t)}function Xl(e){return(Xl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ql(e,t){return(Ql=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Jl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zl(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Jl(e)}function ef(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Xl(e);if(t){var o=Xl(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Zl(this,r)}}function tf(e,t,r){return(tf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Xl(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function rf(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function nf(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return rf(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rf(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function of(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,cf(e,t,"get"))}function af(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,cf(e,t,"set"),r),r}function cf(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function uf(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var sf=bt.PROPER,lf=Q.exports,ff=se,df=Ac,hf=C,vf=Nc,pf=RegExp.prototype,yf=pf.toString,gf=hf((function(){return"/a/b"!=yf.call({source:"a",flags:"b"})})),mf=sf&&"toString"!=yf.name;(gf||mf)&&lf(RegExp.prototype,"toString",(function(){var e=ff(this),t=df(e.source),r=e.flags;return"/"+t+"/"+df(void 0===r&&e instanceof RegExp&&!("flags"in pf)?vf.call(e):r)}),{unsafe:!0});var bf=v,wf=Math.floor,Sf="".replace,_f=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,If=/\$([$&'`]|\d{1,2})/g,Ef=ml,xf=C,jf=se,Of=S,Tf=fr,Rf=gr,Af=Ac,kf=d,Lf=Uc,Pf=me,Cf=function(e,t,r,n,o,i){var a=r+e.length,c=n.length,u=If;return void 0!==o&&(o=bf(o),u=_f),Sf.call(i,u,(function(i,u){var s;switch(u.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(a);case"<":s=o[u.slice(1,-1)];break;default:var l=+u;if(0===l)return i;if(l>c){var f=wf(l/10);return 0===f?i:f<=c?void 0===n[f-1]?u.charAt(1):n[f-1]+u.charAt(1):i}s=n[l-1]}return void 0===s?"":s}))},Nf=bu,Df=K("replace"),Ff=Math.max,Mf=Math.min,Bf="$0"==="a".replace(/./,"$0"),zf=!!/./[Df]&&""===/./[Df]("a","$0");Ef("replace",(function(e,t,r){var n=zf?"$":"$0";return[function(e,r){var n=kf(this),o=null==e?void 0:Pf(e,Df);return o?o.call(e,n,r):t.call(Af(n),e,r)},function(e,o){var i=jf(this),a=Af(e);if("string"==typeof o&&-1===o.indexOf(n)&&-1===o.indexOf("$<")){var c=r(t,i,a,o);if(c.done)return c.value}var u=Of(o);u||(o=Af(o));var s=i.global;if(s){var l=i.unicode;i.lastIndex=0}for(var f=[];;){var d=Nf(i,a);if(null===d)break;if(f.push(d),!s)break;""===Af(d[0])&&(i.lastIndex=Lf(a,Rf(i.lastIndex),l))}for(var h,v="",p=0,y=0;y<f.length;y++){d=f[y];for(var g=Af(d[0]),m=Ff(Mf(Tf(d.index),a.length),0),b=[],w=1;w<d.length;w++)b.push(void 0===(h=d[w])?h:String(h));var S=d.groups;if(u){var _=[g].concat(b,m,a);void 0!==S&&_.push(S);var I=Af(o.apply(void 0,_))}else I=Cf(g,a,m,b,S,o);m>=p&&(v+=a.slice(p,m)+I,p=m+g.length)}return v+a.slice(p)}]}),!!xf((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!Bf||zf);var qf={exports:{}},Uf={},Wf=Zt,Vf=ur.f,Gf={}.toString,Yf="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];Uf.f=function(e){return Yf&&"[object Window]"==Gf.call(e)?function(e){try{return Vf(e)}catch(e){return Yf.slice()}}(e):Vf(Wf(e))};var Hf=!C((function(){return Object.isExtensible(Object.preventExtensions({}))})),Kf=on,$f=Ze,Xf=te,Qf=g,Jf=Z.f,Zf=ur,ed=Uf,td=Hf,rd=!1,nd=w("meta"),od=0,id=Object.isExtensible||function(){return!0},ad=function(e){Jf(e,nd,{value:{objectID:"O"+od++,weakData:{}}})},cd=qf.exports={enable:function(){cd.enable=function(){},rd=!0;var e=Zf.f,t=[].splice,r={};r[nd]=1,e(r).length&&(Zf.f=function(r){for(var n=e(r),o=0,i=n.length;o<i;o++)if(n[o]===nd){t.call(n,o,1);break}return n},Kf({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:ed.f}))},fastKey:function(e,t){if(!Xf(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!Qf(e,nd)){if(!id(e))return"F";if(!t)return"E";ad(e)}return e[nd].objectID},getWeakData:function(e,t){if(!Qf(e,nd)){if(!id(e))return!0;if(!t)return!1;ad(e)}return e[nd].weakData},onFreeze:function(e){return td&&rd&&id(e)&&!Qf(e,nd)&&ad(e),e}};$f[nd]=!0;var ud=S,sd=te,ld=dn,fd=on,dd=n,hd=Xr,vd=Q.exports,pd=qf.exports,yd=Hn,gd=_n,md=S,bd=te,wd=C,Sd=ro,_d=yn,Id=function(e,t,r){var n,o;return ld&&ud(n=t.constructor)&&n!==r&&sd(o=n.prototype)&&o!==r.prototype&&ld(e,o),e},Ed=function(e,t,r){var n=-1!==e.indexOf("Map"),o=-1!==e.indexOf("Weak"),i=n?"set":"add",a=dd[e],c=a&&a.prototype,u=a,s={},l=function(e){var t=c[e];vd(c,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(o&&!bd(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return o&&!bd(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(o&&!bd(e))&&t.call(this,0===e?0:e)}:function(e,r){return t.call(this,0===e?0:e,r),this})};if(hd(e,!md(a)||!(o||c.forEach&&!wd((function(){(new a).entries().next()})))))u=r.getConstructor(t,e,n,i),pd.enable();else if(hd(e,!0)){var f=new u,d=f[i](o?{}:-0,1)!=f,h=wd((function(){f.has(1)})),v=Sd((function(e){new a(e)})),p=!o&&wd((function(){for(var e=new a,t=5;t--;)e[i](t,t);return!e.has(-0)}));v||((u=t((function(t,r){gd(t,u,e);var o=Id(new a,t,u);return null!=r&&yd(r,o[i],{that:o,AS_ENTRIES:n}),o}))).prototype=c,c.constructor=u),(h||p)&&(l("delete"),l("has"),n&&l("get")),(p||d)&&l(i),o&&c.clear&&delete c.clear}return s[e]=u,fd({global:!0,forced:u!=a},s),_d(u,e),o||r.setStrong(u,e,n),u},xd=un,jd=qf.exports.getWeakData,Od=se,Td=te,Rd=_n,Ad=Hn,kd=g,Ld=ht.set,Pd=ht.getterFor,Cd=os.find,Nd=os.findIndex,Dd=0,Fd=function(e){return e.frozen||(e.frozen=new Md)},Md=function(){this.entries=[]},Bd=function(e,t){return Cd(e.entries,(function(e){return e[0]===t}))};Md.prototype={get:function(e){var t=Bd(this,e);if(t)return t[1]},has:function(e){return!!Bd(this,e)},set:function(e,t){var r=Bd(this,e);r?r[1]=t:this.entries.push([e,t])},delete:function(e){var t=Nd(this.entries,(function(t){return t[0]===e}));return~t&&this.entries.splice(t,1),!!~t}};var zd,qd={getConstructor:function(e,t,r,n){var o=e((function(e,i){Rd(e,o,t),Ld(e,{type:t,id:Dd++,frozen:void 0}),null!=i&&Ad(i,e[n],{that:e,AS_ENTRIES:r})})),i=Pd(t),a=function(e,t,r){var n=i(e),o=jd(Od(t),!0);return!0===o?Fd(n).set(t,r):o[n.id]=r,e};return xd(o.prototype,{delete:function(e){var t=i(this);if(!Td(e))return!1;var r=jd(e);return!0===r?Fd(t).delete(e):r&&kd(r,t.id)&&delete r[t.id]},has:function(e){var t=i(this);if(!Td(e))return!1;var r=jd(e);return!0===r?Fd(t).has(e):r&&kd(r,t.id)}}),xd(o.prototype,r?{get:function(e){var t=i(this);if(Td(e)){var r=jd(e);return!0===r?Fd(t).get(e):r?r[t.id]:void 0}},set:function(e,t){return a(this,e,t)}}:{add:function(e){return a(this,e,!0)}}),o}},Ud=n,Wd=un,Vd=qf.exports,Gd=Ed,Yd=qd,Hd=te,Kd=ht.enforce,$d=Ke,Xd=!Ud.ActiveXObject&&"ActiveXObject"in Ud,Qd=Object.isExtensible,Jd=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},Zd=Gd("WeakMap",Jd,Yd);if($d&&Xd){zd=Yd.getConstructor(Jd,"WeakMap",!0),Vd.enable();var eh=Zd.prototype,th=eh.delete,rh=eh.has,nh=eh.get,oh=eh.set;Wd(eh,{delete:function(e){if(Hd(e)&&!Qd(e)){var t=Kd(this);return t.frozen||(t.frozen=new zd),th.call(this,e)||t.frozen.delete(e)}return th.call(this,e)},has:function(e){if(Hd(e)&&!Qd(e)){var t=Kd(this);return t.frozen||(t.frozen=new zd),rh.call(this,e)||t.frozen.has(e)}return rh.call(this,e)},get:function(e){if(Hd(e)&&!Qd(e)){var t=Kd(this);return t.frozen||(t.frozen=new zd),rh.call(this,e)?nh.call(this,e):t.frozen.get(e)}return nh.call(this,e)},set:function(e,t){if(Hd(e)&&!Qd(e)){var r=Kd(this);r.frozen||(r.frozen=new zd),rh.call(this,e)?oh.call(this,e,t):r.frozen.set(e,t)}else oh.call(this,e,t);return this}})}var ih=new WeakMap,ah=function(){function e(){Gl(this,e),uf(this,ih,{writable:!0,value:[]})}return Hl(e,[{key:"addListener",value:function(e,t,r,n){af(this,ih,of(this,ih)||[]);var o="string"==typeof r?function(e,o,i){return t[r](e,o,i,n)}:function(e,o,i){return r.call(t,e,o,i,n)};return of(this,ih)[e]?of(this,ih)[e].push(o)-1:(of(this,ih)[e]=[o],0)}},{key:"removeListener",value:function(e,t){of(this,ih)[e]&&of(this,ih)[e][t]?delete of(this,ih)[e][t]:console.log("trying to remove non-existent event handler, event = "+e+" handle = "+t)}},{key:"destructor",value:function(){af(this,ih,null)}},{key:"fireEvent",value:function(t,r){if(of(this,ih))for(var n in of(this,ih)[t])if(of(this,ih)[t].hasOwnProperty(n)&&of(this,ih)[t][n](this,t,arguments[1])===e.STOP_PROPAGATION)break}}]),e}();function ch(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,ch)}Kl(ah,"STOP_PROPAGATION","STOP_PROPAGATION");var uh=function(e){$l(r,e);var t=ef(r);function r(){var e;return Gl(this,r),Kl(Jl(e=t.call(this)),"_id",void 0),Kl(Jl(e),"_savedRemotely",!1),Kl(Jl(e),"_savedLocally",!1),Kl(Jl(e),"deleted",!1),Kl(Jl(e),"createdStamp",void 0),Kl(Jl(e),"modifiedStamp",void 0),Kl(Jl(e),"projectId",void 0),Kl(Jl(e),"isPristine",!1),e.createdStamp=Math.floor(Date.now()/1e3),e}return Hl(r,[{key:"unsaved",value:function(){return!(this._savedLocally&&this._savedRemotely)}},{key:"id",get:function(){return this._id||(this._id=ch()),this._id},set:function(e){if(this._id&&e!==this._id)throw new Error("Occurrence id has already been set, when trying to set new id '".concat(e,"'."));this._id=e}},{key:"queuePost",value:function(e){var t=this;return new Promise((function(n,o){var i=function(){return console.log({"posting form data":e}),t.post(e).then(n,o)};r._tasks.push(i),r._tasks.length>1?console.log("Added post request to the queue."):(console.log("No pending tasks, starting post request immediately."),i().finally(r._next))}))}},{key:"post",value:function(e){var t=this;return fetch(this.SAVE_ENDPOINT,{method:"POST",body:e}).then((function(e){return e.ok?e.clone().json().then((function(r){switch(console.log({"returned to client after save":r}),r.saveState){case"SAVED_TO_SERVER":t._savedLocally=!0,t._savedRemotely=!0;break;case"SAVED_LOCALLY":t._savedLocally=!0,t._savedRemotely=!1;break;default:console.log("Unrecognised save state '".concat(r.saveState,"'"))}return t.createdStamp=r.created,t.modifiedStamp=r.modified,e.json()})):(console.log("Save failed, presumably service worker is missing and there is no network connection. Should write to IndexedDb here."),Promise.reject("IndexedDb storage not yet implemented"))}))}},{key:"_parseDescriptor",value:function(e){this._parseAttributes(e.attributes),this._parseSavedState(e.saveState),this.deleted=e.deleted,this.createdStamp=0+e.created,this.modifiedStamp=0+e.modified,this.projectId=0+e.projectId}},{key:"_parseAttributes",value:function(e){Array.isArray(e)?(console.log("Attributes were spuriously represented as an array rather than as an empty object"),this.attributes={}):this.attributes=e}},{key:"_parseSavedState",value:function(e){switch(e){case"SAVED_LOCALLY":this._savedRemotely=!1,this._savedLocally=!0;break;case"SAVED_TO_SERVER":this._savedRemotely=!0,this._savedLocally=!0;break;default:throw new Error("Unrecognised saved state '".concat(e))}}},{key:"touch",value:function(){this.modifiedStamp=Math.floor(Date.now()/1e3),this.isPristine&&(this.isPristine=!1,this.createdStamp=this.modifiedStamp),this._savedLocally=!1,this._savedRemotely=!1}},{key:"evaluateCompletionStatus",value:function(e){var t={},r=!0;for(var n in e)if(e.hasOwnProperty(n)){var o=e[n];t[n]=o.validator?o.validator(n,o,this.attributes):o.field.isValid(n,o,this.attributes),null!==t[n]&&(r=r&&t[n])}return{requiredFieldsPresent:r,validity:t}}}],[{key:"_next",value:function(){if(r._tasks.shift(),r._tasks.length)return console.log("Running the next task."),r._tasks[0]().finally(r._next)}},{key:"retrieveFromLocal",value:function(e,t){return Vl.getItem("".concat(t.TYPE,".").concat(e)).then((function(r){return r?(t.id=e,t._parseDescriptor(r),t):Promise.reject("Failed to retrieve ".concat(t.TYPE,".").concat(e," locally"))}))}}]),r}(ah);Kl(uh,"_tasks",[]);var sh=function(){function e(){Gl(this,e)}return Hl(e,null,[{key:"fromPostedData",value:function(t){var r,n={saveState:"SAVED_LOCALLY"},o=nf(t.entries());try{for(o.s();!(r=o.n()).done;){var i=r.value;n[i[0]]=i[1]}}catch(e){o.e(e)}finally{o.f()}if(!n.type)throw new Error("Missing type in form data.");if(e.responses.hasOwnProperty(n.type))return new e.responses[n.type](n,{});throw new Error("Unrecognised post type '".concat(n.type,"'"))}},{key:"fromPostResponse",value:function(t){if(!t)throw new Error("Invalid empty post response.");if(!t.type)throw new Error("Missing type in returned response.");if(e.responses.hasOwnProperty(t.type))return new e.responses[t.type]({},t);throw new Error("Unrecognised post type '".concat(t.type,"'"))}}]),e}();function lh(e){var t=new Headers;return t.set("Content-Type","application/json"),new Response(JSON.stringify(e),{status:e.error?500:200,headers:t})}Kl(sh,"responses",{});var fh=function(){function e(t,r){Gl(this,e),Kl(this,"toSaveLocally",void 0),Kl(this,"returnedToClient",void 0),Kl(this,"prebuiltResponse",void 0),Kl(this,"failureErrorMessage","Failed to save a local copy on your device."),Kl(this,"failureErrorHelp","Your internet connection may have failed (or there could be a problem with the server). It wasn't possible to save a temporary copy on your device. Perhaps there is insufficient space? Please try to re-establish a network connection and try again."),this.toSaveLocally=t,this.returnedToClient=r}return Hl(e,[{key:"setPrebuiltResponse",value:function(e){return this.prebuiltResponse=e,this}},{key:"storeLocally",value:function(){var e=this;return Vl.setItem(this.localKey(),this.toSaveLocally).then((function(){return e.prebuiltResponse?e.prebuiltResponse:lh(e.returnedToClient)}),(function(t){return console.log("Failed to store object ".concat(e.toSaveLocally.imageId," locally")),console.log({reason:t}),e.returnedToClient.error=e.failureErrorMessage,e.returnedToClient.errorHelp=e.failureErrorHelp,lh(e.returnedToClient)}))}},{key:"localKey",value:function(){throw new Error("LocalKey must be implemented in a subclass for ".concat(this.toSaveLocally.type))}}]),e}(),dh=function(e){$l(r,e);var t=ef(r);function r(){var e;Gl(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return Kl(Jl(e=t.call.apply(t,[this].concat(o))),"failureErrorMessage","Failed to store image."),Kl(Jl(e),"failureErrorHelp","Your internet connection may have failed (or there could be a problem with the server). It wasn't possible to save a temporary copy on your device. Perhaps there is insufficient space? Please try to re-establish a network connection and try again."),e}return Hl(r,[{key:"populateClientResponse",value:function(){return this.returnedToClient.id=this.toSaveLocally.imageId,this.returnedToClient.type="image",this.returnedToClient.surveyId=this.toSaveLocally.surveyId,this.returnedToClient.occurrenceId=this.toSaveLocally.occurrenceId,this.returnedToClient.created=0+this.toSaveLocally.created,this.returnedToClient.modified=0+this.toSaveLocally.modified,this.returnedToClient.saveState="SAVED_LOCALLY",this.returnedToClient.deleted=this.toSaveLocally.deleted,this.returnedToClient.projectId=0+this.toSaveLocally.projectId,this}},{key:"populateLocalSave",value:function(){return this.toSaveLocally.surveyId=this.returnedToClient.surveyId,this.toSaveLocally.type="image",this.toSaveLocally.occurrenceId=this.returnedToClient.occurrenceId,this.toSaveLocally.imageId=this.returnedToClient.id,this.toSaveLocally.created=0+this.returnedToClient.created,this.toSaveLocally.modified=0+this.returnedToClient.modified,this.toSaveLocally.saveState="SAVED_TO_SERVER",this.toSaveLocally.deleted=this.returnedToClient.deleted,this.toSaveLocally.projectId=0+this.returnedToClient.projectId,this}},{key:"localKey",value:function(){return"image.".concat(this.toSaveLocally.imageId)}}],[{key:"register",value:function(){sh.responses.image=r}}]),r}(fh),hh=function(e){$l(r,e);var t=ef(r);function r(){var e;Gl(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return Kl(Jl(e=t.call.apply(t,[this].concat(o))),"failureErrorMessage","Failed to store survey."),Kl(Jl(e),"failureErrorHelp","Your internet connection may have failed (or there could be a problem with the server). It wasn't possible to save a temporary copy on your device. Perhaps there is insufficient space? Please try to re-establish a network connection and try again."),e}return Hl(r,[{key:"populateClientResponse",value:function(){return this.returnedToClient.id=this.toSaveLocally.surveyId,this.returnedToClient.type="survey",this.returnedToClient.attributes=this.toSaveLocally.attributes,this.returnedToClient.created=this.toSaveLocally.created,this.returnedToClient.modified=this.toSaveLocally.modified,this.returnedToClient.saveState="SAVED_LOCALLY",this.returnedToClient.deleted=this.toSaveLocally.deleted,this.returnedToClient.projectId=this.toSaveLocally.projectId,this}},{key:"populateLocalSave",value:function(){return this.toSaveLocally.surveyId=this.returnedToClient.id,this.toSaveLocally.type="survey",this.toSaveLocally.attributes=this.returnedToClient.attributes,this.toSaveLocally.created=0+this.returnedToClient.created,this.toSaveLocally.modified=0+this.returnedToClient.modified,this.toSaveLocally.saveState="SAVED_TO_SERVER",this.toSaveLocally.deleted=this.returnedToClient.deleted,this.toSaveLocally.projectId=0+this.returnedToClient.projectId,this}},{key:"localKey",value:function(){return"survey.".concat(this.toSaveLocally.surveyId)}}],[{key:"register",value:function(){sh.responses.survey=r}}]),r}(fh),vh=function(e){$l(r,e);var t=ef(r);function r(){var e;Gl(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return Kl(Jl(e=t.call.apply(t,[this].concat(o))),"failureErrorMessage","Failed to store occurrence."),Kl(Jl(e),"failureErrorHelp","Your internet connection may have failed (or there could be a problem with the server). It wasn't possible to save a temporary copy on your device. Perhaps there is insufficient space? Please try to re-establish a network connection and try again."),e}return Hl(r,[{key:"populateClientResponse",value:function(){return this.returnedToClient.id=this.toSaveLocally.occurrenceId,this.returnedToClient.type="occurrence",this.returnedToClient.surveyId=this.toSaveLocally.surveyId,this.returnedToClient.attributes=this.toSaveLocally.attributes,this.returnedToClient.created=0+this.toSaveLocally.created,this.returnedToClient.modified=0+this.toSaveLocally.modified,this.returnedToClient.saveState="SAVED_LOCALLY",this.returnedToClient.deleted=this.toSaveLocally.deleted,this.returnedToClient.projectId=0+this.toSaveLocally.projectId,this}},{key:"populateLocalSave",value:function(){return this.toSaveLocally.occurrenceId=this.returnedToClient.id,this.toSaveLocally.type="occurrence",this.toSaveLocally.surveyId=this.returnedToClient.surveyId,this.toSaveLocally.attributes=this.returnedToClient.attributes,this.toSaveLocally.created=0+this.returnedToClient.created,this.toSaveLocally.modified=0+this.returnedToClient.modified,this.toSaveLocally.saveState="SAVED_TO_SERVER",this.toSaveLocally.deleted=this.returnedToClient.deleted,this.toSaveLocally.projectId=0+this.returnedToClient.projectId,this}},{key:"localKey",value:function(){return"occurrence.".concat(this.toSaveLocally.occurrenceId)}}],[{key:"register",value:function(){sh.responses.occurrence=r}}]),r}(fh),ph=Z.f,yh=ac,gh=un,mh=Tn,bh=_n,wh=Hn,Sh=Ds,_h=Sn,Ih=J,Eh=qf.exports.fastKey,xh=ht.set,jh=ht.getterFor;Ed("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),{getConstructor:function(e,t,r,n){var o=e((function(e,i){bh(e,o,t),xh(e,{type:t,index:yh(null),first:void 0,last:void 0,size:0}),Ih||(e.size=0),null!=i&&wh(i,e[n],{that:e,AS_ENTRIES:r})})),i=jh(t),a=function(e,t,r){var n,o,a=i(e),u=c(e,t);return u?u.value=r:(a.last=u={index:o=Eh(t,!0),key:t,value:r,previous:n=a.last,next:void 0,removed:!1},a.first||(a.first=u),n&&(n.next=u),Ih?a.size++:e.size++,"F"!==o&&(a.index[o]=u)),e},c=function(e,t){var r,n=i(e),o=Eh(t);if("F"!==o)return n.index[o];for(r=n.first;r;r=r.next)if(r.key==t)return r};return gh(o.prototype,{clear:function(){for(var e=i(this),t=e.index,r=e.first;r;)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete t[r.index],r=r.next;e.first=e.last=void 0,Ih?e.size=0:this.size=0},delete:function(e){var t=i(this),r=c(this,e);if(r){var n=r.next,o=r.previous;delete t.index[r.index],r.removed=!0,o&&(o.next=n),n&&(n.previous=o),t.first==r&&(t.first=n),t.last==r&&(t.last=o),Ih?t.size--:this.size--}return!!r},forEach:function(e){for(var t,r=i(this),n=mh(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:r.first;)for(n(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!c(this,e)}}),gh(o.prototype,r?{get:function(e){var t=c(this,e);return t&&t.value},set:function(e,t){return a(this,0===e?0:e,t)}}:{add:function(e){return a(this,e=0===e?0:e,e)}}),Ih&&ph(o.prototype,"size",{get:function(){return i(this).size}}),o},setStrong:function(e,t,r){var n=t+" Iterator",o=jh(t),i=jh(n);Sh(e,t,(function(e,t){xh(this,{type:n,target:e,state:o(e),kind:t,last:void 0})}),(function(){for(var e=i(this),t=e.kind,r=e.last;r&&r.removed;)r=r.previous;return e.target&&(e.last=r=r?r.next:e.state.first)?"keys"==t?{value:r.key,done:!1}:"values"==t?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),r?"entries":"values",!r,!0),_h(t)}});var Oh=function(e){$l(r,e);var t=ef(r);function r(){var e;Gl(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return Kl(Jl(e=t.call.apply(t,[this].concat(o))),"file",void 0),Kl(Jl(e),"TYPE","image"),Kl(Jl(e),"SAVE_ENDPOINT","/saveimage.php"),e}return Hl(r,[{key:"getUrl",value:function(){}},{key:"save",value:function(e,t,r){if(this._savedRemotely)return Promise.reject("".concat(this.id," has already been saved."));var n=new FormData;return n.append("type",this.TYPE),n.append("surveyId",e),n.append("occurrenceId",t),n.append("projectId",r.toString()),n.append("imageId",this.id),n.append("image",this.file),n.append("deleted",this.deleted.toString()),console.log("queueing image post, image id ".concat(this.id)),this.queuePost(n)}},{key:"_parseDescriptor",value:function(e){tf(Xl(r.prototype),"_parseDescriptor",this).call(this,e),this.surveyId=e.surveyId,this.occurrenceId=e.occurrenceId,this.file=e.image}}],[{key:"fromFile",value:function(e){var t=new r;return t.file=e,t}},{key:"placeholder",value:function(e){var t=new r;return t._id=e,r.imageCache.set(e,t),t}},{key:"imageLink",value:function(e,t,r,n){t=t||0,r=r||0;var o="";n.className&&(o+=' class="'.concat(n.className,'"'));var i=t>r?'width="'.concat(t,'"'):'height="'.concat(r,'"');return'<picture><source srcset="/image.php?imageid='.concat(e,'&amp;height=128&amp;format=webp" type="image/webp"><img').concat(o,' src="/image.php?imageid=').concat(e,"&amp;width=").concat(t,"&amp;height=").concat(r,'&amp;format=jpeg" ').concat(i,' alt="photo"></picture>')}}]),r}(uh);Kl(Oh,"imageCache",new Map),Kl(Oh,"EVENT_MODIFIED","modified"),Promise.prototype.finally||(Promise.prototype.finally=function(e){return this.then(e).catch(e)}),dh.register(),hh.register(),vh.register();var Th="version-1.0.1.1634291514",Rh=/^https:\/\/nyphtest\.bsbi\.org\/loadsurveys.php/;function Ah(e){return caches.open(Th).then((function(t){return t.match(e).then((function(t){return console.log(t?"matched ".concat(e.url):"no match for ".concat(e.url)),t||fetch(e)}))}))}function kh(e){return e=new Request(e,{mode:"cors",credentials:"omit"}),caches.open(Th).then((function(t){return fetch(e,{cache:"no-cache"}).then((function(r){return r.ok?t.put(e,r):(console.log("Request during cache update failed for ".concat(e.url)),console.log({"failed cache response":r}),Promise.reject("Request during cache update failed, not caching."))})).catch((function(t){console.log("Cache attempt failed for ".concat(e.url,": error was ").concat(t))}))}))}Vl.config({name:"NYPH App"}),self.addEventListener("install",(function(e){console.log("The service worker is being installed."),self.skipWaiting(),e.waitUntil(caches.open(Th).then((function(e){return e.addAll(["./index.html","./manifest.webmanifest","/appcss/app.css","/img/nyph_final@2x.png","https://fonts.googleapis.com/icon?family=Material+Icons|Material+Icons+Round","https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css","https://database.bsbi.org/js/taxonnames.js.php","https://code.jquery.com/jquery-3.3.1.slim.min.js","https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js","https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"])})).then((function(){return self.skipWaiting()})))})),self.addEventListener("activate",(function(e){self.clients.matchAll({includeUncontrolled:!0}).then((function(e){var t=e.map((function(e){return e.url}));console.log("[ServiceWorker] Matching clients:",t.join(", "))})),e.waitUntil(caches.keys().then((function(e){return Promise.all(e.map((function(e){if(e!==Th)return console.log("[ServiceWorker] Deleting old cache:",e),caches.delete(e)})))})).then((function(){return console.log("[ServiceWorker] Claiming clients for version",Th),self.clients.claim()})))})),self.addEventListener("fetch",(function(e){if(console.log("The service worker is serving: '".concat(e.request.url,"'")),e.preventDefault(),"POST"===e.request.method)if(console.log("Got a post request"),e.request.url.match(Rh))console.log("Passing through whitelisted post request for: ".concat(e.request.url)),e.respondWith(fetch(e.request));else{var t;try{t=e.request.clone()}catch(e){console.log("Failed to clone request."),console.log({"Cloning error":e})}e.respondWith(fetch(e.request).then((function(e){return e.ok?Promise.resolve(e).then((function(e){return e.clone().json()})).then((function(t){return sh.fromPostResponse(t).setPrebuiltResponse(e).populateLocalSave().storeLocally()})).catch((function(t){return console.log({error:t}),Promise.resolve(e)})):(console.log("Failed to save, moving on to attempt IndexedDb"),Promise.reject("Failed to save to server."))})).catch((function(e){return console.log("post fetch failed (probably no network), (reason: ".concat(e,")")),t.formData().then((function(e){return sh.fromPostedData(e).populateClientResponse().storeLocally()}),(function(e){console.log("failed to read form data locally"),console.log({reason:e});return lh({error:"Failed to process posted response data. (internal error)",errorHelp:"Your internet connection may have failed (or there could be a problem with the server). It wasn't possible to save a temporary copy on your device. (an unexpected error occurred) Please try to re-establish a network connection and try again."})}))})))}else if(!e.request.url.match(/^https:\/\/nyphtest\.bsbi\.org\/app\//)||!e.request.url.match(/^https:\/\/nyphtest\.bsbi\.org\/app$/)||e.request.url.match(/^https:\/\/nyphtest\.bsbi\.org\/app\/nyph\.js/)||e.request.url.match(/^https:\/\/nyphtest\.bsbi\.org\/app\/serviceworker\.js/)||e.request.url.match(/^https:\/\/nyphtest\.bsbi\.org\/app\/manifest\.webmanifest/)||e.request.url.match(/^https:\/\/nyphtest\.bsbi\.org\/app\/index\.html/))e.request.url.match(/^https:\/\/nyphtest\.bsbi\.org\/image\.php/)?function(e){e.respondWith(Ah(e.request).then((function(t){if(t)return t;var r=e.request.url,n=r.match(/imageid=([a-fA-F0-9]{8}-(?:[a-fA-F0-9]{4}-){3}[a-fA-F0-9]{12})/);if(n)return function(e){var t=new Oh;return console.log("attempting retrieval of image data from local database"),uh.retrieveFromLocal(e,t).then((function(t){if(console.log("Retrieved image '".concat(e,"' from indexeddb.")),t.file)return(new Headers).append("Content-Type",t.file.type),new Response(t.file,{status:200,statusText:"OK image response from IndexedDb"});console.log("No local file object associated with retrieved image '".concat(e,"' from indexeddb."))}))}(n[1]);console.log("Failed to match image id in url '".concat(r,"'"))})))}(e):(e.respondWith(Ah(e.request)),e.waitUntil(kh(e.request)));else{console.log("redirecting to the root of the SPA");var r=new Request("https://nyphtest.bsbi.org/app/index.html");e.respondWith(Ah(r)),e.waitUntil(kh(r))}}))}();
//# sourceMappingURL=serviceworker.js.map
