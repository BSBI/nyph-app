!function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=n(e),a=n(t),o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function i(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var s=function(e){return e&&e.Math==Math&&e},l=s("object"==typeof globalThis&&globalThis)||s("object"==typeof window&&window)||s("object"==typeof self&&self)||s("object"==typeof o&&o)||function(){return this}()||Function("return this")(),c={exports:{}},u=l,d=function(e,t){try{Object.defineProperty(u,e,{value:t,configurable:!0,writable:!0})}catch(n){u[e]=t}return t},f=d,h=l["__core-js_shared__"]||f("__core-js_shared__",{}),p=h;(c.exports=function(e,t){return p[e]||(p[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.18.3",mode:"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"});var v,m,y=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},g=y,b=function(e){return Object(g(e))},w=b,E={}.hasOwnProperty,_=Object.hasOwn||function(e,t){return E.call(w(e),t)},x=0,S=Math.random(),I=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++x+S).toString(36)},k=function(e){return"function"==typeof e},T=l,R=k,A=function(e){return R(e)?e:void 0},O=function(e,t){return arguments.length<2?A(T[e]):T[e]&&T[e][t]},C=O("navigator","userAgent")||"",N=l,L=C,M=N.process,P=N.Deno,H=M&&M.versions||P&&P.version,D=H&&H.v8;D?m=(v=D.split("."))[0]<4?1:v[0]+v[1]:L&&(!(v=L.match(/Edge\/(\d+)/))||v[1]>=74)&&(v=L.match(/Chrome\/(\d+)/))&&(m=v[1]);var j=m&&+m,F=function(e){try{return!!e()}catch(e){return!0}},B=j,U=F,V=!!Object.getOwnPropertySymbols&&!U((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&B&&B<41})),q=V&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,W=l,Y=c.exports,G=_,z=I,K=V,X=q,J=Y("wks"),Q=W.Symbol,Z=X?Q:Q&&Q.withoutSetter||z,ee=function(e){return G(J,e)&&(K||"string"==typeof J[e])||(K&&G(Q,e)?J[e]=Q[e]:J[e]=Z("Symbol."+e)),J[e]},te={};te[ee("toStringTag")]="z";var ne="[object z]"===String(te),re={exports:{}},ae=!F((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),oe={},ie=k,se=function(e){return"object"==typeof e?null!==e:ie(e)},le=se,ce=l.document,ue=le(ce)&&le(ce.createElement),de=function(e){return ue?ce.createElement(e):{}},fe=de,he=!ae&&!F((function(){return 7!=Object.defineProperty(fe("div"),"a",{get:function(){return 7}}).a})),pe=se,ve=function(e){if(pe(e))return e;throw TypeError(String(e)+" is not an object")},me=k,ye=O,ge=q?function(e){return"symbol"==typeof e}:function(e){var t=ye("Symbol");return me(t)&&Object(e)instanceof t},be=function(e){try{return String(e)}catch(e){return"Object"}},we=k,Ee=be,_e=function(e){if(we(e))return e;throw TypeError(Ee(e)+" is not a function")},xe=_e,Se=function(e,t){var n=e[t];return null==n?void 0:xe(n)},Ie=k,ke=se,Te=function(e,t){var n,r;if("string"===t&&Ie(n=e.toString)&&!ke(r=n.call(e)))return r;if(Ie(n=e.valueOf)&&!ke(r=n.call(e)))return r;if("string"!==t&&Ie(n=e.toString)&&!ke(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},Re=se,Ae=ge,Oe=Se,Ce=Te,Ne=ee("toPrimitive"),Le=function(e,t){if(!Re(e)||Ae(e))return e;var n,r=Oe(e,Ne);if(r){if(void 0===t&&(t="default"),n=r.call(e,t),!Re(n)||Ae(n))return n;throw TypeError("Can't convert object to primitive value")}return void 0===t&&(t="number"),Ce(e,t)},Me=Le,Pe=ge,He=function(e){var t=Me(e,"string");return Pe(t)?t:String(t)},De=ae,je=he,Fe=ve,Be=He,Ue=Object.defineProperty;oe.f=De?Ue:function(e,t,n){if(Fe(e),t=Be(t),Fe(n),je)try{return Ue(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var Ve=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},qe=oe,We=Ve,Ye=ae?function(e,t,n){return qe.f(e,t,We(1,n))}:function(e,t,n){return e[t]=n,e},Ge=k,$e=h,ze=Function.toString;Ge($e.inspectSource)||($e.inspectSource=function(e){return ze.call(e)});var Ke,Xe,Je,Qe=$e.inspectSource,Ze=k,et=Qe,tt=l.WeakMap,nt=Ze(tt)&&/native code/.test(et(tt)),rt=c.exports,at=I,ot=rt("keys"),it=function(e){return ot[e]||(ot[e]=at(e))},st={},lt=nt,ct=se,ut=Ye,dt=_,ft=h,ht=it,pt=st,vt=l.WeakMap;if(lt||ft.state){var mt=ft.state||(ft.state=new vt),yt=mt.get,gt=mt.has,bt=mt.set;Ke=function(e,t){if(gt.call(mt,e))throw new TypeError("Object already initialized");return t.facade=e,bt.call(mt,e,t),t},Xe=function(e){return yt.call(mt,e)||{}},Je=function(e){return gt.call(mt,e)}}else{var wt=ht("state");pt[wt]=!0,Ke=function(e,t){if(dt(e,wt))throw new TypeError("Object already initialized");return t.facade=e,ut(e,wt,t),t},Xe=function(e){return dt(e,wt)?e[wt]:{}},Je=function(e){return dt(e,wt)}}var Et={set:Ke,get:Xe,has:Je,enforce:function(e){return Je(e)?Xe(e):Ke(e,{})},getterFor:function(e){return function(t){var n;if(!ct(t)||(n=Xe(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},_t=ae,xt=_,St=Function.prototype,It=_t&&Object.getOwnPropertyDescriptor,kt=xt(St,"name"),Tt={EXISTS:kt,PROPER:kt&&"something"===function(){}.name,CONFIGURABLE:kt&&(!_t||_t&&It(St,"name").configurable)},Rt=l,At=k,Ot=_,Ct=Ye,Nt=d,Lt=Qe,Mt=Tt.CONFIGURABLE,Pt=Et.get,Ht=Et.enforce,Dt=String(String).split("String");(re.exports=function(e,t,n,r){var a,o=!!r&&!!r.unsafe,i=!!r&&!!r.enumerable,s=!!r&&!!r.noTargetGet,l=r&&void 0!==r.name?r.name:t;At(n)&&("Symbol("===String(l).slice(0,7)&&(l="["+String(l).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!Ot(n,"name")||Mt&&n.name!==l)&&Ct(n,"name",l),(a=Ht(n)).source||(a.source=Dt.join("string"==typeof l?l:""))),e!==Rt?(o?!s&&e[t]&&(i=!0):delete e[t],i?e[t]=n:Ct(e,t,n)):i?e[t]=n:Nt(t,n)})(Function.prototype,"toString",(function(){return At(this)&&Pt(this).source||Lt(this)}));var jt={}.toString,Ft=function(e){return jt.call(e).slice(8,-1)},Bt=ne,Ut=k,Vt=Ft,qt=ee("toStringTag"),Wt="Arguments"==Vt(function(){return arguments}()),Yt=Bt?Vt:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),qt))?n:Wt?Vt(t):"Object"==(r=Vt(t))&&Ut(t.callee)?"Arguments":r},Gt=Yt,$t=ne?{}.toString:function(){return"[object "+Gt(this)+"]"},zt=ne,Kt=re.exports,Xt=$t;zt||Kt(Object.prototype,"toString",Xt,{unsafe:!0});var Jt={},Qt={},Zt={}.propertyIsEnumerable,en=Object.getOwnPropertyDescriptor,tn=en&&!Zt.call({1:2},1);Qt.f=tn?function(e){var t=en(this,e);return!!t&&t.enumerable}:Zt;var nn=Ft,rn="".split,an=F((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==nn(e)?rn.call(e,""):Object(e)}:Object,on=an,sn=y,ln=function(e){return on(sn(e))},cn=ae,un=Qt,dn=Ve,fn=ln,hn=He,pn=_,vn=he,mn=Object.getOwnPropertyDescriptor;Jt.f=cn?mn:function(e,t){if(e=fn(e),t=hn(t),vn)try{return mn(e,t)}catch(e){}if(pn(e,t))return dn(!un.f.call(e,t),e[t])};var yn={},gn=Math.ceil,bn=Math.floor,wn=function(e){var t=+e;return t!=t||0===t?0:(t>0?bn:gn)(t)},En=wn,_n=Math.max,xn=Math.min,Sn=function(e,t){var n=En(e);return n<0?_n(n+t,0):xn(n,t)},In=wn,kn=Math.min,Tn=function(e){return e>0?kn(In(e),9007199254740991):0},Rn=Tn,An=function(e){return Rn(e.length)},On=ln,Cn=Sn,Nn=An,Ln=function(e){return function(t,n,r){var a,o=On(t),i=Nn(o),s=Cn(r,i);if(e&&n!=n){for(;i>s;)if((a=o[s++])!=a)return!0}else for(;i>s;s++)if((e||s in o)&&o[s]===n)return e||s||0;return!e&&-1}},Mn={includes:Ln(!0),indexOf:Ln(!1)},Pn=_,Hn=ln,Dn=Mn.indexOf,jn=st,Fn=function(e,t){var n,r=Hn(e),a=0,o=[];for(n in r)!Pn(jn,n)&&Pn(r,n)&&o.push(n);for(;t.length>a;)Pn(r,n=t[a++])&&(~Dn(o,n)||o.push(n));return o},Bn=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Un=Fn,Vn=Bn.concat("length","prototype");yn.f=Object.getOwnPropertyNames||function(e){return Un(e,Vn)};var qn={};qn.f=Object.getOwnPropertySymbols;var Wn=yn,Yn=qn,Gn=ve,$n=O("Reflect","ownKeys")||function(e){var t=Wn.f(Gn(e)),n=Yn.f;return n?t.concat(n(e)):t},zn=_,Kn=$n,Xn=Jt,Jn=oe,Qn=function(e,t){for(var n=Kn(t),r=Jn.f,a=Xn.f,o=0;o<n.length;o++){var i=n[o];zn(e,i)||r(e,i,a(t,i))}},Zn=F,er=k,tr=/#|\.prototype\./,nr=function(e,t){var n=ar[rr(e)];return n==ir||n!=or&&(er(t)?Zn(t):!!t)},rr=nr.normalize=function(e){return String(e).replace(tr,".").toLowerCase()},ar=nr.data={},or=nr.NATIVE="N",ir=nr.POLYFILL="P",sr=nr,lr=l,cr=Jt.f,ur=Ye,dr=re.exports,fr=d,hr=Qn,pr=sr,vr=function(e,t){var n,r,a,o,i,s=e.target,l=e.global,c=e.stat;if(n=l?lr:c?lr[s]||fr(s,{}):(lr[s]||{}).prototype)for(r in t){if(o=t[r],a=e.noTargetGet?(i=cr(n,r))&&i.value:n[r],!pr(l?r:s+(c?".":"#")+r,e.forced)&&void 0!==a){if(typeof o==typeof a)continue;hr(o,a)}(e.sham||a&&a.sham)&&ur(o,"sham",!0),dr(n,r,o,e)}},mr=l.Promise,yr=re.exports,gr=function(e,t,n){for(var r in t)yr(e,r,t[r],n);return e},br=k,wr=function(e){if("object"==typeof e||br(e))return e;throw TypeError("Can't set "+String(e)+" as a prototype")},Er=ve,_r=wr,xr=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return Er(n),_r(r),t?e.call(n,r):n.__proto__=r,n}}():void 0),Sr=oe.f,Ir=_,kr=ee("toStringTag"),Tr=function(e,t,n){e&&!Ir(e=n?e:e.prototype,kr)&&Sr(e,kr,{configurable:!0,value:t})},Rr=O,Ar=oe,Or=ae,Cr=ee("species"),Nr=function(e){var t=Rr(e),n=Ar.f;Or&&t&&!t[Cr]&&n(t,Cr,{configurable:!0,get:function(){return this}})},Lr=function(e,t,n){if(e instanceof t)return e;throw TypeError("Incorrect "+(n?n+" ":"")+"invocation")},Mr={},Pr=Mr,Hr=ee("iterator"),Dr=Array.prototype,jr=function(e){return void 0!==e&&(Pr.Array===e||Dr[Hr]===e)},Fr=_e,Br=function(e,t,n){if(Fr(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,a){return e.call(t,n,r,a)}}return function(){return e.apply(t,arguments)}},Ur=Yt,Vr=Se,qr=Mr,Wr=ee("iterator"),Yr=function(e){if(null!=e)return Vr(e,Wr)||Vr(e,"@@iterator")||qr[Ur(e)]},Gr=_e,$r=ve,zr=Yr,Kr=function(e,t){var n=arguments.length<2?zr(e):t;if(Gr(n))return $r(n.call(e));throw TypeError(String(e)+" is not iterable")},Xr=ve,Jr=Se,Qr=function(e,t,n){var r,a;Xr(e);try{if(!(r=Jr(e,"return"))){if("throw"===t)throw n;return n}r=r.call(e)}catch(e){a=!0,r=e}if("throw"===t)throw n;if(a)throw r;return Xr(r),n},Zr=ve,ea=jr,ta=An,na=Br,ra=Kr,aa=Yr,oa=Qr,ia=function(e,t){this.stopped=e,this.result=t},sa=function(e,t,n){var r,a,o,i,s,l,c,u=n&&n.that,d=!(!n||!n.AS_ENTRIES),f=!(!n||!n.IS_ITERATOR),h=!(!n||!n.INTERRUPTED),p=na(t,u,1+d+h),v=function(e){return r&&oa(r,"normal",e),new ia(!0,e)},m=function(e){return d?(Zr(e),h?p(e[0],e[1],v):p(e[0],e[1])):h?p(e,v):p(e)};if(f)r=e;else{if(!(a=aa(e)))throw TypeError(String(e)+" is not iterable");if(ea(a)){for(o=0,i=ta(e);i>o;o++)if((s=m(e[o]))&&s instanceof ia)return s;return new ia(!1)}r=ra(e,a)}for(l=r.next;!(c=l.call(r)).done;){try{s=m(c.value)}catch(e){oa(r,"throw",e)}if("object"==typeof s&&s&&s instanceof ia)return s}return new ia(!1)},la=ee("iterator"),ca=!1;try{var ua=0,da={next:function(){return{done:!!ua++}},return:function(){ca=!0}};da[la]=function(){return this},Array.from(da,(function(){throw 2}))}catch(e){}var fa,ha,pa,va,ma=function(e,t){if(!t&&!ca)return!1;var n=!1;try{var r={};r[la]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n},ya=F,ga=k,ba=Yt,wa=Qe,Ea=[],_a=O("Reflect","construct"),xa=/^\s*(?:class|function)\b/,Sa=xa.exec,Ia=!xa.exec((function(){})),ka=function(e){if(!ga(e))return!1;try{return _a(Object,Ea,e),!0}catch(e){return!1}},Ta=!_a||ya((function(){var e;return ka(ka.call)||!ka(Object)||!ka((function(){e=!0}))||e}))?function(e){if(!ga(e))return!1;switch(ba(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return Ia||!!Sa.call(xa,wa(e))}:ka,Ra=Ta,Aa=be,Oa=function(e){if(Ra(e))return e;throw TypeError(Aa(e)+" is not a constructor")},Ca=ve,Na=Oa,La=ee("species"),Ma=function(e,t){var n,r=Ca(e).constructor;return void 0===r||null==(n=Ca(r)[La])?t:Na(n)},Pa=O("document","documentElement"),Ha=/(?:ipad|iphone|ipod).*applewebkit/i.test(C),Da="process"==Ft(l.process),ja=l,Fa=k,Ba=F,Ua=Br,Va=Pa,qa=de,Wa=Ha,Ya=Da,Ga=ja.setImmediate,$a=ja.clearImmediate,za=ja.process,Ka=ja.MessageChannel,Xa=ja.Dispatch,Ja=0,Qa={};try{fa=ja.location}catch(e){}var Za=function(e){if(Qa.hasOwnProperty(e)){var t=Qa[e];delete Qa[e],t()}},eo=function(e){return function(){Za(e)}},to=function(e){Za(e.data)},no=function(e){ja.postMessage(String(e),fa.protocol+"//"+fa.host)};Ga&&$a||(Ga=function(e){for(var t=[],n=arguments.length,r=1;n>r;)t.push(arguments[r++]);return Qa[++Ja]=function(){(Fa(e)?e:Function(e)).apply(void 0,t)},ha(Ja),Ja},$a=function(e){delete Qa[e]},Ya?ha=function(e){za.nextTick(eo(e))}:Xa&&Xa.now?ha=function(e){Xa.now(eo(e))}:Ka&&!Wa?(va=(pa=new Ka).port2,pa.port1.onmessage=to,ha=Ua(va.postMessage,va,1)):ja.addEventListener&&Fa(ja.postMessage)&&!ja.importScripts&&fa&&"file:"!==fa.protocol&&!Ba(no)?(ha=no,ja.addEventListener("message",to,!1)):ha="onreadystatechange"in qa("script")?function(e){Va.appendChild(qa("script")).onreadystatechange=function(){Va.removeChild(this),Za(e)}}:function(e){setTimeout(eo(e),0)});var ro,ao,oo,io,so,lo,co,uo,fo={set:Ga,clear:$a},ho=l,po=/ipad|iphone|ipod/i.test(C)&&void 0!==ho.Pebble,vo=/web0s(?!.*chrome)/i.test(C),mo=l,yo=Jt.f,go=fo.set,bo=Ha,wo=po,Eo=vo,_o=Da,xo=mo.MutationObserver||mo.WebKitMutationObserver,So=mo.document,Io=mo.process,ko=mo.Promise,To=yo(mo,"queueMicrotask"),Ro=To&&To.value;Ro||(ro=function(){var e,t;for(_o&&(e=Io.domain)&&e.exit();ao;){t=ao.fn,ao=ao.next;try{t()}catch(e){throw ao?io():oo=void 0,e}}oo=void 0,e&&e.enter()},bo||_o||Eo||!xo||!So?!wo&&ko&&ko.resolve?((co=ko.resolve(void 0)).constructor=ko,uo=co.then,io=function(){uo.call(co,ro)}):io=_o?function(){Io.nextTick(ro)}:function(){go.call(mo,ro)}:(so=!0,lo=So.createTextNode(""),new xo(ro).observe(lo,{characterData:!0}),io=function(){lo.data=so=!so}));var Ao=Ro||function(e){var t={fn:e,next:void 0};oo&&(oo.next=t),ao||(ao=t,io()),oo=t},Oo={},Co=_e,No=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=Co(t),this.reject=Co(n)};Oo.f=function(e){return new No(e)};var Lo,Mo,Po,Ho,Do=ve,jo=se,Fo=Oo,Bo=function(e,t){if(Do(e),jo(t)&&t.constructor===e)return t;var n=Fo.f(e);return(0,n.resolve)(t),n.promise},Uo=l,Vo=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},qo="object"==typeof window,Wo=vr,Yo=l,Go=O,$o=mr,zo=re.exports,Ko=gr,Xo=xr,Jo=Tr,Qo=Nr,Zo=_e,ei=k,ti=se,ni=Lr,ri=Qe,ai=sa,oi=ma,ii=Ma,si=fo.set,li=Ao,ci=Bo,ui=function(e,t){var n=Uo.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))},di=Oo,fi=Vo,hi=Et,pi=sr,vi=qo,mi=Da,yi=j,gi=ee("species"),bi="Promise",wi=hi.get,Ei=hi.set,_i=hi.getterFor(bi),xi=$o&&$o.prototype,Si=$o,Ii=xi,ki=Yo.TypeError,Ti=Yo.document,Ri=Yo.process,Ai=di.f,Oi=Ai,Ci=!!(Ti&&Ti.createEvent&&Yo.dispatchEvent),Ni=ei(Yo.PromiseRejectionEvent),Li=!1,Mi=pi(bi,(function(){var e=ri(Si),t=e!==String(Si);if(!t&&66===yi)return!0;if(yi>=51&&/native code/.test(e))return!1;var n=new Si((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};return(n.constructor={})[gi]=r,!(Li=n.then((function(){}))instanceof r)||!t&&vi&&!Ni})),Pi=Mi||!oi((function(e){Si.all(e).catch((function(){}))})),Hi=function(e){var t;return!(!ti(e)||!ei(t=e.then))&&t},Di=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;li((function(){for(var r=e.value,a=1==e.state,o=0;n.length>o;){var i,s,l,c=n[o++],u=a?c.ok:c.fail,d=c.resolve,f=c.reject,h=c.domain;try{u?(a||(2===e.rejection&&Ui(e),e.rejection=1),!0===u?i=r:(h&&h.enter(),i=u(r),h&&(h.exit(),l=!0)),i===c.promise?f(ki("Promise-chain cycle")):(s=Hi(i))?s.call(i,d,f):d(i)):f(r)}catch(e){h&&!l&&h.exit(),f(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&Fi(e)}))}},ji=function(e,t,n){var r,a;Ci?((r=Ti.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),Yo.dispatchEvent(r)):r={promise:t,reason:n},!Ni&&(a=Yo["on"+e])?a(r):"unhandledrejection"===e&&ui("Unhandled promise rejection",n)},Fi=function(e){si.call(Yo,(function(){var t,n=e.facade,r=e.value;if(Bi(e)&&(t=fi((function(){mi?Ri.emit("unhandledRejection",r,n):ji("unhandledrejection",n,r)})),e.rejection=mi||Bi(e)?2:1,t.error))throw t.value}))},Bi=function(e){return 1!==e.rejection&&!e.parent},Ui=function(e){si.call(Yo,(function(){var t=e.facade;mi?Ri.emit("rejectionHandled",t):ji("rejectionhandled",t,e.value)}))},Vi=function(e,t,n){return function(r){e(t,r,n)}},qi=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,Di(e,!0))},Wi=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw ki("Promise can't be resolved itself");var r=Hi(t);r?li((function(){var n={done:!1};try{r.call(t,Vi(Wi,n,e),Vi(qi,n,e))}catch(t){qi(n,t,e)}})):(e.value=t,e.state=1,Di(e,!1))}catch(t){qi({done:!1},t,e)}}};if(Mi&&(Ii=(Si=function(e){ni(this,Si,bi),Zo(e),Lo.call(this);var t=wi(this);try{e(Vi(Wi,t),Vi(qi,t))}catch(e){qi(t,e)}}).prototype,(Lo=function(e){Ei(this,{type:bi,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=Ko(Ii,{then:function(e,t){var n=_i(this),r=Ai(ii(this,Si));return r.ok=!ei(e)||e,r.fail=ei(t)&&t,r.domain=mi?Ri.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Di(n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),Mo=function(){var e=new Lo,t=wi(e);this.promise=e,this.resolve=Vi(Wi,t),this.reject=Vi(qi,t)},di.f=Ai=function(e){return e===Si||e===Po?new Mo(e):Oi(e)},ei($o)&&xi!==Object.prototype)){Ho=xi.then,Li||(zo(xi,"then",(function(e,t){var n=this;return new Si((function(e,t){Ho.call(n,e,t)})).then(e,t)}),{unsafe:!0}),zo(xi,"catch",Ii.catch,{unsafe:!0}));try{delete xi.constructor}catch(e){}Xo&&Xo(xi,Ii)}Wo({global:!0,wrap:!0,forced:Mi},{Promise:Si}),Jo(Si,bi,!1),Qo(bi),Po=Go(bi),Wo({target:bi,stat:!0,forced:Mi},{reject:function(e){var t=Ai(this);return t.reject.call(void 0,e),t.promise}}),Wo({target:bi,stat:!0,forced:Mi},{resolve:function(e){return ci(this,e)}}),Wo({target:bi,stat:!0,forced:Pi},{all:function(e){var t=this,n=Ai(t),r=n.resolve,a=n.reject,o=fi((function(){var n=Zo(t.resolve),o=[],i=0,s=1;ai(e,(function(e){var l=i++,c=!1;o.push(void 0),s++,n.call(t,e).then((function(e){c||(c=!0,o[l]=e,--s||r(o))}),a)})),--s||r(o)}));return o.error&&a(o.value),n.promise},race:function(e){var t=this,n=Ai(t),r=n.reject,a=fi((function(){var a=Zo(t.resolve);ai(e,(function(e){a.call(t,e).then(n.resolve,r)}))}));return a.error&&r(a.value),n.promise}});var Yi=vr,Gi=mr,$i=F,zi=O,Ki=k,Xi=Ma,Ji=Bo,Qi=re.exports;if(Yi({target:"Promise",proto:!0,real:!0,forced:!!Gi&&$i((function(){Gi.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=Xi(this,zi("Promise")),n=Ki(e);return this.then(n?function(n){return Ji(t,e()).then((function(){return n}))}:e,n?function(n){return Ji(t,e()).then((function(){throw n}))}:e)}}),Ki(Gi)){var Zi=zi("Promise").prototype.finally;Gi.prototype.finally!==Zi&&Qi(Gi.prototype,"finally",Zi,{unsafe:!0})}function es(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ts(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ns(e,t,n){return t&&ts(e.prototype,t),n&&ts(e,n),e}function rs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function as(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&is(e,t)}function os(e){return(os=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function is(e,t){return(is=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ss(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function ls(e,t,n){return(ls=ss()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&is(a,n.prototype),a}).apply(null,arguments)}function cs(e){var t="function"==typeof Map?new Map:void 0;return(cs=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return ls(e,arguments,os(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),is(r,e)})(e)}function us(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ds(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return us(e)}function fs(e){var t=ss();return function(){var n,r=os(e);if(t){var a=os(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ds(this,n)}}function hs(e,t,n){return(hs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=os(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function ps(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||ms(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vs(e){return function(e){if(Array.isArray(e))return ys(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ms(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ms(e,t){if(e){if("string"==typeof e)return ys(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ys(e,t):void 0}}function ys(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gs(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ms(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function bs(e,t){return Ss(e,Es(e,t,"get"))}function ws(e,t,n){return Is(e,Es(e,t,"set"),n),n}function Es(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function _s(e,t,n){return ks(e,t),Ts(n,"get"),Ss(e,n)}function xs(e,t,n,r){return ks(e,t),Ts(n,"set"),Is(e,n,r),r}function Ss(e,t){return t.get?t.get.call(e):t.value}function Is(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}function ks(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}function Ts(e,t){if(void 0===e)throw new TypeError("attempted to "+t+" private static field before its declaration")}function Rs(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function As(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Os(e,t,n){As(e,t),t.set(e,n)}function Cs(e,t){As(e,t),t.add(e)}var Ns=Ft,Ls=Array.isArray||function(e){return"Array"==Ns(e)},Ms=He,Ps=oe,Hs=Ve,Ds=function(e,t,n){var r=Ms(t);r in e?Ps.f(e,r,Hs(0,n)):e[r]=n},js=Ls,Fs=Ta,Bs=se,Us=ee("species"),Vs=function(e){var t;return js(e)&&(t=e.constructor,(Fs(t)&&(t===Array||js(t.prototype))||Bs(t)&&null===(t=t[Us]))&&(t=void 0)),void 0===t?Array:t},qs=function(e,t){return new(Vs(e))(0===t?0:t)},Ws=F,Ys=j,Gs=ee("species"),$s=function(e){return Ys>=51||!Ws((function(){var t=[];return(t.constructor={})[Gs]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},zs=vr,Ks=F,Xs=Ls,Js=se,Qs=b,Zs=An,el=Ds,tl=qs,nl=$s,rl=j,al=ee("isConcatSpreadable"),ol=rl>=51||!Ks((function(){var e=[];return e[al]=!1,e.concat()[0]!==e})),il=nl("concat"),sl=function(e){if(!Js(e))return!1;var t=e[al];return void 0!==t?!!t:Xs(e)};zs({target:"Array",proto:!0,forced:!ol||!il},{concat:function(e){var t,n,r,a,o,i=Qs(this),s=tl(i,0),l=0;for(t=-1,r=arguments.length;t<r;t++)if(sl(o=-1===t?i:arguments[t])){if(l+(a=Zs(o))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<a;n++,l++)n in o&&el(s,l,o[n])}else{if(l>=9007199254740991)throw TypeError("Maximum allowed index exceeded");el(s,l++,o)}return s.length=l,s}});var ll,cl=Fn,ul=Bn,dl=Object.keys||function(e){return cl(e,ul)},fl=oe,hl=ve,pl=dl,vl=ae?Object.defineProperties:function(e,t){hl(e);for(var n,r=pl(t),a=r.length,o=0;a>o;)fl.f(e,n=r[o++],t[n]);return e},ml=ve,yl=vl,gl=Bn,bl=st,wl=Pa,El=de,_l=it("IE_PROTO"),xl=function(){},Sl=function(e){return"<script>"+e+"<\/script>"},Il=function(e){e.write(Sl("")),e.close();var t=e.parentWindow.Object;return e=null,t},kl=function(){try{ll=new ActiveXObject("htmlfile")}catch(e){}var e,t;kl="undefined"!=typeof document?document.domain&&ll?Il(ll):((t=El("iframe")).style.display="none",wl.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(Sl("document.F=Object")),e.close(),e.F):Il(ll);for(var n=gl.length;n--;)delete kl.prototype[gl[n]];return kl()};bl[_l]=!0;var Tl=Object.create||function(e,t){var n;return null!==e?(xl.prototype=ml(e),n=new xl,xl.prototype=null,n[_l]=e):n=kl(),void 0===t?n:yl(n,t)},Rl=Tl,Al=oe,Ol=ee("unscopables"),Cl=Array.prototype;null==Cl[Ol]&&Al.f(Cl,Ol,{configurable:!0,value:Rl(null)});var Nl,Ll,Ml,Pl=function(e){Cl[Ol][e]=!0},Hl=!F((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Dl=_,jl=k,Fl=b,Bl=Hl,Ul=it("IE_PROTO"),Vl=Object.prototype,ql=Bl?Object.getPrototypeOf:function(e){var t=Fl(e);if(Dl(t,Ul))return t[Ul];var n=t.constructor;return jl(n)&&t instanceof n?n.prototype:t instanceof Object?Vl:null},Wl=F,Yl=k,Gl=ql,$l=re.exports,zl=ee("iterator"),Kl=!1;[].keys&&("next"in(Ml=[].keys())?(Ll=Gl(Gl(Ml)))!==Object.prototype&&(Nl=Ll):Kl=!0),(null==Nl||Wl((function(){var e={};return Nl[zl].call(e)!==e})))&&(Nl={}),Yl(Nl[zl])||$l(Nl,zl,(function(){return this}));var Xl={IteratorPrototype:Nl,BUGGY_SAFARI_ITERATORS:Kl},Jl=Xl.IteratorPrototype,Ql=Tl,Zl=Ve,ec=Tr,tc=Mr,nc=function(){return this},rc=function(e,t,n){var r=t+" Iterator";return e.prototype=Ql(Jl,{next:Zl(1,n)}),ec(e,r,!1),tc[r]=nc,e},ac=vr,oc=Tt,ic=k,sc=rc,lc=ql,cc=xr,uc=Tr,dc=Ye,fc=re.exports,hc=Mr,pc=oc.PROPER,vc=oc.CONFIGURABLE,mc=Xl.IteratorPrototype,yc=Xl.BUGGY_SAFARI_ITERATORS,gc=ee("iterator"),bc=function(){return this},wc=function(e,t,n,r,a,o,i){sc(n,t,r);var s,l,c,u=function(e){if(e===a&&v)return v;if(!yc&&e in h)return h[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},d=t+" Iterator",f=!1,h=e.prototype,p=h[gc]||h["@@iterator"]||a&&h[a],v=!yc&&p||u(a),m="Array"==t&&h.entries||p;if(m&&(s=lc(m.call(new e)))!==Object.prototype&&s.next&&(lc(s)!==mc&&(cc?cc(s,mc):ic(s[gc])||fc(s,gc,bc)),uc(s,d,!0)),pc&&"values"==a&&p&&"values"!==p.name&&(vc?dc(h,"name","values"):(f=!0,v=function(){return p.call(this)})),a)if(l={values:u("values"),keys:o?v:u("keys"),entries:u("entries")},i)for(c in l)(yc||f||!(c in h))&&fc(h,c,l[c]);else ac({target:t,proto:!0,forced:yc||f},l);return h[gc]!==v&&fc(h,gc,v,{name:a}),hc[t]=v,l},Ec=ln,_c=Pl,xc=Mr,Sc=Et,Ic=wc,kc=Sc.set,Tc=Sc.getterFor("Array Iterator"),Rc=Ic(Array,"Array",(function(e,t){kc(this,{type:"Array Iterator",target:Ec(e),index:0,kind:t})}),(function(){var e=Tc(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values");xc.Arguments=xc.Array,_c("keys"),_c("values"),_c("entries");var Ac=Yt,Oc=function(e){if("Symbol"===Ac(e))throw TypeError("Cannot convert a Symbol value to a string");return String(e)},Cc=wn,Nc=Oc,Lc=y,Mc=function(e){return function(t,n){var r,a,o=Nc(Lc(t)),i=Cc(n),s=o.length;return i<0||i>=s?e?"":void 0:(r=o.charCodeAt(i))<55296||r>56319||i+1===s||(a=o.charCodeAt(i+1))<56320||a>57343?e?o.charAt(i):r:e?o.slice(i,i+2):a-56320+(r-55296<<10)+65536}},Pc={codeAt:Mc(!1),charAt:Mc(!0)},Hc=Pc.charAt,Dc=Oc,jc=Et,Fc=wc,Bc=jc.set,Uc=jc.getterFor("String Iterator");Fc(String,"String",(function(e){Bc(this,{type:"String Iterator",string:Dc(e),index:0})}),(function(){var e,t=Uc(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=Hc(n,r),t.index+=e.length,{value:e,done:!1})}));var Vc={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},qc=de("span").classList,Wc=qc&&qc.constructor&&qc.constructor.prototype,Yc=Wc===Object.prototype?void 0:Wc,Gc=l,$c=Vc,zc=Yc,Kc=Rc,Xc=Ye,Jc=ee,Qc=Jc("iterator"),Zc=Jc("toStringTag"),eu=Kc.values,tu=function(e,t){if(e){if(e[Qc]!==eu)try{Xc(e,Qc,eu)}catch(t){e[Qc]=eu}if(e[Zc]||Xc(e,Zc,t),$c[t])for(var n in Kc)if(e[n]!==Kc[n])try{Xc(e,n,Kc[n])}catch(t){e[n]=Kc[n]}}};for(var nu in $c)tu(Gc[nu]&&Gc[nu].prototype,nu);tu(zc,"DOMTokenList");var ru=Mn.includes,au=Pl;vr({target:"Array",proto:!0},{includes:function(e){return ru(this,e,arguments.length>1?arguments[1]:void 0)}}),au("includes");var ou=se,iu=Ft,su=ee("match"),lu=function(e){var t;return ou(e)&&(void 0!==(t=e[su])?!!t:"RegExp"==iu(e))},cu=lu,uu=function(e){if(cu(e))throw TypeError("The method doesn't accept regular expressions");return e},du=ee("match"),fu=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[du]=!1,"/./"[e](t)}catch(e){}}return!1},hu=uu,pu=y,vu=Oc;vr({target:"String",proto:!0,forced:!fu("includes")},{includes:function(e){return!!~vu(pu(this)).indexOf(vu(hu(e)),arguments.length>1?arguments[1]:void 0)}});var mu=ve,yu=function(){var e=mu(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},gu={},bu=F,wu=l.RegExp;gu.UNSUPPORTED_Y=bu((function(){var e=wu("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),gu.BROKEN_CARET=bu((function(){var e=wu("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));var Eu=F,_u=l.RegExp,xu=Eu((function(){var e=_u(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)})),Su=F,Iu=l.RegExp,ku=Su((function(){var e=Iu("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")})),Tu=Oc,Ru=yu,Au=gu,Ou=c.exports,Cu=Tl,Nu=Et.get,Lu=xu,Mu=ku,Pu=RegExp.prototype.exec,Hu=Ou("native-string-replace",String.prototype.replace),Du=Pu,ju=function(){var e=/a/,t=/b*/g;return Pu.call(e,"a"),Pu.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),Fu=Au.UNSUPPORTED_Y||Au.BROKEN_CARET,Bu=void 0!==/()??/.exec("")[1];(ju||Bu||Fu||Lu||Mu)&&(Du=function(e){var t,n,r,a,o,i,s,l=this,c=Nu(l),u=Tu(e),d=c.raw;if(d)return d.lastIndex=l.lastIndex,t=Du.call(d,u),l.lastIndex=d.lastIndex,t;var f=c.groups,h=Fu&&l.sticky,p=Ru.call(l),v=l.source,m=0,y=u;if(h&&(-1===(p=p.replace("y","")).indexOf("g")&&(p+="g"),y=u.slice(l.lastIndex),l.lastIndex>0&&(!l.multiline||l.multiline&&"\n"!==u.charAt(l.lastIndex-1))&&(v="(?: "+v+")",y=" "+y,m++),n=new RegExp("^(?:"+v+")",p)),Bu&&(n=new RegExp("^"+v+"$(?!\\s)",p)),ju&&(r=l.lastIndex),a=Pu.call(h?n:l,y),h?a?(a.input=a.input.slice(m),a[0]=a[0].slice(m),a.index=l.lastIndex,l.lastIndex+=a[0].length):l.lastIndex=0:ju&&a&&(l.lastIndex=l.global?a.index+a[0].length:r),Bu&&a&&a.length>1&&Hu.call(a[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(a[o]=void 0)})),a&&f)for(a.groups=i=Cu(null),o=0;o<f.length;o++)i[(s=f[o])[0]]=a[s[1]];return a});var Uu=Du;vr({target:"RegExp",proto:!0,forced:/./.exec!==Uu},{exec:Uu});var Vu=re.exports,qu=Uu,Wu=F,Yu=ee,Gu=Ye,$u=Yu("species"),zu=RegExp.prototype,Ku=function(e,t,n,r){var a=Yu(e),o=!Wu((function(){var t={};return t[a]=function(){return 7},7!=""[e](t)})),i=o&&!Wu((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[$u]=function(){return n},n.flags="",n[a]=/./[a]),n.exec=function(){return t=!0,null},n[a](""),!t}));if(!o||!i||n){var s=/./[a],l=t(a,""[e],(function(e,t,n,r,a){var i=t.exec;return i===qu||i===zu.exec?o&&!a?{done:!0,value:s.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}));Vu(String.prototype,e,l[0]),Vu(zu,a,l[1])}r&&Gu(zu[a],"sham",!0)},Xu=Pc.charAt,Ju=function(e,t,n){return t+(n?Xu(e,t).length:1)},Qu=ve,Zu=k,ed=Ft,td=Uu,nd=function(e,t){var n=e.exec;if(Zu(n)){var r=n.call(e,t);return null!==r&&Qu(r),r}if("RegExp"===ed(e))return td.call(e,t);throw TypeError("RegExp#exec called on incompatible receiver")},rd=Ku,ad=lu,od=ve,id=y,sd=Ma,ld=Ju,cd=Tn,ud=Oc,dd=Se,fd=nd,hd=Uu,pd=F,vd=gu.UNSUPPORTED_Y,md=[].push,yd=Math.min;rd("split",(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=ud(id(this)),a=void 0===n?4294967295:n>>>0;if(0===a)return[];if(void 0===e)return[r];if(!ad(e))return t.call(r,e,a);for(var o,i,s,l=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),u=0,d=new RegExp(e.source,c+"g");(o=hd.call(d,r))&&!((i=d.lastIndex)>u&&(l.push(r.slice(u,o.index)),o.length>1&&o.index<r.length&&md.apply(l,o.slice(1)),s=o[0].length,u=i,l.length>=a));)d.lastIndex===o.index&&d.lastIndex++;return u===r.length?!s&&d.test("")||l.push(""):l.push(r.slice(u)),l.length>a?l.slice(0,a):l}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var a=id(this),o=null==t?void 0:dd(t,e);return o?o.call(t,a,n):r.call(ud(a),t,n)},function(e,a){var o=od(this),i=ud(e),s=n(r,o,i,a,r!==t);if(s.done)return s.value;var l=sd(o,RegExp),c=o.unicode,u=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(vd?"g":"y"),d=new l(vd?"^(?:"+o.source+")":o,u),f=void 0===a?4294967295:a>>>0;if(0===f)return[];if(0===i.length)return null===fd(d,i)?[i]:[];for(var h=0,p=0,v=[];p<i.length;){d.lastIndex=vd?0:p;var m,y=fd(d,vd?i.slice(p):i);if(null===y||(m=yd(cd(d.lastIndex+(vd?p:0)),i.length))===h)p=ld(i,p,c);else{if(v.push(i.slice(h,p)),v.length===f)return v;for(var g=1;g<=y.length-1;g++)if(v.push(y[g]),v.length===f)return v;p=h=m}}return v.push(i.slice(h)),v}]}),!!pd((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),vd);var gd={exports:{}},bd={},wd=ln,Ed=yn.f,_d={}.toString,xd="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];bd.f=function(e){return xd&&"[object Window]"==_d.call(e)?function(e){try{return Ed(e)}catch(e){return xd.slice()}}(e):Ed(wd(e))};var Sd=!F((function(){return Object.isExtensible(Object.preventExtensions({}))})),Id=vr,kd=st,Td=se,Rd=_,Ad=oe.f,Od=yn,Cd=bd,Nd=Sd,Ld=!1,Md=I("meta"),Pd=0,Hd=Object.isExtensible||function(){return!0},Dd=function(e){Ad(e,Md,{value:{objectID:"O"+Pd++,weakData:{}}})},jd=gd.exports={enable:function(){jd.enable=function(){},Ld=!0;var e=Od.f,t=[].splice,n={};n[Md]=1,e(n).length&&(Od.f=function(n){for(var r=e(n),a=0,o=r.length;a<o;a++)if(r[a]===Md){t.call(r,a,1);break}return r},Id({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:Cd.f}))},fastKey:function(e,t){if(!Td(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!Rd(e,Md)){if(!Hd(e))return"F";if(!t)return"E";Dd(e)}return e[Md].objectID},getWeakData:function(e,t){if(!Rd(e,Md)){if(!Hd(e))return!0;if(!t)return!1;Dd(e)}return e[Md].weakData},onFreeze:function(e){return Nd&&Ld&&Hd(e)&&!Rd(e,Md)&&Dd(e),e}};kd[Md]=!0;var Fd=k,Bd=se,Ud=xr,Vd=function(e,t,n){var r,a;return Ud&&Fd(r=t.constructor)&&r!==n&&Bd(a=r.prototype)&&a!==n.prototype&&Ud(e,a),e},qd=vr,Wd=l,Yd=sr,Gd=re.exports,$d=gd.exports,zd=sa,Kd=Lr,Xd=k,Jd=se,Qd=F,Zd=ma,ef=Tr,tf=Vd,nf=function(e,t,n){var r=-1!==e.indexOf("Map"),a=-1!==e.indexOf("Weak"),o=r?"set":"add",i=Wd[e],s=i&&i.prototype,l=i,c={},u=function(e){var t=s[e];Gd(s,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(a&&!Jd(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return a&&!Jd(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(a&&!Jd(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(Yd(e,!Xd(i)||!(a||s.forEach&&!Qd((function(){(new i).entries().next()})))))l=n.getConstructor(t,e,r,o),$d.enable();else if(Yd(e,!0)){var d=new l,f=d[o](a?{}:-0,1)!=d,h=Qd((function(){d.has(1)})),p=Zd((function(e){new i(e)})),v=!a&&Qd((function(){for(var e=new i,t=5;t--;)e[o](t,t);return!e.has(-0)}));p||((l=t((function(t,n){Kd(t,l,e);var a=tf(new i,t,l);return null!=n&&zd(n,a[o],{that:a,AS_ENTRIES:r}),a}))).prototype=s,s.constructor=l),(h||v)&&(u("delete"),u("has"),r&&u("get")),(v||f)&&u(o),a&&s.clear&&delete s.clear}return c[e]=l,qd({global:!0,forced:l!=i},c),ef(l,e),a||n.setStrong(l,e,r),l},rf=oe.f,af=Tl,of=gr,sf=Br,lf=Lr,cf=sa,uf=wc,df=Nr,ff=ae,hf=gd.exports.fastKey,pf=Et.set,vf=Et.getterFor,mf={getConstructor:function(e,t,n,r){var a=e((function(e,o){lf(e,a,t),pf(e,{type:t,index:af(null),first:void 0,last:void 0,size:0}),ff||(e.size=0),null!=o&&cf(o,e[r],{that:e,AS_ENTRIES:n})})),o=vf(t),i=function(e,t,n){var r,a,i=o(e),l=s(e,t);return l?l.value=n:(i.last=l={index:a=hf(t,!0),key:t,value:n,previous:r=i.last,next:void 0,removed:!1},i.first||(i.first=l),r&&(r.next=l),ff?i.size++:e.size++,"F"!==a&&(i.index[a]=l)),e},s=function(e,t){var n,r=o(e),a=hf(t);if("F"!==a)return r.index[a];for(n=r.first;n;n=n.next)if(n.key==t)return n};return of(a.prototype,{clear:function(){for(var e=o(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,ff?e.size=0:this.size=0},delete:function(e){var t=o(this),n=s(this,e);if(n){var r=n.next,a=n.previous;delete t.index[n.index],n.removed=!0,a&&(a.next=r),r&&(r.previous=a),t.first==n&&(t.first=r),t.last==n&&(t.last=a),ff?t.size--:this.size--}return!!n},forEach:function(e){for(var t,n=o(this),r=sf(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!s(this,e)}}),of(a.prototype,n?{get:function(e){var t=s(this,e);return t&&t.value},set:function(e,t){return i(this,0===e?0:e,t)}}:{add:function(e){return i(this,e=0===e?0:e,e)}}),ff&&rf(a.prototype,"size",{get:function(){return o(this).size}}),a},setStrong:function(e,t,n){var r=t+" Iterator",a=vf(t),o=vf(r);uf(e,t,(function(e,t){pf(this,{type:r,target:e,state:a(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),df(t)}};nf("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),mf);var yf=Br,gf=an,bf=b,wf=An,Ef=qs,_f=[].push,xf=function(e){var t=1==e,n=2==e,r=3==e,a=4==e,o=6==e,i=7==e,s=5==e||o;return function(l,c,u,d){for(var f,h,p=bf(l),v=gf(p),m=yf(c,u,3),y=wf(v),g=0,b=d||Ef,w=t?b(l,y):n||i?b(l,0):void 0;y>g;g++)if((s||g in v)&&(h=m(f=v[g],g,p),e))if(t)w[g]=h;else if(h)switch(e){case 3:return!0;case 5:return f;case 6:return g;case 2:_f.call(w,f)}else switch(e){case 4:return!1;case 7:_f.call(w,f)}return o?-1:r||a?a:w}},Sf={forEach:xf(0),map:xf(1),filter:xf(2),some:xf(3),every:xf(4),find:xf(5),findIndex:xf(6),filterReject:xf(7)},If=gr,kf=gd.exports.getWeakData,Tf=ve,Rf=se,Af=Lr,Of=sa,Cf=_,Nf=Et.set,Lf=Et.getterFor,Mf=Sf.find,Pf=Sf.findIndex,Hf=0,Df=function(e){return e.frozen||(e.frozen=new jf)},jf=function(){this.entries=[]},Ff=function(e,t){return Mf(e.entries,(function(e){return e[0]===t}))};jf.prototype={get:function(e){var t=Ff(this,e);if(t)return t[1]},has:function(e){return!!Ff(this,e)},set:function(e,t){var n=Ff(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=Pf(this.entries,(function(t){return t[0]===e}));return~t&&this.entries.splice(t,1),!!~t}};var Bf,Uf={getConstructor:function(e,t,n,r){var a=e((function(e,o){Af(e,a,t),Nf(e,{type:t,id:Hf++,frozen:void 0}),null!=o&&Of(o,e[r],{that:e,AS_ENTRIES:n})})),o=Lf(t),i=function(e,t,n){var r=o(e),a=kf(Tf(t),!0);return!0===a?Df(r).set(t,n):a[r.id]=n,e};return If(a.prototype,{delete:function(e){var t=o(this);if(!Rf(e))return!1;var n=kf(e);return!0===n?Df(t).delete(e):n&&Cf(n,t.id)&&delete n[t.id]},has:function(e){var t=o(this);if(!Rf(e))return!1;var n=kf(e);return!0===n?Df(t).has(e):n&&Cf(n,t.id)}}),If(a.prototype,n?{get:function(e){var t=o(this);if(Rf(e)){var n=kf(e);return!0===n?Df(t).get(e):n?n[t.id]:void 0}},set:function(e,t){return i(this,e,t)}}:{add:function(e){return i(this,e,!0)}}),a}},Vf=l,qf=gr,Wf=gd.exports,Yf=nf,Gf=Uf,$f=se,zf=Et.enforce,Kf=nt,Xf=!Vf.ActiveXObject&&"ActiveXObject"in Vf,Jf=Object.isExtensible,Qf=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},Zf=Yf("WeakMap",Qf,Gf);if(Kf&&Xf){Bf=Gf.getConstructor(Qf,"WeakMap",!0),Wf.enable();var eh=Zf.prototype,th=eh.delete,nh=eh.has,rh=eh.get,ah=eh.set;qf(eh,{delete:function(e){if($f(e)&&!Jf(e)){var t=zf(this);return t.frozen||(t.frozen=new Bf),th.call(this,e)||t.frozen.delete(e)}return th.call(this,e)},has:function(e){if($f(e)&&!Jf(e)){var t=zf(this);return t.frozen||(t.frozen=new Bf),nh.call(this,e)||t.frozen.has(e)}return nh.call(this,e)},get:function(e){if($f(e)&&!Jf(e)){var t=zf(this);return t.frozen||(t.frozen=new Bf),nh.call(this,e)?rh.call(this,e):t.frozen.get(e)}return rh.call(this,e)},set:function(e,t){if($f(e)&&!Jf(e)){var n=zf(this);n.frozen||(n.frozen=new Bf),nh.call(this,e)?ah.call(this,e,t):n.frozen.set(e,t)}else ah.call(this,e,t);return this}})}var oh=new WeakMap,ih=function(){function e(){es(this,e),Os(this,oh,{writable:!0,value:[]})}return ns(e,[{key:"addListener",value:function(e,t,n,r){ws(this,oh,bs(this,oh)||[]);var a="string"==typeof n?function(e,a,o){return t[n](e,a,o,r)}:function(e,a,o){return n.call(t,e,a,o,r)};return bs(this,oh)[e]?bs(this,oh)[e].push(a)-1:(bs(this,oh)[e]=[a],0)}},{key:"removeListener",value:function(e,t){bs(this,oh)[e]&&bs(this,oh)[e][t]?delete bs(this,oh)[e][t]:console.log("trying to remove non-existent event handler, event = "+e+" handle = "+t)}},{key:"destructor",value:function(){ws(this,oh,null)}},{key:"fireEvent",value:function(t,n){if(bs(this,oh))for(var r in bs(this,oh)[t])if(bs(this,oh)[t].hasOwnProperty(r)&&bs(this,oh)[t][r](this,t,arguments[1])===e.STOP_PROPAGATION)break}}]),e}();rs(ih,"STOP_PROPAGATION","STOP_PROPAGATION");var sh=function(e){as(n,e);var t=fs(n);function n(){var e;es(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return rs(us(e=t.call.apply(t,[this].concat(a))),"controller",void 0),e}return ns(n,[{key:"initialise",value:function(){}},{key:"display",value:function(){console.log("got to view display"),this.refreshHeader(),this.body()}},{key:"refreshHeader",value:function(){}},{key:"body",value:function(){}},{key:"card",value:function(e){var t=document.createElement("div");t.id=e.cardId,t.className="card";var n=t.appendChild(document.createElement("div"));n.className="card-header pointer",e.cardHeadingId&&(n.id=e.cardHeadingId),n.setAttribute("data-toggle","collapse"),n.setAttribute("data-target","#".concat(e.cardDescriptionId));var r=n.appendChild(document.createElement("h2"));r.className="mb-0";var a=r.appendChild(document.createElement("button"));if(a.className="btn btn-link".concat(e.collapsed?" collapsed":""),e.headingButtonId&&(a.id=e.headingButtonId),a.type="button",a.setAttribute("data-toggle","collapse"),e.cardDescriptionId&&(a.setAttribute("data-target","#".concat(e.cardDescriptionId)),a.setAttribute("aria-controls",e.cardDescriptionId)),a.setAttribute("aria-expanded",e.collapsed?"false":"true"),a.innerHTML=e.headingHTML,e.headingNonbuttonHTML){var o=r.appendChild(document.createElement("span"));o.style.display="inline-block",o.innerHTML=e.headingNonbuttonHTML}if(e.headingValidationWarningHTML){var i=n.appendChild(document.createElement("div"));i.className="card-invalid-feedback",i.innerHTML="<small>".concat(e.headingValidationWarningHTML,"</small>")}var s=t.appendChild(document.createElement("div"));if(e.cardDescriptionId&&(s.id=e.cardDescriptionId),s.className="collapse".concat(e.collapsed?"":" show"),e.cardHeadingId&&s.setAttribute("aria-labelledby",e.cardHeadingId),s.setAttribute("data-parent","#".concat(e.parentContainerId)),e.dataAttributes)for(var l in e.dataAttributes)e.dataAttributes.hasOwnProperty(l)&&s.setAttribute("data-".concat(l),e.dataAttributes[l]);var c=s.appendChild(document.createElement("div"));return c.className="card-body pl-2 pr-2 pl-md-3 pr-md-3",c.appendChild(e.bodyContentElement),t}}]),n}(ih),lh=function(e){as(n,e);var t=fs(n);function n(){return es(this,n),t.apply(this,arguments)}return ns(n,[{key:"body",value:function(){document.getElementById("body").innerHTML='<h2>Page not found</h2><p><a href="/app/list">Return to the homepage.</a>'}}]),n}(sh),ch=new WeakMap,uh=new WeakMap,dh=function(e){as(n,e);var t=fs(n);function n(){var e;return es(this,n),Os(us(e=t.call(this)),ch,{writable:!0,value:void 0}),Os(us(e),uh,{writable:!0,value:void 0}),rs(us(e),"controllers",[]),rs(us(e),"currentControllerHandle",!1),rs(us(e),"routeHistory",[]),rs(us(e),"occurrences",void 0),rs(us(e),"surveys",void 0),rs(us(e),"currentSurvey",void 0),rs(us(e),"layout",void 0),e.reset(),e}return ns(n,[{key:"reset",value:function(){this.surveys=new Map,this.clearCurrentSurvey()}},{key:"clearCurrentSurvey",value:function(){this.occurrences=new Map,this.currentSurvey=null}},{key:"router",get:function(){return bs(this,ch)},set:function(e){ws(this,ch,e)}},{key:"containerId",set:function(e){var t=document.getElementById(e);if(!t)throw new Error("App container '".concat(e,"' not found."));ws(this,uh,t)}},{key:"container",get:function(){return bs(this,uh)}},{key:"registerController",value:function(e){e.handle=this.controllers.length,this.controllers[this.controllers.length]=e,e.app=this,e.registerRoute(bs(this,ch))}},{key:"initialise",value:function(){var e=this;this.layout.initialise(),bs(this,ch).notFound((function(e){console.log("no route found for '".concat(e,"'")),(new lh).display()})),bs(this,ch).on((function(){console.log("redirecting from '/' to '/list'"),bs(e,ch).pause(),e.clearCurrentSurvey&&e.currentSurvey.isPristine?bs(e,ch).navigate("/list/survey/welcome").resume():bs(e,ch).navigate("/list").resume(),bs(e,ch).resolve()}));var t,n=gs(this.controllers);try{for(n.s();!(t=n.n()).done;){t.value.initialise()}}catch(e){n.e(e)}finally{n.f()}}},{key:"display",value:function(){console.log("App display"),bs(this,ch).resolve()}},{key:"saveRoute",value:function(){var e=bs(this,ch).lastRouteResolved();this.routeHistory.length?this.routeHistory[this.routeHistory.length-1]!==e&&(this.routeHistory[this.routeHistory.length]=e):this.routeHistory[0]=e}},{key:"markAllNotPristine",value:function(){var e,t=gs(this.occurrences);try{for(t.s();!(e=t.n()).done;){e.value[1].isPristine=!1}}catch(e){t.e(e)}finally{t.f()}}},{key:"setLayout",value:function(e){this.layout=e,e.setApp(this)}}]),n}(ih);rs(dh,"EVENT_ADD_SURVEY_USER_REQUEST","useraddsurveyrequest"),rs(dh,"EVENT_RESET_SURVEYS","userresetsurveys");var fh=Tt.PROPER,hh=re.exports,ph=ve,vh=Oc,mh=F,yh=yu,gh=RegExp.prototype,bh=gh.toString,wh=mh((function(){return"/a/b"!=bh.call({source:"a",flags:"b"})})),Eh=fh&&"toString"!=bh.name;(wh||Eh)&&hh(RegExp.prototype,"toString",(function(){var e=ph(this),t=vh(e.source),n=e.flags;return"/"+t+"/"+vh(void 0===n&&e instanceof RegExp&&!("flags"in gh)?yh.call(e):n)}),{unsafe:!0});var _h="\t\n\v\f\r                　\u2028\u2029\ufeff",xh=y,Sh=Oc,Ih="[\t\n\v\f\r                　\u2028\u2029\ufeff]",kh=RegExp("^"+Ih+Ih+"*"),Th=RegExp(Ih+Ih+"*$"),Rh=function(e){return function(t){var n=Sh(xh(t));return 1&e&&(n=n.replace(kh,"")),2&e&&(n=n.replace(Th,"")),n}},Ah={start:Rh(1),end:Rh(2),trim:Rh(3)},Oh=Tt.PROPER,Ch=F,Nh=_h,Lh=function(e){return Ch((function(){return!!Nh[e]()||"​᠎"!=="​᠎"[e]()||Oh&&Nh[e].name!==e}))},Mh=Ah.trim;vr({target:"String",proto:!0,forced:Lh("trim")},{trim:function(){return Mh(this)}});var Ph=b,Hh=Math.floor,Dh="".replace,jh=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Fh=/\$([$&'`]|\d{1,2})/g,Bh=function(e,t,n,r,a,o){var i=n+e.length,s=r.length,l=Fh;return void 0!==a&&(a=Ph(a),l=jh),Dh.call(o,l,(function(o,l){var c;switch(l.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(i);case"<":c=a[l.slice(1,-1)];break;default:var u=+l;if(0===u)return o;if(u>s){var d=Hh(u/10);return 0===d?o:d<=s?void 0===r[d-1]?l.charAt(1):r[d-1]+l.charAt(1):o}c=r[u-1]}return void 0===c?"":c}))},Uh=Ku,Vh=F,qh=ve,Wh=k,Yh=wn,Gh=Tn,$h=Oc,zh=y,Kh=Ju,Xh=Se,Jh=Bh,Qh=nd,Zh=ee("replace"),ep=Math.max,tp=Math.min,np="$0"==="a".replace(/./,"$0"),rp=!!/./[Zh]&&""===/./[Zh]("a","$0");Uh("replace",(function(e,t,n){var r=rp?"$":"$0";return[function(e,n){var r=zh(this),a=null==e?void 0:Xh(e,Zh);return a?a.call(e,r,n):t.call($h(r),e,n)},function(e,a){var o=qh(this),i=$h(e);if("string"==typeof a&&-1===a.indexOf(r)&&-1===a.indexOf("$<")){var s=n(t,o,i,a);if(s.done)return s.value}var l=Wh(a);l||(a=$h(a));var c=o.global;if(c){var u=o.unicode;o.lastIndex=0}for(var d=[];;){var f=Qh(o,i);if(null===f)break;if(d.push(f),!c)break;""===$h(f[0])&&(o.lastIndex=Kh(i,Gh(o.lastIndex),u))}for(var h,p="",v=0,m=0;m<d.length;m++){f=d[m];for(var y=$h(f[0]),g=ep(tp(Yh(f.index),i.length),0),b=[],w=1;w<f.length;w++)b.push(void 0===(h=f[w])?h:String(h));var E=f.groups;if(l){var _=[y].concat(b,g,i);void 0!==E&&_.push(E);var x=$h(a.apply(void 0,_))}else x=Jh(y,i,g,b,E,a);g>=v&&(p+=i.slice(v,g)+x,v=g+y.length)}return p+i.slice(v)}]}),!!Vh((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!np||rp);var ap={exports:{}};
/*!
	    localForage -- Offline Storage, Improved
	    Version 1.10.0
	    https://localforage.github.io/localForage
	    (c) 2013-2017 Mozilla, Apache License 2.0
	*/ap.exports=function e(t,n,r){function a(s,l){if(!n[s]){if(!t[s]){if(!l&&i)return i(s);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[s]={exports:{}};t[s][0].call(u.exports,(function(e){var n=t[s][1][e];return a(n||e)}),u,u.exports,e,t,n,r)}return n[s].exports}for(var o=i,s=0;s<r.length;s++)a(r[s]);return a}({1:[function(e,t,n){(function(e){var n,r,a=e.MutationObserver||e.WebKitMutationObserver;if(a){var o=0,i=new a(u),s=e.document.createTextNode("");i.observe(s,{characterData:!0}),n=function(){s.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var l=new e.MessageChannel;l.port1.onmessage=u,n=function(){l.port2.postMessage(0)}}var c=[];function u(){var e,t;r=!0;for(var n=c.length;n;){for(t=c,c=[],e=-1;++e<n;)t[e]();n=c.length}r=!1}t.exports=function(e){1!==c.push(e)||r||n()}}).call(this,void 0!==o?o:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){var r=e(1);function a(){}var o={},i=["REJECTED"],s=["FULFILLED"],l=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==a&&h(this,e)}function u(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(e,t,n){r((function(){var r;try{r=t(n)}catch(t){return o.reject(e,t)}r===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,r)}))}function f(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function h(e,t){var n=!1;function r(t){n||(n=!0,o.reject(e,t))}function a(t){n||(n=!0,o.resolve(e,t))}var i=p((function(){t(a,r)}));"error"===i.status&&r(i.value)}function p(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}t.exports=c,c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===i)return this;var n=new this.constructor(a);return this.state!==l?d(n,this.state===s?e:t,this.outcome):this.queue.push(new u(n,e,t)),n},u.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){o.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},o.resolve=function(e,t){var n=p(f,t);if("error"===n.status)return o.reject(e,n.value);var r=n.value;if(r)h(e,r);else{e.state=s,e.outcome=t;for(var a=-1,i=e.queue.length;++a<i;)e.queue[a].callFulfilled(t)}return e},o.reject=function(e,t){e.state=i,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},c.resolve=function(e){return e instanceof this?e:o.resolve(new this(a),e)},c.reject=function(e){var t=new this(a);return o.reject(t,e)},c.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var i=new Array(n),s=0,l=-1,c=new this(a);++l<n;)u(e[l],l);return c;function u(e,a){t.resolve(e).then((function(e){i[a]=e,++s!==n||r||(r=!0,o.resolve(c,i))}),(function(e){r||(r=!0,o.reject(c,e))}))}},c.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var i,s=-1,l=new this(a);++s<n;)i=e[s],t.resolve(i).then((function(e){r||(r=!0,o.resolve(l,e))}),(function(e){r||(r=!0,o.reject(l,e))}));return l}},{1:1}],3:[function(e,t,n){(function(t){"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==o?o:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();function o(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(a){if("TypeError"!==a.name)throw a;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var i=Promise;function s(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function l(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function c(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function u(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var d=void 0,f={},h=Object.prototype.toString;function p(e){return"boolean"==typeof d?i.resolve(d):function(e){return new i((function(t){var n=e.transaction("local-forage-detect-blob-support","readwrite"),r=o([""]);n.objectStore("local-forage-detect-blob-support").put(r,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}(e).then((function(e){return d=e}))}function v(e){var t=f[e.name],n={};n.promise=new i((function(e,t){n.resolve=e,n.reject=t})),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then((function(){return n.promise})):t.dbReady=n.promise}function m(e){var t=f[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function y(e,t){var n=f[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function g(e,t){return new i((function(n,r){if(f[e.name]=f[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!t)return n(e.db);v(e),e.db.close()}var o=[e.name];t&&o.push(e.version);var i=a.open.apply(a,o);t&&(i.onupgradeneeded=function(t){var n=i.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore("local-forage-detect-blob-support")}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),i.onerror=function(e){e.preventDefault(),r(i.error)},i.onsuccess=function(){var t=i.result;t.onversionchange=function(e){e.target.close()},n(t),m(e)}}))}function b(e){return g(e,!1)}function w(e){return g(e,!0)}function E(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,a=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),a||n){if(n){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function _(e){return o([function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),a=0;a<t;a++)r[a]=e.charCodeAt(a);return n}(atob(e.data))],{type:e.type})}function x(e){return e&&e.__local_forage_encoded_blob}function S(e){var t=this,n=t._initReady().then((function(){var e=f[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return l(n,e,e),n}function I(e,t,n,r){void 0===r&&(r=1);try{var a=e.db.transaction(e.storeName,t);n(null,a)}catch(a){if(r>0&&(!e.db||"InvalidStateError"===a.name||"NotFoundError"===a.name))return i.resolve().then((function(){if(!e.db||"NotFoundError"===a.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),w(e)})).then((function(){return function(e){v(e);for(var t=f[e.name],n=t.forages,r=0;r<n.length;r++){var a=n[r];a._dbInfo.db&&(a._dbInfo.db.close(),a._dbInfo.db=null)}return e.db=null,b(e).then((function(t){return e.db=t,E(e)?w(e):t})).then((function(r){e.db=t.db=r;for(var a=0;a<n.length;a++)n[a]._dbInfo.db=r})).catch((function(t){throw y(e,t),t}))}(e).then((function(){I(e,t,n,r-1)}))})).catch(n);n(a)}}var k={_driver:"asyncStorage",_initStorage:function(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];var a=f[n.name];a||(a={forages:[],db:null,dbReady:null,deferredOperations:[]},f[n.name]=a),a.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=S);var o=[];function s(){return i.resolve()}for(var l=0;l<a.forages.length;l++){var c=a.forages[l];c!==t&&o.push(c._initReady().catch(s))}var u=a.forages.slice(0);return i.all(o).then((function(){return n.db=a.db,b(n)})).then((function(e){return n.db=e,E(n,t._defaultConfig.version)?w(n):e})).then((function(e){n.db=a.db=e,t._dbInfo=n;for(var r=0;r<u.length;r++){var o=u[r];o!==t&&(o._dbInfo.db=n.db,o._dbInfo.version=n.version)}}))},_support:function(){try{if(!a||!a.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),iterate:function(e,t){var n=this,r=new i((function(t,r){n.ready().then((function(){I(n._dbInfo,"readonly",(function(a,o){if(a)return r(a);try{var i=o.objectStore(n._dbInfo.storeName).openCursor(),s=1;i.onsuccess=function(){var n=i.result;if(n){var r=n.value;x(r)&&(r=_(r));var a=e(r,n.key,s++);void 0!==a?t(a):n.continue()}else t()},i.onerror=function(){r(i.error)}}catch(e){r(e)}}))})).catch(r)}));return s(r,t),r},getItem:function(e,t){var n=this;e=c(e);var r=new i((function(t,r){n.ready().then((function(){I(n._dbInfo,"readonly",(function(a,o){if(a)return r(a);try{var i=o.objectStore(n._dbInfo.storeName).get(e);i.onsuccess=function(){var e=i.result;void 0===e&&(e=null),x(e)&&(e=_(e)),t(e)},i.onerror=function(){r(i.error)}}catch(e){r(e)}}))})).catch(r)}));return s(r,t),r},setItem:function(e,t,n){var r=this;e=c(e);var a=new i((function(n,a){var o;r.ready().then((function(){return o=r._dbInfo,"[object Blob]"===h.call(t)?p(o.db).then((function(e){return e?t:(n=t,new i((function(e,t){var r=new FileReader;r.onerror=t,r.onloadend=function(t){var r=btoa(t.target.result||"");e({__local_forage_encoded_blob:!0,data:r,type:n.type})},r.readAsBinaryString(n)})));var n})):t})).then((function(t){I(r._dbInfo,"readwrite",(function(o,i){if(o)return a(o);try{var s=i.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var l=s.put(t,e);i.oncomplete=function(){void 0===t&&(t=null),n(t)},i.onabort=i.onerror=function(){var e=l.error?l.error:l.transaction.error;a(e)}}catch(e){a(e)}}))})).catch(a)}));return s(a,n),a},removeItem:function(e,t){var n=this;e=c(e);var r=new i((function(t,r){n.ready().then((function(){I(n._dbInfo,"readwrite",(function(a,o){if(a)return r(a);try{var i=o.objectStore(n._dbInfo.storeName).delete(e);o.oncomplete=function(){t()},o.onerror=function(){r(i.error)},o.onabort=function(){var e=i.error?i.error:i.transaction.error;r(e)}}catch(e){r(e)}}))})).catch(r)}));return s(r,t),r},clear:function(e){var t=this,n=new i((function(e,n){t.ready().then((function(){I(t._dbInfo,"readwrite",(function(r,a){if(r)return n(r);try{var o=a.objectStore(t._dbInfo.storeName).clear();a.oncomplete=function(){e()},a.onabort=a.onerror=function(){var e=o.error?o.error:o.transaction.error;n(e)}}catch(e){n(e)}}))})).catch(n)}));return s(n,e),n},length:function(e){var t=this,n=new i((function(e,n){t.ready().then((function(){I(t._dbInfo,"readonly",(function(r,a){if(r)return n(r);try{var o=a.objectStore(t._dbInfo.storeName).count();o.onsuccess=function(){e(o.result)},o.onerror=function(){n(o.error)}}catch(e){n(e)}}))})).catch(n)}));return s(n,e),n},key:function(e,t){var n=this,r=new i((function(t,r){e<0?t(null):n.ready().then((function(){I(n._dbInfo,"readonly",(function(a,o){if(a)return r(a);try{var i=o.objectStore(n._dbInfo.storeName),s=!1,l=i.openKeyCursor();l.onsuccess=function(){var n=l.result;n?0===e||s?t(n.key):(s=!0,n.advance(e)):t(null)},l.onerror=function(){r(l.error)}}catch(e){r(e)}}))})).catch(r)}));return s(r,t),r},keys:function(e){var t=this,n=new i((function(e,n){t.ready().then((function(){I(t._dbInfo,"readonly",(function(r,a){if(r)return n(r);try{var o=a.objectStore(t._dbInfo.storeName).openKeyCursor(),i=[];o.onsuccess=function(){var t=o.result;t?(i.push(t.key),t.continue()):e(i)},o.onerror=function(){n(o.error)}}catch(e){n(e)}}))})).catch(n)}));return s(n,e),n},dropInstance:function(e,t){t=u.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,o=this;if(e.name){var l=e.name===n.name&&o._dbInfo.db,c=l?i.resolve(o._dbInfo.db):b(e).then((function(t){var n=f[e.name],r=n.forages;n.db=t;for(var a=0;a<r.length;a++)r[a]._dbInfo.db=t;return t}));r=e.storeName?c.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;v(e);var r=f[e.name],o=r.forages;t.close();for(var s=0;s<o.length;s++){var l=o[s];l._dbInfo.db=null,l._dbInfo.version=n}return new i((function(t,r){var o=a.open(e.name,n);o.onerror=function(e){o.result.close(),r(e)},o.onupgradeneeded=function(){o.result.deleteObjectStore(e.storeName)},o.onsuccess=function(){var e=o.result;e.close(),t(e)}})).then((function(e){r.db=e;for(var t=0;t<o.length;t++){var n=o[t];n._dbInfo.db=e,m(n._dbInfo)}})).catch((function(t){throw(y(e,t)||i.resolve()).catch((function(){})),t}))}})):c.then((function(t){v(e);var n=f[e.name],r=n.forages;t.close();for(var o=0;o<r.length;o++)r[o]._dbInfo.db=null;return new i((function(t,n){var r=a.deleteDatabase(e.name);r.onerror=function(){var e=r.result;e&&e.close(),n(r.error)},r.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}})).then((function(e){n.db=e;for(var t=0;t<r.length;t++)m(r[t]._dbInfo)})).catch((function(t){throw(y(e,t)||i.resolve()).catch((function(){})),t}))}))}else r=i.reject("Invalid arguments");return s(r,t),r}},T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",R=/^~~local_forage_type~([^~]+)~/,A="__lfsc__:".length,O=A+"arbf".length,C=Object.prototype.toString;function N(e){var t,n,r,a,o,i=.75*e.length,s=e.length,l=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);var c=new ArrayBuffer(i),u=new Uint8Array(c);for(t=0;t<s;t+=4)n=T.indexOf(e[t]),r=T.indexOf(e[t+1]),a=T.indexOf(e[t+2]),o=T.indexOf(e[t+3]),u[l++]=n<<2|r>>4,u[l++]=(15&r)<<4|a>>2,u[l++]=(3&a)<<6|63&o;return c}function L(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=T[n[t]>>2],r+=T[(3&n[t])<<4|n[t+1]>>4],r+=T[(15&n[t+1])<<2|n[t+2]>>6],r+=T[63&n[t+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}var M={serialize:function(e,t){var n="";if(e&&(n=C.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===C.call(e.buffer))){var r,a="__lfsc__:";e instanceof ArrayBuffer?(r=e,a+="arbf"):(r=e.buffer,"[object Int8Array]"===n?a+="si08":"[object Uint8Array]"===n?a+="ui08":"[object Uint8ClampedArray]"===n?a+="uic8":"[object Int16Array]"===n?a+="si16":"[object Uint16Array]"===n?a+="ur16":"[object Int32Array]"===n?a+="si32":"[object Uint32Array]"===n?a+="ui32":"[object Float32Array]"===n?a+="fl32":"[object Float64Array]"===n?a+="fl64":t(new Error("Failed to get type for BinaryArray"))),t(a+L(r))}else if("[object Blob]"===n){var o=new FileReader;o.onload=function(){var n="~~local_forage_type~"+e.type+"~"+L(this.result);t("__lfsc__:blob"+n)},o.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(n){console.error("Couldn't convert value into a JSON string: ",e),t(null,n)}},deserialize:function(e){if("__lfsc__:"!==e.substring(0,A))return JSON.parse(e);var t,n=e.substring(O),r=e.substring(A,O);if("blob"===r&&R.test(n)){var a=n.match(R);t=a[1],n=n.substring(a[0].length)}var i=N(n);switch(r){case"arbf":return i;case"blob":return o([i],{type:t});case"si08":return new Int8Array(i);case"ui08":return new Uint8Array(i);case"uic8":return new Uint8ClampedArray(i);case"si16":return new Int16Array(i);case"ur16":return new Uint16Array(i);case"si32":return new Int32Array(i);case"ui32":return new Uint32Array(i);case"fl32":return new Float32Array(i);case"fl64":return new Float64Array(i);default:throw new Error("Unkown type: "+r)}},stringToBuffer:N,bufferToString:L};function P(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function H(e,t,n,r,a,o){e.executeSql(n,r,a,(function(e,i){i.code===i.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,s){s.rows.length?o(e,i):P(e,t,(function(){e.executeSql(n,r,a,o)}),o)}),o):o(e,i)}),o)}function D(e,t,n,r){var a=this;e=c(e);var o=new i((function(o,i){a.ready().then((function(){void 0===t&&(t=null);var s=t,l=a._dbInfo;l.serializer.serialize(t,(function(t,c){c?i(c):l.db.transaction((function(n){H(n,l,"INSERT OR REPLACE INTO "+l.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){o(s)}),(function(e,t){i(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void o(D.apply(a,[e,s,n,r-1]));i(t)}}))}))})).catch(i)}));return s(o,n),o}function j(e){return new i((function(t,n){e.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,r){for(var a=[],o=0;o<r.rows.length;o++)a.push(r.rows.item(o).name);t({db:e,storeNames:a})}),(function(e,t){n(t)}))}),(function(e){n(e)}))}))}var F={_driver:"webSQLStorage",_initStorage:function(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var a=new i((function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(e){return r(e)}n.db.transaction((function(a){P(a,n,(function(){t._dbInfo=n,e()}),(function(e,t){r(t)}))}),r)}));return n.serializer=M,a},_support:"function"==typeof openDatabase,iterate:function(e,t){var n=this,r=new i((function(t,r){n.ready().then((function(){var a=n._dbInfo;a.db.transaction((function(n){H(n,a,"SELECT * FROM "+a.storeName,[],(function(n,r){for(var o=r.rows,i=o.length,s=0;s<i;s++){var l=o.item(s),c=l.value;if(c&&(c=a.serializer.deserialize(c)),void 0!==(c=e(c,l.key,s+1)))return void t(c)}t()}),(function(e,t){r(t)}))}))})).catch(r)}));return s(r,t),r},getItem:function(e,t){var n=this;e=c(e);var r=new i((function(t,r){n.ready().then((function(){var a=n._dbInfo;a.db.transaction((function(n){H(n,a,"SELECT * FROM "+a.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=a.serializer.deserialize(r)),t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return s(r,t),r},setItem:function(e,t,n){return D.apply(this,[e,t,n,1])},removeItem:function(e,t){var n=this;e=c(e);var r=new i((function(t,r){n.ready().then((function(){var a=n._dbInfo;a.db.transaction((function(n){H(n,a,"DELETE FROM "+a.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){r(t)}))}))})).catch(r)}));return s(r,t),r},clear:function(e){var t=this,n=new i((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){H(t,r,"DELETE FROM "+r.storeName,[],(function(){e()}),(function(e,t){n(t)}))}))})).catch(n)}));return s(n,e),n},length:function(e){var t=this,n=new i((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){H(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(t,n){var r=n.rows.item(0).c;e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return s(n,e),n},key:function(e,t){var n=this,r=new i((function(t,r){n.ready().then((function(){var a=n._dbInfo;a.db.transaction((function(n){H(n,a,"SELECT key FROM "+a.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return s(r,t),r},keys:function(e){var t=this,n=new i((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){H(t,r,"SELECT key FROM "+r.storeName,[],(function(t,n){for(var r=[],a=0;a<n.rows.length;a++)r.push(n.rows.item(a).key);e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return s(n,e),n},dropInstance:function(e,t){t=u.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,a=this;return s(r=e.name?new i((function(t){var r;r=e.name===n.name?a._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:r,storeNames:[e.storeName]}):t(j(r))})).then((function(e){return new i((function(t,n){e.db.transaction((function(r){function a(e){return new i((function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){n(t)}))}))}for(var o=[],s=0,l=e.storeNames.length;s<l;s++)o.push(a(e.storeNames[s]));i.all(o).then((function(){t()})).catch((function(e){n(e)}))}),(function(e){n(e)}))}))})):i.reject("Invalid arguments"),t),r}};function B(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function U(){return!function(){try{return localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1}catch(e){return!0}}()||localStorage.length>0}var V={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var n in e)t[n]=e[n];return t.keyPrefix=B(e,this._defaultConfig),U()?(this._dbInfo=t,t.serializer=M,i.resolve()):i.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(e,t){var n=this,r=n.ready().then((function(){for(var t=n._dbInfo,r=t.keyPrefix,a=r.length,o=localStorage.length,i=1,s=0;s<o;s++){var l=localStorage.key(s);if(0===l.indexOf(r)){var c=localStorage.getItem(l);if(c&&(c=t.serializer.deserialize(c)),void 0!==(c=e(c,l.substring(a),i++)))return c}}}));return s(r,t),r},getItem:function(e,t){var n=this;e=c(e);var r=n.ready().then((function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r}));return s(r,t),r},setItem:function(e,t,n){var r=this;e=c(e);var a=r.ready().then((function(){void 0===t&&(t=null);var n=t;return new i((function(a,o){var i=r._dbInfo;i.serializer.serialize(t,(function(t,r){if(r)o(r);else try{localStorage.setItem(i.keyPrefix+e,t),a(n)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||o(e),o(e)}}))}))}));return s(a,n),a},removeItem:function(e,t){var n=this;e=c(e);var r=n.ready().then((function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return s(r,t),r},clear:function(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}}));return s(n,e),n},length:function(e){var t=this.keys().then((function(e){return e.length}));return s(t,e),t},key:function(e,t){var n=this,r=n.ready().then((function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t}));return s(r,t),r},keys:function(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo,n=localStorage.length,r=[],a=0;a<n;a++){var o=localStorage.key(a);0===o.indexOf(e.keyPrefix)&&r.push(o.substring(e.keyPrefix.length))}return r}));return s(n,e),n},dropInstance:function(e,t){if(t=u.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var r,a=this;return s(r=e.name?new i((function(t){e.storeName?t(B(e,a._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}})):i.reject("Invalid arguments"),t),r}},q=function(e,t){for(var n,r,a=e.length,o=0;o<a;){if((n=e[o])===(r=t)||"number"==typeof n&&"number"==typeof r&&isNaN(n)&&isNaN(r))return!0;o++}return!1},W=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Y={},G={},$={INDEXEDDB:k,WEBSQL:F,LOCALSTORAGE:V},z=[$.INDEXEDDB._driver,$.WEBSQL._driver,$.LOCALSTORAGE._driver],K=["dropInstance"],X=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(K),J={description:"",driver:z.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Q(e,t){e[t]=function(){var n=arguments;return e.ready().then((function(){return e[t].apply(e,n)}))}}function Z(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(W(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var ee=new(function(){function e(t){for(var n in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),$)if($.hasOwnProperty(n)){var r=$[n],a=r._driver;this[n]=a,Y[a]||this.defineDriver(r)}this._defaultConfig=Z({},J),this._config=Z({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":r(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new i((function(t,n){try{var r=e._driver,a=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(a);for(var o=X.concat("_initStorage"),l=0,c=o.length;l<c;l++){var u=o[l];if((!q(K,u)||e[u])&&"function"!=typeof e[u])return void n(a)}!function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=i.reject(t);return s(n,arguments[arguments.length-1]),n}},n=0,r=K.length;n<r;n++){var a=K[n];e[a]||(e[a]=t(a))}}();var d=function(n){Y[r]&&console.info("Redefining LocalForage driver: "+r),Y[r]=e,G[r]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(d,n):d(!!e._support):d(!0)}catch(e){n(e)}}));return l(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=Y[e]?i.resolve(Y[e]):i.reject(new Error("Driver not found."));return l(r,t,n),r},e.prototype.getSerializer=function(e){var t=i.resolve(M);return l(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return l(n,e,e),n},e.prototype.setDriver=function(e,t,n){var r=this;W(e)||(e=[e]);var a=this._getSupportedDrivers(e);function o(){r._config.driver=r.driver()}function s(e){return r._extend(e),o(),r._ready=r._initStorage(r._config),r._ready}var c=null!==this._driverSet?this._driverSet.catch((function(){return i.resolve()})):i.resolve();return this._driverSet=c.then((function(){var e=a[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then((function(e){r._driver=e._driver,o(),r._wrapLibraryMethodsWithReady(),r._initDriver=function(e){return function(){var t=0;return function n(){for(;t<e.length;){var a=e[t];return t++,r._dbInfo=null,r._ready=null,r.getDriver(a).then(s).catch(n)}o();var l=new Error("No available storage method found.");return r._driverSet=i.reject(l),r._driverSet}()}}(a)}))})).catch((function(){o();var e=new Error("No available storage method found.");return r._driverSet=i.reject(e),r._driverSet})),l(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!G[e]},e.prototype._extend=function(e){Z(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var a=e[n];this.supports(a)&&t.push(a)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=X.length;e<t;e++)Q(this,X[e])},e.prototype.createInstance=function(t){return new e(t)},e}());t.exports=ee},{3:3}]},{},[4])(4);var op=ap.exports;function ip(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,ip)}var sp=/^[a-fA-F0-9]{8}-(?:[a-fA-F0-9]{4}-){3}[a-fA-F0-9]{12}$/,lp=function(e){as(n,e);var t=fs(n);function n(){var e;return es(this,n),rs(us(e=t.call(this)),"_id",void 0),rs(us(e),"_savedRemotely",!1),rs(us(e),"_savedLocally",!1),rs(us(e),"deleted",!1),rs(us(e),"createdStamp",void 0),rs(us(e),"modifiedStamp",void 0),rs(us(e),"projectId",void 0),rs(us(e),"isPristine",!1),e.createdStamp=Math.floor(Date.now()/1e3),e}return ns(n,[{key:"unsaved",value:function(){return!(this._savedLocally&&this._savedRemotely)}},{key:"id",get:function(){return this._id||(this._id=ip()),this._id},set:function(e){if(this._id&&e!==this._id)throw new Error("Occurrence id has already been set, when trying to set new id '".concat(e,"'."));this._id=e}},{key:"queuePost",value:function(e){var t=this;return new Promise((function(r,a){var o=function(){return console.log({"posting form data":e}),t.post(e).then(r,a)};n._tasks.push(o),n._tasks.length>1?console.log("Added post request to the queue."):(console.log("No pending tasks, starting post request immediately."),o().finally(n._next))}))}},{key:"post",value:function(e){var t=this;return fetch(this.SAVE_ENDPOINT,{method:"POST",body:e}).then((function(e){return e.ok?e.clone().json().then((function(n){switch(console.log({"returned to client after save":n}),n.saveState){case"SAVED_TO_SERVER":t._savedLocally=!0,t._savedRemotely=!0;break;case"SAVED_LOCALLY":t._savedLocally=!0,t._savedRemotely=!1;break;default:console.log("Unrecognised save state '".concat(n.saveState,"'"))}return t.createdStamp=n.created,t.modifiedStamp=n.modified,e.json()})):(console.log("Save failed, presumably service worker is missing and there is no network connection. Should write to IndexedDb here."),Promise.reject("IndexedDb storage not yet implemented"))}))}},{key:"_parseDescriptor",value:function(e){this._parseAttributes(e.attributes),this._parseSavedState(e.saveState),this.deleted=e.deleted,this.createdStamp=0+e.created,this.modifiedStamp=0+e.modified,this.projectId=0+e.projectId}},{key:"_parseAttributes",value:function(e){Array.isArray(e)?(console.log("Attributes were spuriously represented as an array rather than as an empty object"),this.attributes={}):this.attributes=e}},{key:"_parseSavedState",value:function(e){switch(e){case"SAVED_LOCALLY":this._savedRemotely=!1,this._savedLocally=!0;break;case"SAVED_TO_SERVER":this._savedRemotely=!0,this._savedLocally=!0;break;default:throw new Error("Unrecognised saved state '".concat(e))}}},{key:"touch",value:function(){this.modifiedStamp=Math.floor(Date.now()/1e3),this.isPristine&&(this.isPristine=!1,this.createdStamp=this.modifiedStamp),this._savedLocally=!1,this._savedRemotely=!1}},{key:"evaluateCompletionStatus",value:function(e){var t={},n=!0;for(var r in e)if(e.hasOwnProperty(r)){var a=e[r];t[r]=a.validator?a.validator(r,a,this.attributes):a.field.isValid(r,a,this.attributes),null!==t[r]&&(n=n&&t[r])}return{requiredFieldsPresent:n,validity:t}}}],[{key:"_next",value:function(){if(n._tasks.shift(),n._tasks.length)return console.log("Running the next task."),n._tasks[0]().finally(n._next)}},{key:"retrieveFromLocal",value:function(e,t){return op.getItem("".concat(t.TYPE,".").concat(e)).then((function(n){return n?(t.id=e,t._parseDescriptor(n),t):Promise.reject("Failed to retrieve ".concat(t.TYPE,".").concat(e," locally"))}))}}]),n}(ih);rs(lp,"_tasks",[]);var cp=function(e){as(n,e);var t=fs(n);function n(e){var r;return es(this,n),rs(us(r=t.call(this)),"_value",void 0),rs(us(r),"_fieldEl",void 0),rs(us(r),"label","field label"),rs(us(r),"helpText",""),rs(us(r),"validationMessage",""),rs(us(r),"completion",n.COMPLETION_OPTIONAL),rs(us(r),"parentForm",void 0),rs(us(r),"attributeName",void 0),e&&(e.label&&(r.label=e.label),e.helpText&&(r.helpText=e.helpText),e.validationMessage&&(r.validationMessage=e.validationMessage),e.completion&&(r.completion=e.completion)),r}return ns(n,[{key:"value",get:function(){return this._value},set:function(e){}},{key:"fieldElement",get:function(){return this._fieldEl||this.buildField(),this._fieldEl}},{key:"addField",value:function(){this.parentForm.formElement.appendChild(this.fieldElement)}},{key:"markValidity",value:function(e){}}],[{key:"nextId",get:function(){var e;return"field".concat((xs(n,n,up,1+(e=+_s(n,n,up))),e))}},{key:"cleanRawInput",value:function(e){return e.value.trim().replace(/\s\s+/g," ")}},{key:"cleanRawString",value:function(e){return e.trim().replace(/\s\s+/g," ")}},{key:"isEmpty",value:function(e){return""===e}},{key:"isValid",value:function(e,t,r){return!t.attributes.completion||t.attributes.completion!==n.COMPLETION_COMPULSORY&&t.attributes.completion!==n.COMPLETION_DESIRED?null:!(!r.hasOwnProperty(e)||t.field.isEmpty(r[e]))}},{key:"summarise",value:function(e,t,n){return!t.summary||t.summary.hasOwnProperty("summarise")&&!0!==t.summary.summarise?"":t.field.summariseImpl(e,t,n)}},{key:"summariseImpl",value:function(e,t,n){return""}}]),n}(ih);rs(cp,"COMPLETION_COMPULSORY","compulsory"),rs(cp,"COMPLETION_DESIRED","desired"),rs(cp,"COMPLETION_OPTIONAL","optional");var up={writable:!0,value:1};rs(cp,"EVENT_CHANGE","fieldChange");var dp=new WeakMap,fp=function(e){as(n,e);var t=fs(n);function n(){var e;es(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return Os(us(e=t.call.apply(t,[this].concat(a))),dp,{writable:!0,value:void 0}),rs(us(e),"_formId",void 0),rs(us(e),"_formContentContainer",void 0),rs(us(e),"fields",void 0),rs(us(e),"liveValidation",!1),rs(us(e),"isValid",null),e}return ns(n,[{key:"formElement",get:function(){var e,t=this;bs(this,dp)||(ws(this,dp,document.createElement("form")),bs(this,dp).id=this._formId="form".concat((xs(n,n,hp,1+(e=+_s(n,n,hp))),e)),bs(this,dp).noValidate=!0,this.liveValidation&&(bs(this,dp).className="needs-validation"),this.buildContentContainer(bs(this,dp)),bs(this,dp).addEventListener("change",(function(e){t.changeHandler(e)}),{capture:!1}));return bs(this,dp)}},{key:"buildContentContainer",value:function(e){return this._formContentContainer=e,this._formContentContainer}},{key:"changeHandler",value:function(e){console.log("form change event"),console.log(arguments)}},{key:"destructor",value:function(){hs(os(n.prototype),"destructor",this).call(this),ws(this,dp,null)}},{key:"buildFormFields",value:function(){for(var e in this.initialiseFormFields(),this.fields)if(this.fields.hasOwnProperty(e)){var t=this.fields[e];t.parentForm=this,t.attributeName=e,this._formContentContainer.appendChild(t.fieldElement),t.addListener(cp.EVENT_CHANGE,this,this.changeHandler)}this._formFieldsBuilt=!0}},{key:"conditionallyValidateForm",value:function(){this.liveValidation&&this.validateForm()}},{key:"validateForm",value:function(){this.liveValidation=!0,this.formElement.classList.add("needs-validation");var e=this.model.evaluateCompletionStatus(this.getFormSectionProperties());for(var t in this.fields){if(this.fields.hasOwnProperty(t))this.fields[t].markValidity(e.validity[t])}return this.isValid!==e.requiredFieldsPresent&&(this.isValid=e.requiredFieldsPresent,this.fireEvent(n.EVENT_VALIDATION_STATE_CHANGE,this.isValid)),e.requiredFieldsPresent}},{key:"populateFormContent",value:function(){if(this._formFieldsBuilt){var e=this.model;for(var t in this.fields){if(this.fields.hasOwnProperty(t))this.fields[t].value=e.attributes[t]}this.conditionallyValidateForm()}}}],[{key:"nextId",get:function(){var e;return"id".concat((xs(n,n,pp,1+(e=+_s(n,n,pp))),e))}}]),n}(ih),hp={writable:!0,value:0};rs(fp,"EVENT_VALIDATION_STATE_CHANGE","validationstatechange");var pp={writable:!0,value:0};rs(fp,"COMPLETION_STATUS_UNSTARTED","unstarted"),rs(fp,"COMPLETION_STATUS_COMPLETE","complete"),rs(fp,"COMPLETION_STATUS_IN_PROGRESS","inProgress");var vp=new WeakMap,mp=function(e){as(n,e);var t=fs(n);function n(e){var r;return es(this,n),Os(us(r=t.call(this)),vp,{writable:!0,value:void 0}),rs(us(r),"_formFieldsBuilt",!1),rs(us(r),"section",void 0),r.section=e,r}return ns(n,[{key:"formElement",get:function(){var e=hs(os(n.prototype),"formElement",this);return this._formFieldsBuilt||this.buildFormFields(),e}},{key:"updateModelFromContent",value:function(){for(var e in console.log("updating survey from NyphSurveyForm content"),this.fields)if(this.fields.hasOwnProperty(e)){var t=this.fields[e];bs(this,vp).attributes[e]=t.value}console.log({survey:bs(this,vp)})}},{key:"model",get:function(){return bs(this,vp)},set:function(e){ws(this,vp,e),this.populateFormContent()}},{key:"changeHandler",value:function(e){console.log("survey form change event"),console.log({event:e}),this.fireEvent(n.CHANGE_EVENT,{form:this})}},{key:"destructor",value:function(){hs(os(n.prototype),"destructor",this).call(this),ws(this,vp,null)}},{key:"initialiseFormFields",value:function(){var e=this.section.properties;for(var t in this.fields={},e)e.hasOwnProperty(t)&&(this.fields[t]=new e[t].field(e[t].attributes))}},{key:"getFormSectionProperties",value:function(){return this.section.properties}}],[{key:"registerSection",value:function(e){n.sections[e.sectionSortOrder]=e,n.sectionsByKey[e.sectionNavigationKey]=e}}]),n}(fp);function yp(e){try{var t=document.createElement("textarea");return t.innerHTML=e,t.innerHTML.replace(/"/g,"&quot;")}catch(t){var n=document.createElement("pre");return n.appendChild(document.createTextNode(e)),n.innerHTML.replace(/"/g,"&quot;")}}rs(mp,"sections",[]),rs(mp,"sectionsByKey",{}),mp.CHANGE_EVENT="change";var gp=function(e){as(n,e);var t=fs(n);function n(){var e;es(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return rs(us(e=t.call.apply(t,[this].concat(a))),"SAVE_ENDPOINT","/savesurvey.php"),rs(us(e),"TYPE","survey"),rs(us(e),"attributes",{}),e}return ns(n,[{key:"formChangedHandler",value:function(e,t,r){console.log("Survey change handler invoked."),r.form.updateModelFromContent(),r.form.conditionallyValidateForm(),this.touch(),this.fireEvent(n.EVENT_MODIFIED,{surveyId:this.id})}},{key:"registerForm",value:function(e){e.model=this,e.addListener(mp.CHANGE_EVENT,this,this.formChangedHandler)}},{key:"save",value:function(){if(this._savedRemotely)return Promise.reject("".concat(this.id," has already been saved."));var e=new FormData;return e.append("type",this.TYPE),e.append("surveyId",this.id),e.append("projectId",this.projectId.toString()),e.append("attributes",JSON.stringify(this.attributes)),e.append("deleted",this.deleted.toString()),e.append("created",this.createdStamp.toString()),console.log("queueing survey post"),this.queuePost(e)}},{key:"generateSurveyName",value:function(){var e,t=(this.attributes.place||this.attributes.georef||"(unlocalised)").trim(),n=new Date(1e3*this.createdStamp);try{e=n.toLocaleString("default",{year:"numeric",month:"long",day:"numeric"})}catch(t){e=n.toLocaleString("en-GB",{year:"numeric",month:"long",day:"numeric"})}return"".concat(yp(t)," ").concat(e)}}]),n}(lp);rs(gp,"EVENT_MODIFIED","modified");var bp=function(e){as(n,e);var t=fs(n);function n(){return es(this,n),t.apply(this,arguments)}return n}(cs(Error)),wp=function(){function e(){es(this,e),rs(this,"id",void 0),rs(this,"nameString",""),rs(this,"canonical",""),rs(this,"hybridCanonical",""),rs(this,"acceptedEntityId",""),rs(this,"qualifier",""),rs(this,"authority",""),rs(this,"vernacular",""),rs(this,"vernacularRoot",""),rs(this,"used",void 0),rs(this,"sortOrder",void 0),rs(this,"parentIds",[])}return ns(e,[{key:"formattedHTML",value:function(t){var n;return this.id!==this.acceptedEntityId&&(n=e.fromId(this.acceptedEntityId)),e.showVernacular?t?n?"<q><b>".concat(yp(this.vernacular),'</b></q> <span class="italictaxon">').concat(this.nameString).concat(this.qualifier?" <b>".concat(this.qualifier,"</b>"):"",'</span> <span class="taxauthority">').concat(yp(this.authority),"</span>")+' = <span class="italictaxon">'.concat(n.nameString).concat(n.qualifier?" <b>".concat(n.qualifier,"</b>"):"",'</span> <span class="taxauthority">').concat(yp(n.authority),"</span>"):"<q><b>".concat(yp(this.vernacular),'</b></q> <span class="italictaxon">').concat(this.nameString).concat(this.qualifier?" <b>".concat(this.qualifier,"</b>"):"",'</span> <span class="taxauthority">').concat(yp(this.authority),"</span>"):n?'<span class="italictaxon">'.concat(this.nameString).concat(this.qualifier?" <b>".concat(this.qualifier,"</b>"):"",'</span> <span class="taxauthority">').concat(this.authority,"</span>").concat(this.vernacular?" <q><b>".concat(yp(this.vernacular),"</b></q>"):"",' = <span class="italictaxon">').concat(n.nameString).concat(n.qualifier?" <b>".concat(n.qualifier,"</b>"):"",'</span> <span class="taxauthority">').concat(yp(n.authority),"</span>"):'<span class="italictaxon">'.concat(this.nameString).concat(this.qualifier?" <b>".concat(this.qualifier,"</b>"):"",'</span> <span class="taxauthority">').concat(yp(this.authority),"</span>").concat(this.vernacular?" <q><b>".concat(yp(this.vernacular),"</b></q>"):""):n?'<span class="italictaxon">'.concat(this.nameString).concat(this.qualifier?" <b>".concat(this.qualifier,"</b>"):"",'</span> <span class="taxauthority">').concat(this.authority,"</span>")+' = <span class="italictaxon">'.concat(n.nameString).concat(n.qualifier?" <b>".concat(n.qualifier,"</b>"):"",'</span> <span class="taxauthority">').concat(yp(n.authority),"</span>"):'<span class="italictaxon">'.concat(this.nameString).concat(this.qualifier?" <b>".concat(this.qualifier,"</b>"):"",'</span> <span class="taxauthority">').concat(yp(this.authority),"</span>")}}],[{key:"fromId",value:function(t){if(!e.rawTaxa){if(!r.default.TaxonNames)throw new bp("Taxon.fromId() called before taxon list has loaded.");e.rawTaxa=r.default.TaxonNames}if(!e.rawTaxa.hasOwnProperty(t))throw new bp("Taxon id '".concat(t,"' not found."));var n=e.rawTaxa[t],a=new e;return a.id=t,a.nameString=n[0],a.canonical=n[1]||n[0],a.hybridCanonical=n[2]||a.canonical,a.acceptedEntityId=n[3]||t,a.qualifier=n[4],a.authority=n[5],a.vernacular=n[6],a.vernacularRoot=n[7],a.used=n[8],a.sortOrder=n[9],a.parentIds=n[10],a}}]),e}();rs(wp,"rawTaxa",r.default.TaxonNames),rs(wp,"showVernacular",!0);var Ep=vr,_p=Ah.start,xp=Lh("trimStart"),Sp=xp?function(){return _p(this)}:"".trimStart;Ep({target:"String",proto:!0,name:"trimStart",forced:xp},{trimStart:Sp,trimLeft:Sp});var Ip=F,kp=function(e,t){var n=[][e];return!!n&&Ip((function(){n.call(null,t||function(){throw 1},1)}))},Tp=vr,Rp=ln,Ap=[].join,Op=an!=Object,Cp=kp("join",",");Tp({target:"Array",proto:!0,forced:Op||!Cp},{join:function(e){return Ap.call(Rp(this),void 0===e?",":e)}});var Np=vr,Lp=Sf.find,Mp=Pl,Pp=!0;"find"in[]&&Array(1).find((function(){Pp=!1})),Np({target:"Array",proto:!0,forced:Pp},{find:function(e){return Lp(this,e,arguments.length>1?arguments[1]:void 0)}}),Mp("find"),nf("WeakSet",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),Uf);var Hp=ve,Dp=Tn,jp=Oc,Fp=y,Bp=Se,Up=Ju,Vp=nd;Ku("match",(function(e,t,n){return[function(t){var n=Fp(this),r=null==t?void 0:Bp(t,e);return r?r.call(t,n):new RegExp(t)[e](jp(n))},function(e){var r=Hp(this),a=jp(e),o=n(t,r,a);if(o.done)return o.value;if(!r.global)return Vp(r,a);var i=r.unicode;r.lastIndex=0;for(var s,l=[],c=0;null!==(s=Vp(r,a));){var u=jp(s[0]);l[c]=u,""===u&&(r.lastIndex=Up(a,Dp(r.lastIndex),i)),c++}return 0===c?null:l}]}));var qp=ae,Wp=l,Yp=sr,Gp=Vd,$p=Ye,zp=oe.f,Kp=yn.f,Xp=lu,Jp=Oc,Qp=yu,Zp=gu,ev=re.exports,tv=F,nv=_,rv=Et.enforce,av=Nr,ov=xu,iv=ku,sv=ee("match"),lv=Wp.RegExp,cv=lv.prototype,uv=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,dv=/a/g,fv=/a/g,hv=new lv(dv)!==dv,pv=Zp.UNSUPPORTED_Y,vv=qp&&(!hv||pv||ov||iv||tv((function(){return fv[sv]=!1,lv(dv)!=dv||lv(fv)==fv||"/a/i"!=lv(dv,"i")})));if(Yp("RegExp",vv)){for(var mv=function(e,t){var n,r,a,o,i,s,l=this instanceof mv,c=Xp(e),u=void 0===t,d=[],f=e;if(!l&&c&&u&&e.constructor===mv)return e;if((c||e instanceof mv)&&(e=e.source,u&&(t="flags"in f?f.flags:Qp.call(f))),e=void 0===e?"":Jp(e),t=void 0===t?"":Jp(t),f=e,ov&&"dotAll"in dv&&(r=!!t&&t.indexOf("s")>-1)&&(t=t.replace(/s/g,"")),n=t,pv&&"sticky"in dv&&(a=!!t&&t.indexOf("y")>-1)&&(t=t.replace(/y/g,"")),iv&&(e=(o=function(e){for(var t,n=e.length,r=0,a="",o=[],i={},s=!1,l=!1,c=0,u="";r<=n;r++){if("\\"===(t=e.charAt(r)))t+=e.charAt(++r);else if("]"===t)s=!1;else if(!s)switch(!0){case"["===t:s=!0;break;case"("===t:uv.test(e.slice(r+1))&&(r+=2,l=!0),a+=t,c++;continue;case">"===t&&l:if(""===u||nv(i,u))throw new SyntaxError("Invalid capture group name");i[u]=!0,o.push([u,c]),l=!1,u="";continue}l?u+=t:a+=t}return[a,o]}(e))[0],d=o[1]),i=Gp(lv(e,t),l?this:cv,mv),(r||a||d.length)&&(s=rv(i),r&&(s.dotAll=!0,s.raw=mv(function(e){for(var t,n=e.length,r=0,a="",o=!1;r<=n;r++)"\\"!==(t=e.charAt(r))?o||"."!==t?("["===t?o=!0:"]"===t&&(o=!1),a+=t):a+="[\\s\\S]":a+=t+e.charAt(++r);return a}(e),n)),a&&(s.sticky=!0),d.length&&(s.groups=d)),e!==f)try{$p(i,"source",""===f?"(?:)":f)}catch(e){}return i},yv=function(e){e in mv||zp(mv,e,{configurable:!0,get:function(){return lv[e]},set:function(t){lv[e]=t}})},gv=Kp(lv),bv=0;gv.length>bv;)yv(gv[bv++]);cv.constructor=mv,mv.prototype=cv,ev(Wp,"RegExp",mv)}av("RegExp");var wv=Math.floor,Ev=function(e,t){var n=e.length,r=wv(n/2);return n<8?_v(e,t):xv(Ev(e.slice(0,r),t),Ev(e.slice(r),t),t)},_v=function(e,t){for(var n,r,a=e.length,o=1;o<a;){for(r=o,n=e[o];r&&t(e[r-1],n)>0;)e[r]=e[--r];r!==o++&&(e[r]=n)}return e},xv=function(e,t,n){for(var r=e.length,a=t.length,o=0,i=0,s=[];o<r||i<a;)o<r&&i<a?s.push(n(e[o],t[i])<=0?e[o++]:t[i++]):s.push(o<r?e[o++]:t[i++]);return s},Sv=Ev,Iv=C.match(/firefox\/(\d+)/i),kv=!!Iv&&+Iv[1],Tv=/MSIE|Trident/.test(C),Rv=C.match(/AppleWebKit\/(\d+)\./),Av=!!Rv&&+Rv[1],Ov=vr,Cv=_e,Nv=b,Lv=An,Mv=Oc,Pv=F,Hv=Sv,Dv=kp,jv=kv,Fv=Tv,Bv=j,Uv=Av,Vv=[],qv=Vv.sort,Wv=Pv((function(){Vv.sort(void 0)})),Yv=Pv((function(){Vv.sort(null)})),Gv=Dv("sort"),$v=!Pv((function(){if(Bv)return Bv<70;if(!(jv&&jv>3)){if(Fv)return!0;if(Uv)return Uv<603;var e,t,n,r,a="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)Vv.push({k:t+r,v:n})}for(Vv.sort((function(e,t){return t.v-e.v})),r=0;r<Vv.length;r++)t=Vv[r].k.charAt(0),a.charAt(a.length-1)!==t&&(a+=t);return"DGBEFHACIJK"!==a}}));Ov({target:"Array",proto:!0,forced:Wv||!Yv||!Gv||!$v},{sort:function(e){void 0!==e&&Cv(e);var t=Nv(this);if($v)return void 0===e?qv.call(t):qv.call(t,e);var n,r,a=[],o=Lv(t);for(r=0;r<o;r++)r in t&&a.push(t[r]);for(n=(a=Hv(a,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:Mv(t)>Mv(n)?1:-1}}(e))).length,r=0;r<n;)t[r]=a[r++];for(;r<o;)delete t[r++];return t}});var zv=vr,Kv=Ls,Xv=Ta,Jv=se,Qv=Sn,Zv=An,em=ln,tm=Ds,nm=ee,rm=$s("slice"),am=nm("species"),om=[].slice,im=Math.max;zv({target:"Array",proto:!0,forced:!rm},{slice:function(e,t){var n,r,a,o=em(this),i=Zv(o),s=Qv(e,i),l=Qv(void 0===t?i:t,i);if(Kv(o)&&(n=o.constructor,(Xv(n)&&(n===Array||Kv(n.prototype))||Jv(n)&&null===(n=n[am]))&&(n=void 0),n===Array||void 0===n))return om.call(o,s,l);for(r=new(void 0===n?Array:n)(im(l-s,0)),a=0;s<l;s++,a++)s in o&&tm(r,a,o[s]);return r.length=a,r}});var sm=vr,lm=Sn,cm=wn,um=An,dm=b,fm=qs,hm=Ds,pm=$s("splice"),vm=Math.max,mm=Math.min;sm({target:"Array",proto:!0,forced:!pm},{splice:function(e,t){var n,r,a,o,i,s,l=dm(this),c=um(l),u=lm(e,c),d=arguments.length;if(0===d?n=r=0:1===d?(n=0,r=c-u):(n=d-2,r=mm(vm(cm(t),0),c-u)),c+n-r>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(a=fm(l,r),o=0;o<r;o++)(i=u+o)in l&&hm(a,o,l[i]);if(a.length=r,n<r){for(o=u;o<c-r;o++)s=o+n,(i=o+r)in l?l[s]=l[i]:delete l[s];for(o=c;o>c-r+n;o--)delete l[o-1]}else if(n>r)for(o=c-r;o>u;o--)s=o+n-1,(i=o+r-1)in l?l[s]=l[i]:delete l[s];for(o=0;o<n;o++)l[o+u]=arguments[o+2];return l.length=c-r+n,a}});var ym=function(){function e(){if(es(this,e),rs(this,"minimumRankSort",null),rs(this,"requireExtantDDbRecords",!1),rs(this,"skipJunk",!0),!wp.rawTaxa&&(wp.rawTaxa=BsbiDb.TaxonNames,!wp.rawTaxa))throw new Error("Taxon list has failed to load in TaxonSearch")}return ns(e,[{key:"lookup",value:function(t){var n,r,a,o,i=e.normaliseTaxonName(decodeURIComponent(t).trim()),s={},l=/ x\b/.test(i);if(""!==(i=i.replace(/\s+x$/i,""))){var c=i.match(e.abbreviatedGenusRegex);if(c){var u,d;for(o in"X"===c[2]||"x"===c[2]?d=u=new RegExp("^(X\\s|X[a-z]+\\s+)(x )?\\b".concat(e.generate_hybrid_combinations_regex(c[3]),".*"),"i"):(u=new RegExp("^(X )?".concat(e.escapeRegExp(c[2]),"[a-z]+ (x )?.*\\b").concat(e.generate_hybrid_combinations_regex(c[3]),".*"),"i"),d=new RegExp("^(X )?".concat(e.escapeRegExp(c[2]),"[a-z]+ (x )?\\b").concat(e.generate_hybrid_combinations_regex(c[3]),".*"),"i")),wp.rawTaxa)a=0===(r=wp.rawTaxa[o])[e.canonicalColumn]?r[e.nameStringColumn]:r[e.canonicalColumn],(u.test(a)||""!==r[e.hybridCanonicalColumn]&&u.test(r[e.hybridCanonicalColumn]))&&(s[o]={exact:r[e.nameStringColumn]===i,near:d.test(r[e.nameStringColumn])});n=this.compile_results(s,l)}else{var f,h,p=e.escapeRegExp(i);-1!==i.indexOf(" ")?(f="".concat(e.escapeRegExp(i.substr(0,i.indexOf(" ")))," (x )?.*\\b").concat(e.generate_hybrid_combinations_regex(i.substr(i.indexOf(" ")+1)),".*"),h=new RegExp("^(?:Xs+)?".concat(e.escapeRegExp(i.substr(0,i.indexOf(" ")))," (x )?\\b").concat(e.generate_hybrid_combinations_regex(i.substr(i.indexOf(" ")+1)),".*"),"i")):(f="".concat(p,".*"),h=new RegExp("^".concat(p,".*")));var v="^".concat(p,".*"),m=new RegExp("^(?:Xs+)?".concat(f),"i");if(e.showVernacular){var y=new RegExp(v,"i");for(o in wp.rawTaxa)a=0===(r=wp.rawTaxa[o])[e.canonicalColumn]?r[e.nameStringColumn]:r[e.canonicalColumn],m.test(r[e.nameStringColumn])||a!==r[e.nameStringColumn]&&m.test(a)?s[o]={exact:r[e.nameStringColumn]==i,near:h.test(r[e.nameStringColumn])||h.test(a)}:(y.test(r[e.vernacularColumn])||y.test(r[e.vernacularRootColumn]))&&(s[o]={exact:r[e.nameStringColumn]==i,vernacular:!0});if((n=this.compile_results(s,l)).length<5){var g=new RegExp("\\b".concat(p,".*"),"i");for(o in wp.rawTaxa)s.hasOwnProperty(o)||(r=wp.rawTaxa[o],g.test(r[e.nameStringColumn])?s[o]={exact:r[e.nameStringColumn]===i}:(0!==r[e.canonicalColumn]&&g.test(r[e.canonicalColumn])||g.test(r[e.vernacularColumn]))&&(s[o]={exact:r[e.nameStringColumn]===i,vernacular:!0}));n=this.compile_results(s,l)}}else{for(o in wp.rawTaxa)a=0===(r=wp.rawTaxa[o])[e.canonicalColumn]?r[e.nameStringColumn]:r[e.canonicalColumn],(m.test(r[e.nameStringColumn])||a!==r[e.nameStringColumn]&&m.test(a))&&(s[o]={exact:r[e.nameStringColumn]==i});n=this.compile_results(s,l)}}}else n=[];return n}},{key:"compile_results",value:function(t,n){var r=[];for(var a in t)if(t.hasOwnProperty(a)){var o=wp.rawTaxa[a];if((!this.requireExtantDDbRecords||this.requireExtantDDbRecords&&1===o[e.usedColumn])&&(!this.minimumRankSort||this.minimumRankSort>0&&o[e.minRankColumn]>=this.minimumRankSort)){var i=o[e.nameStringColumn]+(o[e.qualifierColumn]?" ".concat(o[e.qualifierColumn]):""),s={entityId:a,vernacular:o[e.vernacularColumn],qname:i,name:i,qualifier:o[e.qualifierColumn],authority:o[e.authorityColumn],uname:o[e.nameStringColumn],vernacularMatched:t[a].hasOwnProperty("vernacular"),exact:t[a].hasOwnProperty("exact")&&t[a].exact,near:t[a].hasOwnProperty("near")&&t[a].near};if(s.formatted=e.formatter(s),o[e.acceptedEntityIdColumn]){var l=wp.rawTaxa[o[e.acceptedEntityIdColumn]];if(!l)throw wp.rawTaxa?new Error("Failed to find taxon for accepted entity id ".concat(o[e.acceptedEntityIdColumn])):new Error("Taxon.rawTaxa set is undefined, when trying to find taxon for accepted entity id ".concat(o[e.acceptedEntityIdColumn]));s.acceptedEntityId=o[e.acceptedEntityIdColumn],s.acceptedNameString=l[e.nameStringColumn],s.acceptedQualifier=l[e.qualifierColumn],s.acceptedAuthority=l[e.authorityColumn]}r.push(s)}}return r.length&&(r.sort((function(e,t){if(e.exact)return t.exact?e.acceptedEntityId?1:0:-1;if(t.exact)return 1;if(e.near){if(!t.near)return-1}else if(t.near)return 1;var r=null!==e.uname.match(/\bx\b/i),a=null!==t.uname.match(/\bx\b/i);if(r)return a?e.uname===t.uname?e.acceptedEntityId?1:0:e.qname<t.qname?-1:1:n?-1:1;if(a)return n?1:-1;if(e.uname===t.uname){if(!e.acceptedEntityId&&!t.acceptedEntityId||e.acceptedEntityId&&t.acceptedEntityId){var o=["s.s.","",null,"s.l.","agg."].indexOf(e.qualifier),i=["s.s.","",null,"s.l.","agg."].indexOf(t.qualifier);return o===i?0:o<i?1:-1}return e.acceptedEntityId?1:-1}return e.uname<t.uname?-1:1})),r.length>e.MAXIMUM_RESULTS&&(r.length=e.MAXIMUM_RESULTS)),r}}],[{key:"formatter",value:function(t){return e.showVernacular?t.vernacularMatched?t.acceptedEntityId?"<q><b>".concat(t.vernacular,'</b></q> <span class="italictaxon">').concat(t.uname).concat(t.qualifier?" <b>".concat(t.qualifier,"</b>"):"",'</span> <span class="taxauthority">').concat(t.authority,"</span>")+' = <span class="italictaxon">'.concat(t.acceptedNameString).concat(t.acceptedQualifier?" <b>".concat(t.acceptedQualifier,"</b>"):"",'</span> <span class="taxauthority">').concat(t.acceptedAuthority,"</span>"):"<q><b>".concat(t.vernacular,'</b></q> <span class="italictaxon">').concat(t.uname).concat(t.qualifier?" <b>".concat(t.qualifier,"</b>"):"",'</span> <span class="taxauthority">').concat(t.authority,"</span>"):t.acceptedEntityId?'<span class="italictaxon">'.concat(t.uname).concat(t.qualifier?" <b>".concat(t.qualifier,"</b>"):"",'</span> <span class="taxauthority">').concat(t.authority,"</span>").concat(t.vernacular?" <q><b>".concat(t.vernacular,"</b></q>"):"",' = <span class="italictaxon">').concat(t.acceptedNameString).concat(t.acceptedQualifier?" <b>".concat(t.acceptedQualifier,"</b>"):"",'</span> <span class="taxauthority">').concat(t.acceptedAuthority,"</span>"):'<span class="italictaxon">'.concat(t.uname).concat(t.qualifier?" <b>".concat(t.qualifier,"</b>"):"",'</span> <span class="taxauthority">').concat(t.authority,"</span>").concat(t.vernacular?" <q><b>".concat(t.vernacular,"</b></q>"):""):t.acceptedEntityId?'<span class="italictaxon">'.concat(t.uname).concat(t.qualifier?" <b>".concat(t.qualifier,"</b>"):"",'</span> <span class="taxauthority">').concat(t.authority,"</span>")+' = <span class="italictaxon">'.concat(t.acceptedNameString).concat(t.acceptedQualifier?" <b>".concat(t.acceptedQualifier,"</b>"):"",'</span> <span class="taxauthority">').concat(t.acceptedAuthority,"</span>"):'<span class="italictaxon">'.concat(t.uname).concat(t.qualifier?" <b>".concat(t.qualifier,"</b>"):"",'</span> <span class="taxauthority">').concat(t.authority,"</span>")}},{key:"normaliseTaxonName",value:function(t){for(var n=0,r=e.taxonRankNameSearchRegex.length;n<r;n++)t=t.replace(e.taxonRankNameSearchRegex[n],e.taxonRankNameReplacement[n]);for(var a=0,o=e.taxonQualifierSearchRegex.length;a<o;a++)t=t.replace(e.taxonQualifierSearchRegex[a],e.taxonQualifierReplacement[a]);return t}},{key:"escapeRegExp",value:function(t){return t.replace(e.cleanRegex,"\\$&")}},{key:"generate_hybrid_combinations_regex",value:function(t){var n=e.escapeRegExp(t).split(/\s+x\s+/i);if(n.length<2)return n[0];var r=[];return function e(t,n){if(0===t.length)r[r.length]=n.join("[a-zA-Z]* x ");else for(var a=t.length-1;a>=0;--a){var o=t.slice(0),i=n.slice(0);i.unshift(o.splice(a,1)[0]),e(o,i)}}(n,[]),"(?:".concat(r.join("|"),")")}}]),e}();rs(ym,"showVernacular",!0),rs(ym,"MIN_SEARCH_LENGTH",2),rs(ym,"MAXIMUM_RESULTS",25),rs(ym,"abbreviatedGenusRegex",/^(X\s+)?([a-z])[.\s]+(.*?)$/i),rs(ym,"nameStringColumn",0),rs(ym,"canonicalColumn",1),rs(ym,"hybridCanonicalColumn",2),rs(ym,"acceptedEntityIdColumn",3),rs(ym,"qualifierColumn",4),rs(ym,"authorityColumn",5),rs(ym,"vernacularColumn",6),rs(ym,"vernacularRootColumn",7),rs(ym,"usedColumn",8),rs(ym,"minRankColumn",9),rs(ym,"taxonRankNameSearchRegex",[/\s+sub-?g(?:en(?:us)?)?[.\s]+/i,/\s+sect(?:ion)?[.\s]+/i,/\s+subsect(?:ion)?[.\s]+/i,/\s+ser(?:ies)?[.\s]+/i,/\s+gp[.\s]+/i,/\s+s(?:ub)?-?sp(?:ecies)?[.\s]+/i,/\s+morphotype\s+/i,/\s+var[.\s]+/i,/\s+cv[.\s]+/i,/\s+n(?:otho)?v(?:ar)?[.\s]+/i,/\s+f[.\s]+|\s+forma?\s+/i,/\s+n(?:otho)?ssp[.\s]+/i]),rs(ym,"taxonRankNameReplacement",[" subg. "," sect. "," subsect. "," ser. "," group "," subsp. "," morph. "," var. "," cv. "," nothovar. "," f. "," nothosubsp. "]),rs(ym,"cleanRankNamesRegex",/\s(subfam\.|subg\.|sect\.|subsect\.|ser\.|subser\.|subsp\.|nothosubsp\.|microsp\.|praesp\.|agsp\.|race|convar\.|nm\.|microgene|f\.|subvar\.|var\.|nothovar\.|cv\.|sublusus|taxon|morph\.|group|sp\.)\s/),rs(ym,"taxonQualifierSearchRegex",[/\s*\(?\bf\s*x\s*m or m\s*x\s*f\)?\s*$/i,/\s*\(?\bm\s*x\s*f or f\s*x\s*m\)?\s*$/i,/\s*\(?\bf\s*x\s*m\)?\s*$/i,/\s*\(?\bm\s*x\s*f\)?\s*$/i,/\s*\(?\bfemale\s*x\s*male\)?\s*$/i,/\s*\(?\bmale\s*x\s*female\)?\s*$/i,/\s*'male'\s*$/i,/\s*'female'\s*$/i,/\b\s*sens\.?\s*lat[.\s]+/i,/\b\s*s\.\s*lat\.?\s*\b/i,/\b\s*s\.?\s*l\.?\s+\b/i,/\b\s*sensu\s*lato\s+\b|\(\s*sensu\s*lato\s*\)/i,/\b\s*sensu\s*stricto\s+\b|\(\s*sensu\s*stricto\s*\)/i,/\b\s*sens\.?\s*strict[.\s]+/i,/\b\s*sens\.?\s*str\.?\s*(?=\))|\b\s*sens\.?\s*str[.\s]+/i,/\b\s*s\.\s*str[.\s]+/i,/\b\s*s\.?\s*s\.?\s+\b/i,/\b\s*sens\.?\s*lat\.?\s*$/i,/\b\s*s\.\s*lat\.?\s*$/i,/\b\s*s\.?\s*l\.?\s*$/i,/\b\s*sensu\s*lato\s*$/i,/\b\s*sensu\s*stricto\s*$/i,/\b\s*sens\.?\s*strict\.?\s*$/i,/\b\s*sens\.?\s*str\.?\s*$/i,/\b\s*s\.\s*str\.?\s*$/i,/\b\s*s\.?\s*s\.?\s*$/i,/\b\s*agg\.?\s*$/i,/\b\s*aggregate\s*$/i,/\b\s*sp\.?\s*cultivar\s*$/i,/\b\s*sp\.?\s*cv\.?\s*$/i,/\b\s*cultivars?\s*$/i,/\b\s*cv\s+$/i,/\b\s*cv$/i,/\b\s*cf\s*$/i,/\b\s*aff\s*$/i,/\b\s*s\.?n\.?\s*$/i,/\b\s*sp\.?\s*nov\.?\s*$/i,/\b\s*auct[.\s]*$/i,/\b\s*ined[.\s]*$/i,/\b\s*nom\.?\snud[.\s]*$/i,/\b\s*p\.p[.\s?]*$/i,/\b\s*spp?\.?[\s?]*$/i,/\b\s*species\s*$/i,/\b\s*spp?\.?\s*\(/i,/\b\s*species\s*\(/i]),rs(ym,"taxonQualifierReplacement",[" "," "," (f x m)"," (m x f)"," (f x m)"," (m x f)"," male"," female"," s.l. "," s.l. "," s.l. "," s.l. "," s.s. "," s.s. "," s.s. "," s.s. "," s.s. "," s.l."," s.l."," s.l."," s.l."," s.s."," s.s."," s.s."," s.s."," s.s."," agg."," agg."," cv. "," cv. "," cv. "," cv. "," cv. "," cf."," aff."," sp.nov."," sp.nov."," auct."," ined."," nom. nud."," pro parte","",""," ("," ("]),rs(ym,"cleanRegex",/[.*+?^${}()|[\]\\]/g);var gm=new WeakMap,bm=new WeakMap,wm=new WeakMap,Em=new WeakMap,_m=new WeakMap,xm=new WeakMap,Sm=new WeakMap,Im=new WeakMap,km=new WeakSet,Tm=function(e){as(n,e);var t=fs(n);function n(e){var r;return es(this,n),Cs(us(r=t.call(this,e)),km),rs(us(r),"taxonSearch",void 0),Os(us(r),gm,{writable:!0,value:void 0}),Os(us(r),bm,{writable:!0,value:void 0}),Os(us(r),wm,{writable:!0,value:void 0}),Os(us(r),Em,{writable:!0,value:void 0}),Os(us(r),_m,{writable:!0,value:null}),Os(us(r),xm,{writable:!0,value:null}),Os(us(r),Sm,{writable:!0,value:null}),rs(us(r),"_lastInputValue",""),Os(us(r),Im,{writable:!0,value:[]}),rs(us(r),"_value",{taxonId:"",taxonName:"",vernacularMatch:!1}),r.taxonSearch=new ym,r}return ns(n,[{key:"value",get:function(){return this._value},set:function(e){var t;e&&e.taxonId?(t=wp.fromId(e.taxonId),this._value={taxonId:t.id,taxonName:e.vernacularMatch?t.vernacular:t.nameString,vernacularMatch:e.vernacularMatch}):this._value={taxonId:"",taxonName:e&&e.taxonName?e.taxonName:"",vernacularMatch:null},this.updateView()}},{key:"updateView",value:function(){this._fieldEl&&(document.getElementById(bs(this,gm)).value=this._value.taxonName,this._lastInputValue=this._value.taxonName)}},{key:"markValidity",value:function(e){var t=document.getElementById(bs(this,gm));null===e?t.classList.remove("is-invalid","is-valid"):(t.classList.remove(e?"is-invalid":"is-valid"),t.classList.add(e?"is-valid":"is-invalid"))}},{key:"buildField",value:function(){var e=document.createElement("div");e.className="form-group",ws(this,Em,e.id=cp.nextId),ws(this,gm,cp.nextId);var t=e.appendChild(document.createElement("label"));t.htmlFor=bs(this,gm),t.textContent=this.label;var n=e.appendChild(document.createElement("div"));n.className="dropdown-wrapper";var r=n.appendChild(document.createElement("input"));if(r.className="form-control dropdown-input",r.id=bs(this,gm),r.autocomplete="off",r.spellcheck=!1,this.validationMessage){var a=n.appendChild(document.createElement("div"));a.className="invalid-feedback",a.innerHTML=this.validationMessage}var o=n.appendChild(document.createElement("div"));(o.className="dropdown-list",ws(this,bm,o.id=cp.nextId),ws(this,wm,cp.nextId),this.helpText)&&(e.appendChild(document.createElement("small")).innerHTML=this.helpText);r.addEventListener("keydown",this.keydownHandler.bind(this)),r.addEventListener("input",this.inputHandler.bind(this)),r.addEventListener("change",this.inputChangeHandler.bind(this)),e.addEventListener("focusin",this.focusHandler.bind(this)),e.addEventListener("focusout",this.blurHandler.bind(this)),o.addEventListener("click",this.dropboxClickHandler.bind(this)),this._fieldEl=e}},{key:"keydownHandler",value:function(e){switch(this._lastInputValue=e.target.value.trimLeft(),e.key){case"Enter":case"ArrowUp":case"ArrowDown":e.preventDefault()}}},{key:"inputHandler",value:function(e){e.target.value.trimLeft()!==this._lastInputValue&&Rs(this,km,Rm).call(this,e.target)}},{key:"keyupHandler",value:function(e){!e.key||1!==e.key.length&&"Backspace"!==e.key&&"Delete"!==e.key||Rs(this,km,Rm).call(this,e.target)}},{key:"focusHandler",value:function(e){console.log("focused");var t=document.getElementById(bs(this,bm));if(!t.classList.contains("dropdown-focused")){var n=document.getElementById(bs(this,gm));Rs(this,km,Rm).call(this,n),t.classList.add("dropdown-focused")}}},{key:"blurHandler",value:function(e){var t=this;bs(this,_m)&&(clearTimeout(bs(this,_m)),ws(this,_m,null)),setTimeout((function(){document.getElementById(bs(t,bm)).classList.remove("dropdown-focused")}),500)}},{key:"refreshSearchResultsList",value:function(){var e=document.getElementById(bs(this,bm));if(bs(this,Im).length){var t,n=[],r=0,a=gs(bs(this,Im));try{for(a.s();!(t=a.n()).done;){var o=t.value;n[n.length]='<a class="list-group-item list-group-item-action" href="#" data-occurrenceId="'.concat(o.entityId,'" data-resultnumber="').concat(r,'">').concat(ym.formatter(o),"</a>"),++r}}catch(e){a.e(e)}finally{a.f()}e.innerHTML='<div class="list-group" id="'.concat(bs(this,wm),'">').concat(n.join(""),"</div>")}else e.innerHTML="";ws(this,Sm,null)}},{key:"dropboxClickHandler",value:function(e){console.log("click handler"),console.log(e);var t=e.target.closest("a");if(console.log(t),bs(this,xm)&&(clearTimeout(bs(this,xm)),ws(this,xm,null),console.log("cleared a pending change event")),t&&t.dataset.occurrenceid){e.preventDefault(),console.log("got target ".concat(t.dataset.occurrenceid));var n=bs(this,Im)[t.dataset.resultnumber];this.value={taxonId:n.entityId,taxonName:n.vernacularMatched?n.vernacular:n.qname,vernacularMatch:n.vernacularMatched},this.fireEvent(cp.EVENT_CHANGE)}}},{key:"inputChangeHandler",value:function(e){var t=this;e.stopPropagation(),console.log("got taxon field input change event"),bs(this,xm)&&clearTimeout(bs(this,xm)),ws(this,xm,setTimeout((function(){console.log("processing taxon field input change event");var e=bs(t,Im).find((function(e){return e.exact}));e?(console.log("exact match"),t.value={taxonId:e.entityId,taxonName:e.vernacularMatched?e.vernacular:e.qname,vernacularMatch:e.vernacularMatched}):(console.log("no match"),t.value={taxonId:"",taxonName:document.getElementById(bs(t,gm)).value.trim(),vernacularMatch:null}),console.log(t._value),t.fireEvent(cp.EVENT_CHANGE)}),500))}}],[{key:"isEmpty",value:function(e){return!e||e&&!e.taxonName}},{key:"cleanRawInput",value:function(e){return e.value.trim().replace(/\s\s+/g," ")}}]),n}(cp);function Rm(e){var t=this,n=cp.cleanRawInput(e);bs(this,_m)&&clearTimeout(bs(this,_m)),n.length>=ym.MIN_SEARCH_LENGTH?ws(this,_m,setTimeout((function(){ws(t,Im,t.taxonSearch.lookup(cp.cleanRawInput(document.getElementById(bs(t,gm))))),console.log(bs(t,Im)),t.refreshSearchResultsList(),ws(t,_m,null)}),Tm.timeoutDelay)):(ws(this,Im,[]),this.refreshSearchResultsList())}rs(Tm,"timeoutDelay",50);var Am=ae,Om=Tt.EXISTS,Cm=oe.f,Nm=Function.prototype,Lm=Nm.toString,Mm=/^\s*function ([^ (]*)/;Am&&!Om&&Cm(Nm,"name",{configurable:!0,get:function(){try{return Lm.call(this).match(Mm)[1]}catch(e){return""}}});var Pm=new WeakMap,Hm=new WeakMap,Dm=function(e){as(n,e);var t=fs(n);function n(e){var r;return es(this,n),Os(us(r=t.call(this,e)),Pm,{writable:!0,value:void 0}),Os(us(r),Hm,{writable:!0,value:void 0}),rs(us(r),"_value",""),rs(us(r),"_autocomplete",""),e&&(e.options&&(r.options=e.options),e.placeholder&&(r.placeholder=e.placeholder),e.autocomplete&&(r._autocomplete=e.autocomplete)),r}return ns(n,[{key:"value",get:function(){return this._value},set:function(e){this._value=void 0===e||null==e?"":e.trim(),this.updateView()}},{key:"updateView",value:function(){this._fieldEl&&(document.getElementById(bs(this,Pm)).value=cp.cleanRawString(this._value))}},{key:"buildField",value:function(){var e=document.createElement("div");e.className="form-group",ws(this,Hm,e.id=cp.nextId),ws(this,Pm,cp.nextId);var t=e.appendChild(document.createElement("label"));t.htmlFor=bs(this,Pm),t.textContent=this.label;var n=e.appendChild(document.createElement("textarea"));(n.className="form-control",n.id=bs(this,Pm),this.helpText)&&(e.appendChild(document.createElement("small")).innerHTML=this.helpText);if(this._autocomplete&&(n.autocomplete=this._autocomplete,"off"===this._autocomplete&&(n.name=ip())),this.validationMessage){var r=e.appendChild(document.createElement("div"));r.className="invalid-feedback",r.innerHTML=this.validationMessage}n.addEventListener("change",this.inputChangeHandler.bind(this)),this._fieldEl=e}},{key:"inputChangeHandler",value:function(e){e.stopPropagation(),console.log("got text area field input change event"),this.value=cp.cleanRawString(document.getElementById(bs(this,Pm)).value),this.fireEvent(cp.EVENT_CHANGE)}}],[{key:"summariseImpl",value:function(e,t,n){return""!==n[e]&&null!==n[e]&&void 0!==n[e]?yp(n[e].trim()):""}}]),n}(cp);function jm(e,t,n){if(n.length>2){var r=n.pop();return"".concat(n.join(e+" ")," ").concat(t," ").concat(r)}return n.join(" ".concat(t," "))}var Fm=new WeakMap,Bm=new WeakMap,Um=new WeakSet,Vm=function(e){as(n,e);var t=fs(n);function n(e){var r;return es(this,n),Cs(us(r=t.call(this,e)),Um),Os(us(r),Fm,{writable:!0,value:void 0}),Os(us(r),Bm,{writable:!0,value:void 0}),rs(us(r),"options",{}),rs(us(r),"includeOtherFreeText",!0),rs(us(r),"_value",{selection:[],other:null}),e&&(e.options&&(r.options=e.options),e.hasOwnProperty("includeOtherFreeText")&&(r.includeOtherFreeText=e.includeOtherFreeText)),r}return ns(n,[{key:"value",get:function(){return this._value},set:function(e){this._value=e||{selection:[],other:null},this.updateView()}},{key:"updateView",value:function(){if(this._fieldEl){var e,t=gs(document.querySelectorAll("".concat(_s(n,n,Wm),"#").concat(bs(this,Fm),' input[type="checkbox"]')));try{for(t.s();!(e=t.n()).done;){var r=e.value,a=r.checked=this._value.selection.includes(r.name);if(r.name===n.KEY_OTHER&&bs(this,Bm)){var o=document.getElementById(bs(this,Bm));o.style.display=a?"block":"none",o.value=null===this._value.other?"":this._value.other.trim()}}}catch(e){t.e(e)}finally{t.f()}}}},{key:"buildField",value:function(){if(!this.options)throw new Error("Options have not been set before call to buildField()");var e=document.createElement(_s(n,n,Wm));e.className="form-group",ws(this,Fm,e.id=cp.nextId);var t=e.appendChild(document.createElement("label"));(t.style.display="block",t.textContent=this.label,this.helpText)&&(e.appendChild(document.createElement("small")).innerHTML=this.helpText);for(var r in this.options)this.options.hasOwnProperty(r)&&Rs(this,Um,qm).call(this,e,r,this.options[r]);if(this.validationMessage){var a=e.appendChild(document.createElement("div"));a.className="invalid-feedback",a.innerHTML=this.validationMessage}e.addEventListener("change",this.inputChangeHandler.bind(this)),this._fieldEl=e}},{key:"inputChangeHandler",value:function(e){e.stopPropagation();var t,r={selection:[],other:null};bs(this,Bm)&&(t=document.getElementById(bs(this,Bm)));var a,o=gs(document.querySelectorAll("".concat(_s(n,n,Wm),"#").concat(bs(this,Fm),' input[type="checkbox"]:checked')));try{for(o.s();!(a=o.n()).done;){var i=a.value;r.selection[r.selection.length]=i.name,i.name===n.KEY_OTHER&&bs(this,Bm)&&(r.other=cp.cleanRawInput(t),!0)}}catch(e){o.e(e)}finally{o.f()}this.value=r,this.fireEvent(cp.EVENT_CHANGE)}}],[{key:"summariseImpl",value:function(e,t,n){var r=t.summary,a=[];if(n[e].selection.length){var o,i=gs(n[e].selection);try{for(i.s();!(o=i.n()).done;){var s=o.value;"other"===s&&n[e].other?a[a.length]="".concat(t.attributes.options[s].summary||t.attributes.options[s].label," (").concat(n[e].other,")"):a[a.length]=t.attributes.options[s].summary||t.attributes.options[s].label}}catch(e){i.e(e)}finally{i.f()}return yp("".concat(r.summaryPrefix," ").concat(jm(",","or",a)))}return""}}]),n}(cp);function qm(e,t,n){var r=e.appendChild(document.createElement("div"));r.className="form-check";var a=r.appendChild(document.createElement("input"));a.type="checkbox",a.className="form-check-input",a.id=cp.nextId,a.name=t;var o=r.appendChild(document.createElement("label"));if(o.htmlFor=a.id,o.className="form-check-label",o.textContent=n.label,Vm.KEY_OTHER===t&&this.includeOtherFreeText){var i=r.appendChild(document.createElement("input"));i.id=ws(this,Bm,cp.nextId),i.className="form-control",i.style.display="none"}}rs(Vm,"KEY_OTHER","other");var Wm={writable:!0,value:"fieldset"},Ym=new WeakMap,Gm=new WeakMap,$m=new WeakMap,zm=new WeakSet,Km=function(e){as(n,e);var t=fs(n);function n(e){var r;return es(this,n),Cs(us(r=t.call(this,e)),zm),Os(us(r),Ym,{writable:!0,value:void 0}),Os(us(r),Gm,{writable:!0,value:void 0}),Os(us(r),$m,{writable:!0,value:void 0}),rs(us(r),"options",{}),rs(us(r),"placeholder",""),rs(us(r),"includeOtherFreeText",!0),rs(us(r),"_value",{selection:[],other:null}),e&&(e.options&&(r.options=e.options),e.hasOwnProperty("includeOtherFreeText")&&(r.includeOtherFreeText=e.includeOtherFreeText),e.placeholder&&(r.placeholder=e.placeholder)),r}return ns(n,[{key:"value",get:function(){return this._value},set:function(e){this._value=e||{selection:[],other:null},this.updateView()}},{key:"markValidity",value:function(e){var t=document.getElementById(bs(this,Gm));null===e?t.classList.remove("is-invalid","is-valid"):(t.classList.remove(e?"is-invalid":"is-valid"),t.classList.add(e?"is-valid":"is-invalid"))}},{key:"updateView",value:function(){if(this._fieldEl){var e,t=gs(document.querySelectorAll("select#".concat(bs(this,Gm)," option")));try{for(t.s();!(e=t.n()).done;){var n=e.value;if(""!==n.value){var r=n.selected=this._value.selection.includes(n.value);if(n.value===Vm.KEY_OTHER&&bs(this,$m)){var a=document.getElementById(bs(this,$m));a.style.display=r?"block":"none",a.value=null===this._value.other?"":this._value.other.trim()}}else n.selected=0===this._value.selection.length}}catch(e){t.e(e)}finally{t.f()}}}},{key:"buildField",value:function(){if(!this.options)throw new Error("Options have not been set before call to buildField()");var e=document.createElement(_s(n,n,Jm));e.className="form-group",ws(this,Ym,e.id=cp.nextId),ws(this,Gm,cp.nextId);var t=e.appendChild(document.createElement("label"));t.htmlFor=bs(this,Gm),t.style.display="block",t.innerHTML=this.label;var r=document.createElement("select");(r.id=bs(this,Gm),r.className="custom-select",this.helpText)&&(e.appendChild(document.createElement("small")).innerHTML=this.helpText);for(var a in this.placeholder&&Rs(this,zm,Xm).call(this,e,r,"",{label:this.placeholder}),this.options)this.options.hasOwnProperty(a)&&Rs(this,zm,Xm).call(this,e,r,a,this.options[a]);if(e.appendChild(r),this.validationMessage){var o=e.appendChild(document.createElement("div"));o.className="invalid-feedback",o.innerHTML=this.validationMessage}e.addEventListener("change",this.inputChangeHandler.bind(this)),this._fieldEl=e}},{key:"inputChangeHandler",value:function(e){e.stopPropagation();var t,n={selection:[],other:null};bs(this,$m)&&(t=document.getElementById(bs(this,$m)));var r,a=gs(document.querySelectorAll("select#".concat(bs(this,Gm)," option:checked")));try{for(a.s();!(r=a.n()).done;){var o=r.value;""!==o.value&&(n.selection[n.selection.length]=o.value,o.name===Vm.KEY_OTHER&&bs(this,$m)&&(n.other=cp.cleanRawInput(t),!0))}}catch(e){a.e(e)}finally{a.f()}this.value=n,this.fireEvent(cp.EVENT_CHANGE)}}],[{key:"isEmpty",value:function(e){return 0===e.selection.length||""===e.selection[0]}},{key:"summariseImpl",value:function(e,t,n){var r=t.summary,a=[];if(n[e].selection.length){var o,i=gs(n[e].selection);try{for(i.s();!(o=i.n()).done;){var s=o.value;"other"===s&&n[e].other?a[a.length]="".concat(t.attributes.options[s].summary||t.attributes.options[s].label," (").concat(n[e].other,")"):a[a.length]=t.attributes.options[s].summary||t.attributes.options[s].label}}catch(e){i.e(e)}finally{i.f()}return yp("".concat(r.summaryPrefix," ").concat(jm(",","or",a)))}return""}}]),n}(cp);function Xm(e,t,n,r){var a=t.appendChild(document.createElement("option"));if(a.value=n,a.innerText=r.label,Vm.KEY_OTHER===n&&this.includeOtherFreeText){var o=e.appendChild(document.createElement("input"));o.id=ws(this,$m,cp.nextId),o.className="form-control"}}var Jm={writable:!0,value:"fieldset"},Qm=function(e){as(n,e);var t=fs(n);function n(){var e;es(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return rs(us(e=t.call.apply(t,[this].concat(a))),"file",void 0),rs(us(e),"TYPE","image"),rs(us(e),"SAVE_ENDPOINT","/saveimage.php"),e}return ns(n,[{key:"getUrl",value:function(){}},{key:"save",value:function(e,t,n){if(this._savedRemotely)return Promise.reject("".concat(this.id," has already been saved."));var r=new FormData;return r.append("type",this.TYPE),r.append("surveyId",e),r.append("occurrenceId",t),r.append("projectId",n.toString()),r.append("imageId",this.id),r.append("image",this.file),r.append("deleted",this.deleted.toString()),console.log("queueing image post, image id ".concat(this.id)),this.queuePost(r)}},{key:"_parseDescriptor",value:function(e){hs(os(n.prototype),"_parseDescriptor",this).call(this,e),this.surveyId=e.surveyId,this.occurrenceId=e.occurrenceId,this.file=e.image}}],[{key:"fromFile",value:function(e){var t=new n;return t.file=e,t}},{key:"placeholder",value:function(e){var t=new n;return t._id=e,n.imageCache.set(e,t),t}},{key:"imageLink",value:function(e,t,n,r){t=t||0,n=n||0;var a="";r.className&&(a+=' class="'.concat(r.className,'"'));var o=t>n?'width="'.concat(t,'"'):'height="'.concat(n,'"');return'<picture><source srcset="/image.php?imageid='.concat(e,'&amp;height=128&amp;format=webp" type="image/webp"><img').concat(a,' src="/image.php?imageid=').concat(e,"&amp;width=").concat(t,"&amp;height=").concat(n,'&amp;format=jpeg" ').concat(o,' alt="photo"></picture>')}}]),n}(lp);rs(Qm,"imageCache",new Map),rs(Qm,"EVENT_MODIFIED","modified");var Zm=new WeakMap,ey=new WeakMap,ty=new WeakMap,ny=new WeakSet,ry=new WeakSet,ay=function(e){as(n,e);var t=fs(n);function n(e){var r;return es(this,n),Cs(us(r=t.call(this,e)),ry),Cs(us(r),ny),Os(us(r),Zm,{writable:!0,value:void 0}),Os(us(r),ey,{writable:!0,value:void 0}),Os(us(r),ty,{writable:!0,value:void 0}),rs(us(r),"parentForm",void 0),rs(us(r),"_value",{images:[]}),rs(us(r),"includeCamera",!0),rs(us(r),"placeholder",""),e&&(e.hasOwnProperty("includeCamera")&&(r.includeCamera=e.includeCamera),e.placeholder&&(r.placeholder=e.placeholder)),r}return ns(n,[{key:"value",get:function(){var e=[];if(this._value&&this._value.images){var t,n=gs(this._value.images);try{for(n.s();!(t=n.n()).done;){var r=t.value;e[e.length]=r.id}}catch(e){n.e(e)}finally{n.f()}}return e},set:function(e){if(this._value={images:[]},e){var t,n=gs(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;Qm.imageCache.has(r)?this._value.images.push(Qm.imageCache.get(r)):(console.log("Creating placeholder image object '".concat(r,"'")),this._value.images.push(Qm.placeholder(r)))}}catch(e){n.e(e)}finally{n.f()}}this.updateView()}},{key:"updateView",value:function(){if(this._fieldEl){var e,t=[],n=gs(this._value.images);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push('<picture style="cursor: pointer;" data-imageid="'.concat(r.id,'"><source srcset="/image.php?imageid=').concat(r.id,'&amp;height=128&amp;format=webp" type="image/webp"><img data-imageid="').concat(r.id,'" src="/image.php?imageid=').concat(r.id,'&amp;height=128&amp;format=jpeg" height="128" alt="photo"></picture>'))}}catch(e){n.e(e)}finally{n.f()}document.getElementById(bs(this,ty)).innerHTML=t.join("\n")}}},{key:"buildField",value:function(){var e=document.createElement("div");e.className="form-group",ws(this,ey,e.id=cp.nextId),ws(this,Zm,cp.nextId);var t=e.appendChild(document.createElement("label"));t.htmlFor=bs(this,Zm),t.textContent=this.label;var n=e.appendChild(document.createElement("div"));n.className="input-group";var r=document.createElement("div");r.className="custom-file",n.appendChild(r);var a=r.appendChild(document.createElement("input"));if(a.type="file",a.className="custom-file-input",a.id=bs(this,Zm),a.accept="image/png, image/jpeg",a.multiple=!0,this.placeholder){var o=r.appendChild(document.createElement("label"));o.className="custom-file-label",o.htmlFor=bs(this,Zm),o.textContent=this.placeholder}if(this.includeCamera){var i=document.createElement("div");i.className="input-group-append";var s=i.appendChild(document.createElement("span"));s.className="input-group-text";var l=s.appendChild(document.createElement("label"));l.className="pl-0 pr-0 ml-0 mr-0 mt-0 mb-0 pt-0 pb-0 material-icons";var c=l.appendChild(document.createElement("i"));c.className="material-icons pl-0 pr-0 ml-0 mr-0 mt-0 mb-0 pt-0 pb-0",c.textContent="add_a_photo";var u=l.appendChild(document.createElement("input"));u.type="file",u.capture="environment",u.accept="image/*",u.style.display="none",u.id=cp.nextId,n.appendChild(i),u.addEventListener("change",this.inputChangeHandler.bind(this,u.id))}this.helpText&&(e.appendChild(document.createElement("small")).innerHTML=this.helpText);var d=e.appendChild(document.createElement("p"));if(ws(this,ty,d.id=cp.nextId),d.addEventListener("click",this.imageClickHandler.bind(this)),this.validationMessage){var f=e.appendChild(document.createElement("div"));f.className="invalid-feedback",f.innerHTML=this.validationMessage}a.addEventListener("change",this.inputChangeHandler.bind(this,a.id)),this._fieldEl=e,this.parentForm.addListener("deleteimage",this,"deleteImageHandler")}},{key:"deleteImageHandler",value:function(e,t,n){var r;for(var a in console.log("delete image ".concat(n)),this._value.images)if(this._value.images.hasOwnProperty(a)&&this._value.images[a].id===n){r=this._value.images.splice(a,1)[0];break}r?(this.updateView(),this.fireEvent(cp.EVENT_CHANGE)):console.log("Failed to find image id ".concat(n))}},{key:"imageClickHandler",value:function(e){var t=e.target.closest("picture");t||(t=e.target.closest("img")),console.log({"clicked image":t});var n=t.getAttribute("data-imageid");n&&(document.getElementById("imagemodal").getElementsByTagName("picture")[0].innerHTML='<source srcset="/image.php?imageid='.concat(n,"&amp;width=").concat(window.innerWidth,'&amp;format=webp" type="image/webp">\n                <img src="/image.php?imageid=').concat(n,"&amp;width=").concat(window.innerWidth,'&amp;format=jpeg" width="auto" style="max-height: 48vh; max-width: 100%;" alt="photo">'),document.getElementById("imagemodaldelete").setAttribute("data-imageid",n),$("#".concat("imagemodal")).modal({}))}},{key:"inputChangeHandler",value:function(e,t){var n=this;t.stopPropagation(),console.log("got image field input change event");var r=document.getElementById(e);r.files.length?Rs(this,ny,oy).call(this,r.files).then((function(){n.fireEvent(cp.EVENT_CHANGE)})):this.fireEvent(cp.EVENT_CHANGE)}}],[{key:"isEmpty",value:function(e){return!e||0===e.length}},{key:"licenseModal",value:function(){var e=document.createElement("div");return e.innerHTML='<div class="modal fade" id="'.concat(n.LICENSE_MODAL,'" tabindex="-1" role="dialog" aria-labelledby="').concat(n.LICENSE_MODAL,'Title" aria-hidden="true">\n  <div class="modal-dialog modal-dialog-centered" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h5 class="modal-title" id="').concat(n.LICENSE_MODAL,'Title">Image licensing</h5>\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n          <span aria-hidden="true">&times;</span>\n        </button>\n      </div>\n      <div class="modal-body">\n        <p>By choosing to submit images with your plant hunt records you agree to license the image under the terms of the Creative Common Attribution 4.0 International license (CC BY 4.0).</p>\n        <p>The following is a summary of (and not a substitute for) the <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank">license</a>.</p>\n        <p>Licensees are free to:</p>\n        <ul class="license-properties">\n<li>\n<strong>Share</strong> — copy and redistribute the material in any medium or format\n</li>\n<li>\n<strong>Adapt</strong> — remix, transform, and build upon the material for any purpose, even commercially.\n</li>\n</ul>\n<p>Licensees are most follow these term:</p>\n<ul>\n<li>\n<p>\n<strong>Attribution</strong> — licensees must give appropriate credit, provide a link to the license, and indicate if changes were made.\n</p>\n</li>\n</ul>\n<p>Full details of the license are here: <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank">CC BY 4.0 license</a></p>\n\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>\n      </div>\n    </div>\n  </div>\n</div>'),e.firstChild}}]),n}(cp);function oy(e){this.parentForm.pingOccurrence();var t,n=[],r=gs(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(Qm.fromFile(a))}}catch(e){r.e(e)}finally{r.f()}return Rs(this,ry,iy).call(this,n)}function iy(e){var t=this;if(e.length){var n=e.shift();return n.save(this.parentForm.surveyId,this.parentForm.occurrenceId,this.parentForm.projectId).then((function(e){console.log("Added image '".concat(n.id,"'")),console.log({jsonDescription:e}),t._value.images.push(n),t.updateView()}),(function(e){console.log("Failed to add image ".concat(n.id)),console.log({"Failure reason":e})})).finally((function(){return Rs(t,ry,iy).call(t,e)}))}return Promise.resolve()}rs(ay,"LICENSE_MODAL","imagelicensemodal");var sy=new WeakMap,ly=function(e){as(n,e);var t=fs(n);function n(e){var r;return es(this,n),Os(us(r=t.call(this)),sy,{writable:!0,value:void 0}),rs(us(r),"_formFieldsBuilt",!1),rs(us(r),"surveyId",""),e&&(r.model=e),r}return ns(n,[{key:"formElement",get:function(){var e=arguments,t=hs(os(n.prototype),"formElement",this);return this._formFieldsBuilt||(this.buildFormFields(),t.addEventListener("change",(function(){console.log("occurrence form change event"),console.log(e)}),{capture:!1})),t}},{key:"buildContentContainer",value:function(e){var t=e.appendChild(document.createElement("div"));t.className="card mt-3 ml-0 mr-0 mb-3";var r=t.appendChild(document.createElement("div"));return r.className="card-header",r.textContent=n.sectionTitle,this._formContentContainer=t.appendChild(document.createElement("div")),this._formContentContainer.className="card-body",this._formContentContainer}},{key:"occurrenceId",get:function(){return bs(this,sy)?bs(this,sy).id:null}},{key:"projectId",get:function(){return bs(this,sy)?bs(this,sy).projectId:null}},{key:"initialiseFormFields",value:function(){var e=n.properties;for(var t in this.fields={},e)e.hasOwnProperty(t)&&(this.fields[t]=new e[t].field(e[t].attributes))}},{key:"updateModelFromContent",value:function(){for(var e in console.log("updating occurrence from NyphOccurrenceForm content"),this.fields)if(this.fields.hasOwnProperty(e)){var t=this.fields[e];bs(this,sy).attributes[e]=t.value}console.log({occurrence:bs(this,sy)})}},{key:"model",get:function(){return bs(this,sy)},set:function(e){ws(this,sy,e),this.populateFormContent()}},{key:"changeHandler",value:function(e){console.log("occurrence form change event"),console.log({event:e}),this.fireEvent(n.CHANGE_EVENT,{form:this})}},{key:"pingOccurrence",value:function(){bs(this,sy).unsaved()&&this.fireEvent(n.CHANGE_EVENT,{form:this})}},{key:"destructor",value:function(){ws(this,sy,null),hs(os(n.prototype),"destructor",this).call(this)}},{key:"getFormSectionProperties",value:function(){return n.properties}}]),n}(fp);rs(ly,"sectionTitle","Details of invasive garden plant"),rs(ly,"help",'\x3c!-- begin: templates/formHelp/recordsHelp.html --\x3e\r\n<p>In this section, please list the ornamental plants that are spreading in your\r\ngarden and are difficult to control.</p>\r\n<p> Many plants in your garden will spread and this is a sign that they are growing well. We only want to know about those that are spreading to an extent that\r\n    you have to control them to prevent them overgrowing other plants or parts of your garden where you do not want them.</p>\r\n<p>Please note in this project we are dealing with ornamental plants only (no vegetables, no weeds -\r\n    unless they are ornamentals that you now regard as weeds).</p>\r\n<div class="card mt-3">\r\n    <div class="card-body">\r\n        <h5 class="card-title">Using the forms</h5>\r\n        <p class="card-text">You can enter as many plant records as you need. To add another record click the \'Add a plant\' button.</p>\r\n        <p class="card-text">If you are currently online then the entries will be saved as you go, automatically. Otherwise the records\r\n            will be remembered on your device, but you will need to click \'<a href="/app/survey/save" data-navigo="survey/save">save all</a>\' (on the Surveys menu) when you have a network connection again.\r\n        </p>\r\n        <p class="card-text">To delete a plant record, find it in the list and click the red \'bin\' icon.\r\n        </p>\r\n    </div>\r\n</div>\r\n<div class="card mt-3">\r\n    <div class="card-body">\r\n        <h5 class="card-title">Identifying your plants</h5>\r\n        </p>\r\n        <h6 class="card-subtitle mb-2 text-muted">Plant names</h6>\r\n        <p class="card-text">If possible, please enter the scientific or common name of the plant, but don\'t worry if you dont know the full details.\r\n            The list of suggested names includes a very wide range of both native and horticultural plants, but if the name you need\r\n            isn\'t on the list then you can still type it in.\r\n        </p>\r\n        <h6 class="card-subtitle mb-2 text-muted">Photos</h6>\r\n        <p class="card-text">Photos of the plant will help us confirm your record. Please provide a picture showing the whole plant, but it will\r\n            also help us if you can provide close-up views of the flowers and leaves.\r\n        </p>\r\n    </div>\r\n</div>\r\n\x3c!-- begin: templates/formHelp/recordsHelp.html --\x3e\r\n'),rs(ly,"properties",{taxon:{field:Tm,attributes:{label:"plant name",validationMessage:"Please specify a taxon name or provide some photos if you cannot identify the plant.",helpText:"Type the common or scientific name of the invasive plant and, if possible, pick a suggestion from the list. If you do not know the name of the plant then please leave this blank and include some photos."},validator:function(e,t,n){return!(!n.hasOwnProperty(e)||t.field.isEmpty(n[e]))||n.hasOwnProperty("images")&&!ay.isEmpty(n.images)}},idConfidence:{field:Km,attributes:{label:"How confident are you about your identification of this plant?",helpText:"",placeholder:"please choose an option",options:{1:{label:"very sure"},2:{label:"not really sure"},3:{label:"could be wrong"}},includeOtherFreeText:!1,completion:cp.COMPLETION_DESIRED}},images:{field:ay,attributes:{label:"Please provide some photos of the plant",placeholder:"photos",helpText:'If the plant is unusual or if you are unsure of its identity then photos will help us check your record.<br><strong>Submitted images remain your property, but you agree to allow us to use the photos under the terms of a <a href="#" title="Creative Commons Attribution" data-toggle="modal" data-target="#'.concat(ay.LICENSE_MODAL,'">CC BY</a> license.</strong>')}},spread:{field:Vm,attributes:{label:"How does the plant spread in your garden?",helpText:"<i>(tick all that apply)</i>",options:{seeds:{label:"seeds"},roots:{label:"roots"},runners:{label:"runners"},bulbs:{label:"bulbs"},unknown:{label:"don't know"},other:{label:"other"}},includeOtherFreeText:!0,completion:cp.COMPLETION_DESIRED},summary:{summaryPrefix:"Spread by"}},control:{field:Vm,attributes:{label:"How do you control this plant?",helpText:"<i>(tick all that apply)</i>",options:{digging:{label:"digging"},pulling:{label:"pulling"},chemical:{label:"chemical"},cutting:{label:"cutting"},mulching:{label:"mulching"},other:{label:"other"}},includeOtherFreeText:!0,completion:cp.COMPLETION_DESIRED},summary:{summaryPrefix:"Controlled by"}},disposal:{field:Vm,attributes:{label:"Please tell us how you dispose of this plant?",helpText:"<i>(tick all that apply)</i>",options:{homecompost:{label:"home composting"},greenwaste:{label:"green waste"},"other waste":{label:"other waste collection"},other:{label:"other"}},includeOtherFreeText:!0,completion:cp.COMPLETION_DESIRED},summary:{summaryPrefix:"Disposal by"}},problemSeverity:{field:Km,attributes:{label:"Which of the following best describes your effort to control the plant?",placeholder:"please select a response",options:{1:{label:"I don't try to control it"},2:{label:"I try to keep it confined to certain areas."},3:{label:"I am trying everything to get rid of it."},4:{label:"I have given up trying to control it."},5:{label:"I have successfully eradicated the plant."}},includeOtherFreeText:!1,completion:cp.COMPLETION_DESIRED},summary:{summaryPrefix:"Severity:"}},source:{field:Vm,attributes:{label:"Please tell us how this plant came into your garden?",helpText:"<i>(tick all that apply)</i>",options:{alreadypresent:{label:"Was already in the garden"},bought:{label:"Bought the plant"},seed:{label:"Grown from seed"},someoneelse:{label:"From someone else's garden"},saleswap:{label:"Non-commercial sale/swap"},spread:{label:"Spread into my garden"},other:{label:"other"}},includeOtherFreeText:!0,completion:cp.COMPLETION_DESIRED},summary:{summaryPrefix:"Source"}},local:{field:Km,attributes:{label:"Is the plant growing locally outside your garden?",placeholder:"please select a response",options:{yes:{label:"yes"},no:{label:"no"},notknown:{label:"I don't know"}},includeOtherFreeText:!1}},warning:{field:Km,attributes:{label:"In your opinion, should the plant be sold with a label warning buyers of potential control difficulties in their garden?",placeholder:"please select a response",options:{yes:{label:"Yes",summary:"Plants should carry a warning"},no:{label:"No",summary:"Plants need not carry a warning"},unsure:{label:"Don't know",summary:"Don't know if plants should carry a warning"}},includeOtherFreeText:!1,completion:cp.COMPLETION_DESIRED},summary:{summarise:!0,summaryPrefix:""}},comments:{field:Dm,attributes:{label:"Any other comments about this plant?",helpText:"",autocomplete:"off"},summary:{summarise:!0}}}),ly.CHANGE_EVENT="change";var cy=function(e){as(n,e);var t=fs(n);function n(){var e;es(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return rs(us(e=t.call.apply(t,[this].concat(a))),"attributes",{}),rs(us(e),"_savedRemotely",!1),rs(us(e),"_savedLocally",!1),rs(us(e),"SAVE_ENDPOINT","/saveoccurrence.php"),rs(us(e),"TYPE","occurrence"),rs(us(e),"isNew",!1),e}return ns(n,[{key:"taxon",get:function(){return this.attributes.taxon&&this.attributes.taxon.taxonId?wp.fromId(this.attributes.taxon.taxonId):null}},{key:"getForm",value:function(){var e=new ly(this);return this.isNew||(e.liveValidation=!0),e.addListener(ly.CHANGE_EVENT,this,this.formChangedHandler),e}},{key:"formChangedHandler",value:function(e,t,r){console.log("Occurrence change handler invoked."),r.form.updateModelFromContent(),r.form.conditionallyValidateForm(),this.touch(),this.fireEvent(n.EVENT_MODIFIED,{occurrenceId:this.id})}},{key:"delete",value:function(){this.deleted||(this.touch(),this.deleted=!0,this.fireEvent(n.EVENT_MODIFIED,{occurrenceId:this.id}))}},{key:"save",value:function(e){if(this._savedRemotely)return Promise.reject("".concat(this.id," has already been saved."));var t=new FormData;return t.append("type",this.TYPE),t.append("surveyId",e),t.append("occurrenceId",this.id),t.append("projectId",this.projectId.toString()),t.append("attributes",JSON.stringify(this.attributes)),t.append("deleted",this.deleted.toString()),t.append("created",this.createdStamp.toString()),console.log("queueing occurrence post"),this.queuePost(t)}},{key:"_parseDescriptor",value:function(e){hs(os(n.prototype),"_parseDescriptor",this).call(this,e),this.surveyId=e.surveyId}}]),n}(lp);rs(cy,"EVENT_MODIFIED","modified");var uy=function(e){as(n,e);var t=fs(n);function n(){return es(this,n),t.apply(this,arguments)}return n}(cs(Error)),dy=function(e){as(n,e);var t=fs(n);function n(){var e;es(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return rs(us(e=t.call.apply(t,[this].concat(a))),"projectId",2),e}return ns(n,[{key:"addSurvey",value:function(e){var t=this;if(e.projectId!==this.projectId)throw new Error("Survey project id '".concat(e.projectId," does not match with current project ('").concat(this.projectId,"')"));this.surveys.has(e.id)||(console.log("setting survey's modified/save handler"),e.addListener(gp.EVENT_MODIFIED,this,(function(e){return t.fireEvent(dh.EVENT_SURVEYS_CHANGED),e.save()}))),this.surveys.set(e.id,e),this.fireEvent(dh.EVENT_SURVEYS_CHANGED)}},{key:"haveExtantOccurrences",value:function(){var e,t=gs(this.occurrences);try{for(t.s();!(e=t.n()).done;){if(!e.value.deleted)return!0}}catch(e){t.e(e)}finally{t.f()}return!1}},{key:"addOccurrence",value:function(e){var t=this;if(!e.surveyId)throw new uy("Survey id must set prior to registering occurrence.");0===this.occurrences.size&&(this.surveys.get(e.surveyId).createdStamp=e.createdStamp);this.occurrences.set(e.id,e),e.addListener(cy.EVENT_MODIFIED,this,(function(e){var n=t.surveys.get(e.surveyId);if(!n)throw new Error("Failed to look up survey id ".concat(e.surveyId));n.unsaved()&&n.save(),e.save(n.id)}))}},{key:"refreshFromServer",value:function(e){var t,r=this,a=new FormData,o=0,i=gs(e);try{for(i.s();!(t=i.n()).done;){var s=t.value;a.append("surveyId[".concat(o++,"]"),s)}}catch(e){i.e(e)}finally{i.f()}return fetch(n.LOAD_SURVEYS_ENDPOINT,{method:"POST",body:a}).then((function(e){return e.ok?e.json():Promise.reject("Invalid response from server when refreshing survey ids")})).then((function(e){console.log({"refresh from server json response":e});var t=[];for(var n in e)if(e.hasOwnProperty(n)){var a,o=gs(e[n]);try{for(o.s();!(a=o.n()).done;){var i=a.value;t.push(r._conditionallyReplaceObject(i))}}catch(e){o.e(e)}finally{o.f()}}return Promise.all(t)}))}},{key:"_conditionallyReplaceObject",value:function(e){var t=e.type,n=e.id,r="".concat(t,".").concat(n);return op.getItem(r).then((function(t){return t&&!e.deleted&&t.modified>=e.modified?(console.log("Local copy of ".concat(r," is the same or newer than the server copy. (").concat(t.modified," >= ").concat(e.modified,") ")),Promise.resolve()):(console.log("Adding or replacing local copy of ".concat(r)),op.setItem(r,e))}))}},{key:"seekKeys",value:function(e){return op.keys().then((function(t){var n,r=gs(t);try{for(r.s();!(n=r.n()).done;){var a,o,i=n.value,s=ps(i.split(".",2),2);a=s[0],o=s[1],e.hasOwnProperty(a)?e[a].includes(o)||e[a].push(o):console.log("Unrecognised stored key type '".concat(a,"."))}}catch(e){r.e(e)}finally{r.f()}return e}))}},{key:"syncAll",value:function(){var e=this;return this.seekKeys({survey:[],occurrence:[],image:[]}).then((function(t){return e._syncLocalUnsaved(t)}),(function(e){console.log("Failed to sync all: ".concat(e))}))}},{key:"_syncLocalUnsaved",value:function(e){var t,n=[],r=gs(e.survey);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(gp.retrieveFromLocal(a,new gp).then((function(e){if(e.unsaved())return e.save()})))}}catch(e){r.e(e)}finally{r.f()}var o,i=gs(e.occurrence);try{for(i.s();!(o=i.n()).done;){var s=o.value;n.push(cy.retrieveFromLocal(s,new cy).then((function(e){if(e.unsaved())return e.save()})))}}catch(e){i.e(e)}finally{i.f()}var l,c=gs(e.image);try{for(c.s();!(l=c.n()).done;){var u=l.value;n.push(Qm.retrieveFromLocal(u,new Qm).then((function(e){if(e.unsaved())return e.save()})))}}catch(e){c.e(e)}finally{c.f()}return Promise.all(n).catch((function(e){console.log("Save failure: ".concat(e))}))}},{key:"restoreOccurrences",value:function(e){var t=this;if(this.surveys.has(e)){var n=this.surveys.get(e);if(n.isPristine)return this.currentSurvey=n,this.fireEvent(dh.EVENT_SURVEYS_CHANGED),Promise.resolve()}var r={survey:[],occurrence:[],image:[]};return e&&(r.survey[0]=e),this.seekKeys(r).then((function(e){return e.survey.length?t.refreshFromServer(e.survey).finally((function(){return t.seekKeys(e)})):null})).finally((function(){return r.survey.length?t._restoreSurveyFromLocal(r.survey[0],r).finally((function(){return t.currentSurvey=t.surveys.get(r.survey[0]),t.currentSurvey?(t.currentSurvey.deleted?t.setNewSurvey():t.fireEvent(dh.EVENT_SURVEYS_CHANGED),Promise.resolve()):(console.log("Failed to retrieve survey id '".concat(e,"'")),Promise.reject(new Error("Failed to retrieve survey id '".concat(e,"'"))))})):(t.setNewSurvey(),Promise.resolve())}))}},{key:"setNewSurvey",value:function(){this.currentSurvey=new gp,this.currentSurvey.projectId=this.projectId,this.currentSurvey.isPristine=!0,this.addSurvey(this.currentSurvey)}},{key:"addNewOccurrence",value:function(){var e=new cy;return e.surveyId=this.currentSurvey.id,e.projectId=this.projectId,e.isNew=!0,e.isPristine=!0,this.addOccurrence(e),this.fireEvent(n.EVENT_OCCURRENCE_ADDED,{occurrenceId:e.id,surveyId:e.surveyId}),e}},{key:"_restoreSurveyFromLocal",value:function(e,t){var n=this;return gp.retrieveFromLocal(e,new gp).then((function(r){n.clearCurrentSurvey(),n.addSurvey(r);var a,o=[],i=gs(t.occurrence);try{for(i.s();!(a=i.n()).done;){var s=a.value;o.push(cy.retrieveFromLocal(s,new cy).then((function(t){t.surveyId===e&&n.addOccurrence(t)})))}}catch(e){i.e(e)}finally{i.f()}return Promise.all(o)})).finally((function(){var n,r=[],a=gs(t.image);try{var o=function(){var t=n.value;r.push(Qm.retrieveFromLocal(t,new Qm).then((function(n){n.surveyId===e&&Qm.imageCache.set(t,n)}),(function(e){console.log("Failed to retrieve an image: ".concat(e))})))};for(a.s();!(n=a.n()).done;)o()}catch(e){a.e(e)}finally{a.f()}return Promise.all(r)}))}},{key:"clearLocalForage",value:function(){return op.clear()}}]),n}(dh);rs(dy,"LOAD_SURVEYS_ENDPOINT","/loadsurveys.php"),rs(dy,"EVENT_OCCURRENCE_ADDED","occurrenceadded"),rs(dy,"EVENT_SURVEYS_CHANGED","surveyschanged"),rs(dy,"devMode",!1);var fy=function(){function e(){es(this,e),rs(this,"route",null),rs(this,"view",void 0),rs(this,"title","untitled"),rs(this,"handle",void 0),rs(this,"app",void 0)}return ns(e,[{key:"initialise",value:function(){this.view.initialise()}},{key:"registerRoute",value:function(e){if(null===this.route)throw new Error("No route set for '".concat(this.title,"' controller."));console.log({route:this.route}),e.on(this.route,this.routeHandler.bind(this),{before:this.beforeRouteHandler?this.beforeRouteHandler.bind(this):null,after:this.afterRouteHandler?this.afterRouteHandler.bind(this):null,leave:this.leaveRouteHandler?this.leaveRouteHandler.bind(this):null,already:this.alreadyRouteHandler?this.alreadyRouteHandler.bind(this):null})}},{key:"routeHandler",value:function(e,t){}}],[{key:"nextHandle",get:function(){var t;return xs(e,e,hy,1+(t=+_s(e,e,hy))),t}}]),e}(),hy={writable:!0,value:0},py=function(e){as(n,e);var t=fs(n);function n(e){return es(this,n),t.call(this,e)}return n}(cs(Error)),vy=new WeakMap,my=function(e){as(n,e);var t=fs(n);function n(e){var r;return es(this,n),rs(us(r=t.call(this)),"route","/list/:action/:id"),rs(us(r),"title","BSBI New Year Plant Hunt homepage"),rs(us(r),"app",void 0),rs(us(r),"view",void 0),Os(us(r),vy,{writable:!0,value:""}),rs(us(r),"needsFullRefresh",!0),rs(us(r),"needRightPanelRefresh",!0),rs(us(r),"viewSubcontext",""),rs(us(r),"surveySection",void 0),rs(us(r),"leftPanelBaseRoute",""),rs(us(r),"viewContexts",{record:function(e){this.surveySection=null,e?bs(this,vy)!==e.id?(this.needRightPanelRefresh=!0,this.currentOccurrenceId=e.id?e.id:""):this.needRightPanelRefresh=!1:(this.currentOccurrenceId="",this.needRightPanelRefresh=!0),this.leftPanelBaseRoute="/list/record"},survey:function(e){console.log("in survey section ".concat(e.section)),this.currentOccurrenceId="",this.needRightPanelRefresh=!0,this.surveySection=e.section,this.leftPanelBaseRoute="/list/survey/".concat(e.section)}}),r.view=e,e.controller=us(r),r.handle=fy.nextHandle,e.addListener(n.EVENT_SELECT_OCCURRENCE,us(r),r.occurrenceSelectionHandler),e.addListener(n.EVENT_SELECT_SURVEY_SECTION,us(r),r.surveyPartSelectionHandler),e.addListener(n.EVENT_NEW_RECORD,us(r),r.newRecordHandler),e.addListener(n.EVENT_DELETE_OCCURRENCE,us(r),r.deleteOccurrenceHandler),e.addListener(n.EVENT_BACK,us(r),r.backHandler),e.addListener(n.EVENT_NEXT_TO_RECORDS,us(r),r.nextTransitionToRecordsHandler),r}return ns(n,[{key:"occurrences",get:function(){return this.app.occurrences}},{key:"currentOccurrence",get:function(){if(bs(this,vy)){if(this.app.occurrences.has(bs(this,vy)))return this.app.occurrences.get(bs(this,vy));throw new py("Record id '".concat(bs(this,vy),"' was not found."))}return null}},{key:"currentOccurrenceId",get:function(){return bs(this,vy)},set:function(e){ws(this,vy,e)}},{key:"survey",get:function(){return this.app.currentSurvey}},{key:"nextTransitionToRecordsHandler",value:function(){console.log("in nextTransitionToRecordsHandler()"),this.app.haveExtantOccurrences()?this.app.router.navigate("/list/record/"):this.newRecordHandler()}},{key:"deleteOccurrenceHandler",value:function(e,t,n){console.log({deleting:n});var r=this.app.occurrences.get(n);if(!r)throw new uy("Occurrence id '".concat(n,"' not found when trying to delete."));r.delete(),this.currentOccurrenceId===n&&this.app.router.navigate("/list/record/")}},{key:"surveyPartSelectionHandler",value:function(e,t,n){console.log("In surveyPartSelectionHandler"),console.log({context:e,eventName:t,params:n}),"record"===n.sectionKey?this.app.router.navigate("/list/record/"):n.sectionKey?this.app.router.navigate("/list/survey/".concat(n.sectionKey)):this.app.router.navigate("/list/")}},{key:"newRecordHandler",value:function(){var e=this.app.addNewOccurrence();this.app.router.navigate("/list/record/".concat(e.id))}},{key:"occurrenceSelectionHandler",value:function(e,t,n){console.log({"In occurrenceSelectionHandler":{context:e,eventName:t,params:n}}),this.currentOccurrenceId&&n.occurrenceId&&this.currentOccurrenceId===n.occurrenceId?console.log("ignoring spurious navigation event for '".concat(n.occurrenceId,"'")):this.app.router.navigate("/list/record/".concat(n.occurrenceId))}},{key:"registerRoute",value:function(e){e.on("/list",this.mainRouteHandler.bind(this,"list","",""),{before:this.beforeRouteHandler?this.beforeRouteHandler.bind(this):null,after:this.afterRouteHandler?this.afterRouteHandler.bind(this):null,leave:this.leaveRouteHandler?this.leaveRouteHandler.bind(this):null,already:this.alreadyRouteHandler?this.alreadyRouteHandler.bind(this):null}),e.on("/list/help",this.mainRouteHandler.bind(this,"list","","help")),e.on("/list/record/",this.mainRouteHandler.bind(this,"list","record",""),{before:this.beforeRouteHandler?this.beforeRouteHandler.bind(this):null,after:this.afterRouteHandler?this.afterRouteHandler.bind(this):null,leave:this.leaveRouteHandler?this.leaveRouteHandler.bind(this):null,already:this.alreadyRouteHandler?this.alreadyRouteHandler.bind(this):null}),e.on("/list/record/help",this.mainRouteHandler.bind(this,"list","record","help")),e.on("/list/record/:id",this.mainRouteHandler.bind(this,"list","record","form"),{before:this.beforeRouteHandler?this.beforeRouteHandler.bind(this):null,after:this.afterRouteHandler?this.afterRouteHandler.bind(this):null,leave:this.leaveRouteHandler?this.leaveRouteHandler.bind(this):null,already:this.alreadyRouteHandler?this.alreadyRouteHandler.bind(this):null}),e.on("/list/survey/:section",this.mainRouteHandler.bind(this,"list","survey",""),{before:this.beforeRouteHandler?this.beforeRouteHandler.bind(this):null,after:this.afterRouteHandler?this.afterRouteHandler.bind(this):null,leave:this.leaveRouteHandler?this.leaveRouteHandler.bind(this):null,already:this.alreadyRouteHandler?this.alreadyRouteHandler.bind(this):null}),e.on("/list/survey/:section/help",this.mainRouteHandler.bind(this,"list","survey","help"))}},{key:"mainRouteHandler",value:function(e,t,n,r){console.log("reached special route handler for MainController.js"),console.log({context:e,params:t,query:r}),this.app.saveRoute();try{this.viewSubcontext=t,t&&this.viewContexts[t].call(this,r),this.app.currentControllerHandle!==this.handle&&(this.needsFullRefresh=!0,this.needRightPanelRefresh=!0,this.app.currentControllerHandle=this.handle),this.view.panelKey=n,this.view.display(),this.needsFullRefresh=!1}catch(e){this.error=e,console.log({error:e});try{this.needsFullRefresh=!0,this.view.display()}catch(e){console.log({rethrownError:e}),document.body.innerHTML="<h2>Internal error</h2><p>Please report this problem:</p><p>".concat(e.message,"</p>")}}}},{key:"backHandler",value:function(){this.app.routeHistory.length>=2&&this.app.routeHistory[this.app.routeHistory.length-2].url===this.leftPanelBaseRoute?(this.app.routeHistory.length-=1,console.log("using standard back navigation"),window.history.back()):(console.log("navigating back using base address '".concat(this.leftPanelBaseRoute,"'")),this.app.router.navigate(this.leftPanelBaseRoute))}}]),n}(fy);rs(my,"EVENT_SELECT_OCCURRENCE","selectoccurrence"),rs(my,"EVENT_SELECT_SURVEY_SECTION","selectsurveysection"),rs(my,"EVENT_NEW_RECORD","newrecord"),rs(my,"EVENT_DELETE_OCCURRENCE","deleteoccurrence"),rs(my,"EVENT_BACK","back"),rs(my,"EVENT_NEXT_TO_RECORDS","nexttorecords");var yy="\x3c!-- begin: templates/formHelp/surveyAboutHelp.html --\x3e\r\n<h3>Background to the project</h3>\r\n<p>The majority of our ornamental plants are non-native. They contribute greatly to our enjoyment\r\nof gardens and represent a long history of plant discovery and garden design. However, some\r\nhave escaped the controlled environment of gardens, and a small minority of these are\r\nthreatening native biodiversity or are causing severe problems for infrastructure, agriculture or\r\n    forestry. Well known examples include Japanese Knotweed (<i>Reynoutria japonica</i>), <i>Rhododendron\r\n        ponticum</i> and Himalayan Balsam (<i>Impatiens glandulifera</i>).</p>\r\n<p>The period between introduction of a species and it first being noticed as a problem can be a\r\nlong one, making future control problematic. In Britain on average, this time span has been more\r\nthan one hundred years. Early detection of potentially problematic plants for further risk\r\n    assessment could greatly improve our ability to prevent plant species becoming invasive.</p>\r\n<p>This survey is based upon the assumption that it is gardeners who are most likely to notice first\r\nif a particular ornamental plant may have the potential to spread outside the garden. (Most\r\ngardeners will know which plants tend to overgrow others or tend to spread all over the\r\ngarden.) This knowledge could be invaluable in identifying potential invaders, triggering timely risk\r\n    assessment.</p>\r\n\x3c!-- end: templates/formHelp/surveyAboutHelp.html --\x3e\r\n",gy=new WeakMap,by=new WeakMap,wy=function(e){as(n,e);var t=fs(n);function n(e){var r;return es(this,n),Os(us(r=t.call(this,e)),gy,{writable:!0,value:void 0}),Os(us(r),by,{writable:!0,value:void 0}),rs(us(r),"_value",""),rs(us(r),"_inputType","text"),rs(us(r),"_autocomplete",""),e&&(e.type&&(r._inputType=e.type),e.placeholder&&(r.placeholder=e.placeholder),e.autocomplete&&(r._autocomplete=e.autocomplete)),r}return ns(n,[{key:"value",get:function(){return this._value},set:function(e){this._value=void 0===e||null==e?"":e.trim(),this.updateView()}},{key:"updateView",value:function(){this._fieldEl&&(document.getElementById(bs(this,gy)).value=cp.cleanRawString(this._value))}},{key:"buildField",value:function(){var e=document.createElement("div");e.className="form-group",ws(this,by,e.id=cp.nextId),ws(this,gy,cp.nextId);var t=e.appendChild(document.createElement("label"));t.htmlFor=bs(this,gy),t.textContent=this.label;var n=e.appendChild(document.createElement("input"));if(n.className="form-control",n.id=bs(this,gy),n.type=this._inputType,this.placeholder&&(n.placeholder=this.placeholder),this._autocomplete&&(n.autocomplete=this._autocomplete,"off"===this._autocomplete&&(n.name=ip())),this.completion===cp.COMPLETION_COMPULSORY&&(n.required=!0),this.validationMessage){var r=e.appendChild(document.createElement("div"));r.className="invalid-feedback",r.innerHTML=this.validationMessage}this.helpText&&(e.appendChild(document.createElement("small")).innerHTML=this.helpText);n.addEventListener("change",this.inputChangeHandler.bind(this)),this._fieldEl=e}},{key:"markValidity",value:function(e){var t=document.getElementById(bs(this,gy));null===e?t.classList.remove("is-invalid","is-valid"):(t.classList.remove(e?"is-invalid":"is-valid"),t.classList.add(e?"is-valid":"is-invalid"))}},{key:"inputChangeHandler",value:function(e){e.stopPropagation(),console.log("got input field change event"),this.value=cp.cleanRawString(document.getElementById(bs(this,gy)).value),this.fireEvent(cp.EVENT_CHANGE)}}],[{key:"summariseImpl",value:function(e,t,n){return""!==n[e]&&null!==n[e]&&void 0!==n[e]?yp(n[e].trim()):""}}]),n}(cp),Ey=function e(){es(this,e)};rs(Ey,"sectionTitle",void 0),rs(Ey,"sectionSortOrder",void 0),rs(Ey,"sectionNavigationKey",void 0),rs(Ey,"help",""),rs(Ey,"properties",void 0);var _y=function(e){as(n,e);var t=fs(n);function n(){return es(this,n),t.apply(this,arguments)}return n}(Ey);rs(_y,"sectionNavigationKey","garden"),rs(_y,"sectionTitle","About your garden"),rs(_y,"sectionSortOrder",1),rs(_y,"help","\x3c!-- begin: templates/formHelp/surveyGardenHelp.html --\x3e\r\n<h2>About your garden</h2>\r\n<p>The questions in this section provide background information about the area where you live.</p>\r\n<p>Please try to answer everything, but don't worry if some details are impossible to assess.</p>\r\n<p>When you have completed this section, move on to the final part of the survey, where you can list the invasive plants in your garden.</p>\r\n\x3c!-- end: templates/formHelp/surveyGardenHelp.html --\x3e\r\n"),rs(_y,"properties",{durationAtAddress:{field:wy,attributes:{label:"Roughly how long have you lived at this address?",placeholder:"approximate years",type:"number"}},numberOfPlants:{field:Km,attributes:{label:"Could you please try to estimate how many different ornamental plants are growing in your garden?",placeholder:"please estimate",options:{"<20":{label:"fewer than 20"},"20-50":{label:"between 20 and 50"},"50-100":{label:"between 50 and 100"},">100":{label:"more than 100"},unknown:{label:"impossible to estimate"}},includeOtherFreeText:!1,completion:cp.COMPLETION_DESIRED}},introductions:{field:wy,attributes:{label:"In the last year, how many new ornamental plant species did you plant/introduce into your garden?",helpText:"please estimate",placeholder:"number of plants",autocomplete:"off",type:"number"}},acquisitions:{field:Vm,attributes:{label:"In the last year, where did you get these new plants or seeds?",helpText:"<i>(tick all that apply)</i>",options:{nursery:{label:"bought from nursery"},gardencentre:{label:"bought at garden centre"},supermarket:{label:"bought at supermarket"},mailorder:{label:"mail-order"},internetorder:{label:"internet order"},friendsneighbours:{label:"from friends or neighbours"},swap:{label:"plant / seed swap"},other:{label:"other"}},includeOtherFreeText:!0}},gifts:{field:Km,attributes:{label:"In the last two years, did you give plants/seeds to friends/neighbours?",placeholder:"please select a response",options:{yes:{label:"yes"},no:{label:"no"}},includeOtherFreeText:!1}}});var xy=function(e){as(n,e);var t=fs(n);function n(){return es(this,n),t.apply(this,arguments)}return n}(Ey);rs(xy,"sectionNavigationKey","about"),rs(xy,"sectionTitle","About you and your survey"),rs(xy,"sectionSortOrder",0),rs(xy,"help",'\x3c!-- begin: templates/formHelp/surveyAboutHelp.html --\x3e\r\n<div class="card mt-3">\r\n    <div class="card-body">\r\n        <h5 class="card-title">Localising your records</h5>\r\n        <p class="card-text">To make sense of the national coverage of the records we receive, we need to know the approximate location\r\n        of your garden. Usually a postcode works well for this, but you can provide a grid-reference if you prefer (in Ireland please use a grid-reference as we don\'t yet have a way to convert postcodes).\r\n            We also need a place name, as a way to double check that the postcode or grid-reference makes sense.\r\n        </p>\r\n        <p><strong>Please don\'t provide your full address, as we would need to remove that from our data.</strong></p>\r\n    </div>\r\n</div>\r\n<div class="card mt-3">\r\n    <div class="card-body">\r\n        <h5 class="card-title">Your name and email</h5>\r\n        <p class="card-text">Both of these are optional, but providing an email address is important if you want to return\r\n            to your survey later or to revise your records. It is also really useful for our experts to be able to contact you\r\n            if we have questions about the records that you\'ve sent.\r\n        </p>\r\n        <p>We\'d like to be able to include your name with the records in our archive, but your email address won\'t be stored long-term\r\n            after your plant records have been checked.</p>\r\n    </div>\r\n</div>\r\n\x3c!-- end: templates/formHelp/surveyAboutHelp.html --\x3e\r\n'),rs(xy,"properties",{place:{field:wy,attributes:{label:"Where did you survey?",helpText:"e.g. town or village. Please don't give an address.",placeholder:"Nearest named place",autocomplete:"address-level2",completion:cp.COMPLETION_COMPULSORY}},georef:{field:wy,attributes:{label:"Postcode or grid-reference",helpText:"We need to be able to put your survey on our map. Detailed locations won't be made public.",placeholder:"Grid-reference or postcode",autocomplete:"postal-code",completion:cp.COMPLETION_COMPULSORY}},recorder:{field:wy,attributes:{label:"Your name",helpText:"(optional) This helps us follow-up if we have any queries about your records and allows us to properly acknowledge the origin of your observations.",placeholder:"full name",autocomplete:"name"}},namearchive:{field:Km,attributes:{label:"Can we include your name in our archive of plant records?",helpText:"",placeholder:"please choose an option",options:{yes:{label:"yes"},no:{label:"no, I'd prefer my records to be anonymous"}},includeOtherFreeText:!1,completion:cp.COMPLETION_DESIRED}},email:{field:wy,attributes:{label:"Your email address",helpText:"(optional) We'll never share your email with anyone else.",autocomplete:"email",type:"email"}}});mp.registerSection(xy),mp.registerSection(_y);var Sy=new WeakMap,Iy=new WeakMap,ky=new WeakMap,Ty=new WeakSet,Ry=new WeakSet,Ay=new WeakSet,Oy=new WeakSet,Cy=new WeakSet,Ny=new WeakSet,Ly=new WeakSet,My=new WeakSet,Py=new WeakSet,Hy=new WeakSet,Dy=new WeakSet,jy=new WeakSet,Fy=function(e){as(n,e);var t=fs(n);function n(){var e;es(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return Cs(us(e=t.call.apply(t,[this].concat(a))),jy),Cs(us(e),Dy),Cs(us(e),Hy),Cs(us(e),Py),Cs(us(e),My),Cs(us(e),Ly),Cs(us(e),Ny),Cs(us(e),Cy),Cs(us(e),Oy),Cs(us(e),Ay),Cs(us(e),Ry),Cs(us(e),Ty),rs(us(e),"controller",void 0),Os(us(e),Sy,{writable:!0,value:{}}),Os(us(e),Iy,{writable:!0,value:void 0}),Os(us(e),ky,{writable:!0,value:{}}),rs(us(e),"panelKey",""),rs(us(e),"OCCURRENCES_ARE_LAST_SECTION",!0),e}return ns(n,[{key:"initialise",value:function(){this.controller.app.addListener(dy.EVENT_OCCURRENCE_ADDED,this,"occurrenceAddedHandler")}},{key:"setLayout",value:function(){var e=this;document.getElementById("body").innerHTML='\r\n<div class="container-fluid">\r\n    <div class="row" style="height: 90vh;">\r\n        <div class="col d-md-block pr-md-0 pt-3" id="col1panel" style="overflow-y: auto; max-height: calc(100vh - 5rem);">\r\n        </div>\r\n        <div class="col d-md-none pl-0 pr-0" id="ctrlpanel" style="background-color: aliceblue; width: 28px; max-width: 28px; overflow-y: hidden; ">\r\n            <button class="navbar-light navbar-toggler pl-0 pr-0" type="button" aria-label="Back" id="right-panel-back">\r\n                <i class="material-icons-round" style="color: gray;">view_list</i>\r\n            </button>\r\n        </div>\r\n        <div class="col d-md-block pr-md-0" id="col2panel" style="overflow-y: auto; height: 100%;">\r\n        </div>\r\n    </div>\r\n</div>\r\n',document.getElementById("right-panel-back").addEventListener("click",(function(t){t.stopPropagation(),t.preventDefault(),e.fireEvent(my.EVENT_BACK)}))}},{key:"refreshLeftPanelAccordionState",value:function(){var e,t=document.querySelectorAll("div#".concat(this.leftPanelAccordionId,' div[data-parent="#').concat(this.leftPanelAccordionId,'"].collapse'));e=this.controller.viewSubcontext?"record"===this.controller.viewSubcontext?"record":this.controller.surveySection:"";var n,r=gs(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;a.getAttribute("data-sectionkey")===e?a.classList.add("show"):a.classList.remove("show")}}catch(e){r.e(e)}finally{r.f()}this._refreshOccurrenceAccordionState()}},{key:"_refreshOccurrenceAccordionState",value:function(){var e,t=document.querySelectorAll("div#".concat("occurrencelistcontainer",' div[data-parent="#').concat("occurrencelistcontainer",'"].collapse')),n=this.controller.currentOccurrenceId,r=gs(t);try{for(r.s();!(e=r.n()).done;){var a=e.value;a.getAttribute("data-occurrenceid")===n?a.classList.add("show"):a.classList.remove("show")}}catch(e){r.e(e)}finally{r.f()}}},{key:"display",value:function(){if(this.controller.needsFullRefresh?(console.log("Full refresh triggered."),this.setLayout(),Rs(this,Cy,Wy).call(this)):this.refreshLeftPanelAccordionState(),this.controller.needRightPanelRefresh)switch(this.controller.viewSubcontext){case"record":Rs(this,Ry,Uy).call(this);break;case"survey":Rs(this,Ty,By).call(this);break;default:Rs(this,Ay,Vy).call(this)}this.setResponsivePanel(""===this.panelKey?"left":"right")}},{key:"refreshOccurrenceFooterControls",value:function(e){var t=this,n=e.appendChild(document.createElement("div")),r=n.appendChild(document.createElement("button"));if(r.className="btn btn-secondary btn-md-lg mt-2 mb-3 mr-2",r.type="button",r.textContent="back to list",r.setAttribute("data-buttonaction","back"),this.occurrenceIsMostRecent(this.controller.currentOccurrence)){var o=n.appendChild(document.createElement("button"));o.className="btn btn-primary btn-md-lg mt-2 mb-3 mr-2",o.type="button",o.textContent="add another",o.setAttribute("data-buttonaction","new")}if(this.OCCURRENCES_ARE_LAST_SECTION){var i=n.appendChild(document.createElement("button"));i.className="btn btn-primary btn-md-lg mt-2 mb-3",i.type="button",i.textContent="finish",i.setAttribute("data-buttonaction","finish")}else{var s=mp.sections[1],l=n.appendChild(document.createElement("button"));l.className="btn btn-primary btn-md-lg mt-2 mb-3",l.type="button",l.textContent="next »",l.setAttribute("data-buttonaction","next"),l.title=s.sectionTitle}n.addEventListener("click",(function(e){var n=e.target.closest("button");if(n&&n.hasAttribute("data-buttonaction"))switch(n.getAttribute("data-buttonaction")){case"new":t.fireEvent(my.EVENT_NEW_RECORD);break;case"back":t.controller.app.router.navigate("/list/record/");break;case"finish":t.controller.app.router.navigate("/list/record/"),a.default("#".concat("finishmodal")).modal();break;case"next":t.controller.app.router.navigate("/list/survey/".concat(nextSection.sectionNavigationKey));break;default:throw new Error("Unrecognised button action ".concat(n.getAttribute("data-buttonaction")))}}))}},{key:"occurrenceIsMostRecent",value:function(e){var t,n=gs(this.controller.occurrences.entries());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r[1].createdStamp>e.createdStamp&&!r[1].deleted)return!1}}catch(e){n.e(e)}finally{n.f()}return!0}},{key:"newButtonClickHandler",value:function(e){e.preventDefault(),e.stopPropagation(),this.fireEvent(my.EVENT_NEW_RECORD)}},{key:"occurrenceAddedHandler",value:function(e,t,n){var r=document.getElementById("occurrencelistcontainer");if(r){var a=this.controller.occurrences.get(n.occurrenceId),o=document.createElement("div");o.className="card",o.id="card_".concat(a.id),o.innerHTML=Rs(this,jy,Jy).call(this,a),bs(this,ky)[a.id]=a.addListener(cy.EVENT_MODIFIED,this,this.occurrenceChangeHandler,{occurrenceId:a.id}),r.insertBefore(o,r.firstChild)}}},{key:"refreshOccurrenceValiditySummary",value:function(e){var t=document.getElementById("card_".concat(e.id));t&&(e.evaluateCompletionStatus(ly.properties).requiredFieldsPresent?t.classList.remove("is-invalid"):t.classList.add("is-invalid"))}},{key:"occurrenceChangeHandler",value:function(e,t,n){var r=this.controller.occurrences.get(n.occurrenceId),a=document.getElementById("card_".concat(n.occurrenceId));a&&(r.deleted?(a.parentElement.removeChild(a),bs(this,ky)[n.occurrenceId]&&(r.removeListener(cy.EVENT_MODIFIED,bs(this,ky)[n.occurrenceId]),bs(this,ky)[n.occurrenceId]=null)):(a.innerHTML=Rs(this,jy,Jy).call(this,r),this.refreshOccurrenceValiditySummary(r)))}},{key:"occurrenceSummaryBodyHTML",value:function(e){var t="";for(var n in e.attributes)if(e.attributes.hasOwnProperty(n)&&ly.properties.hasOwnProperty(n)&&!ly.properties[n].field.isEmpty(e.attributes[n])){var r=ly.properties[n].field.summarise(n,ly.properties[n],e.attributes);r&&(t+='<p class="ellipsed-line mb-0">'.concat(r,"</p>"))}return dy.devMode&&(t+='<p class="mb-0">(<i>id '.concat(e.id,"</i>)</p>")),t}},{key:"occurrenceSummaryHeadingHTML",value:function(e){var t="";if(e.attributes.hasOwnProperty("images")&&e.attributes.images.length){var n=e.attributes.images[0];t+=Qm.imageLink(n,48,48,{className:"mr-1"})}return e.attributes.taxon&&e.attributes.taxon.taxonId?t+=e.taxon.formattedHTML(e.attributes.taxon.vernacularMatch):e.attributes.taxon&&e.attributes.taxon.taxonName?t+=yp(e.attributes.taxon.taxonName):t+="<span>(unnamed plant)</span>",t}},{key:"setResponsivePanel",value:function(e){var t=document.getElementById("col2panel"),n=document.getElementById("col1panel"),r=document.getElementById("ctrlpanel");switch(e){case"left":n.classList.remove("d-none"),n.classList.add("d-block"),t.classList.remove("d-block"),t.classList.add("d-none"),r.classList.remove("d-md-none"),r.classList.add("d-none");break;case"right":n.classList.remove("d-block"),n.classList.add("d-none"),t.classList.remove("d-none"),t.classList.add("d-block"),r.classList.remove("d-none"),r.classList.add("d-md-none");break;default:throw new Error("Unrecognised panel value '".concat(e))}}}]),n}(sh);function By(){var e=document.getElementById("col2panel"),t=this.controller.surveySection,n=mp.sectionsByKey[t]?mp.sectionsByKey[t].help:"";e.innerHTML=n||("welcome"===t?yy:"<p>placeholder survey help content for '".concat(t,"'</p>"))}function Uy(){try{var e=this.controller.currentOccurrence,t=document.getElementById("col2panel");if(e){bs(this,Iy)&&bs(this,Iy).occurrenceId===e.id||(bs(this,Iy)&&bs(this,Iy).destructor(),ws(this,Iy,e.getForm()),bs(this,Iy).surveyId=this.controller.app.currentSurvey.id,t.scrollTop=0),t.innerHTML="";var n=bs(this,Iy).formElement;t.appendChild(n),bs(this,Iy).populateFormContent(),this.refreshOccurrenceFooterControls(t),a.default("#description_".concat(e.id)).collapse("show")}else Rs(this,Ay,Vy).call(this,ly.help)}catch(e){console.log({error:e});var r=document.getElementById("col2panel");r?r.innerHTML="<p>".concat(e.message,"</p>"):document.body.innerHTML="<h2>Internal error</h2><p>Please report this problem:</p><p>".concat(e.message,"</p>")}}function Vy(e){document.getElementById("col2panel").innerHTML=e||yy}function qy(){for(var e in bs(this,ky)){var t=this.controller.occurrences.get[e];t&&t.removeListener(cy.EVENT_MODIFIED,bs(this,ky)[e])}ws(this,ky,{})}function Wy(){var e=this,t=document.getElementById("col1panel").appendChild(document.createElement("div"));t.className="accordion",this.leftPanelAccordionId=t.id=fp.nextId,Rs(this,My,$y).call(this),Rs(this,Py,zy).call(this,0,t,Fy.NEXT_RECORDS),Rs(this,Hy,Ky).call(this),Rs(this,Dy,Xy).call(this),t.addEventListener("click",(function(t){var n=t.target.closest("a");n&&n.hasAttribute("data-help-link")&&(t.preventDefault(),t.stopPropagation(),e.controller.app.router.navigate(n.getAttribute("data-help-link")))})),Rs(this,Ly,Gy).call(this),Rs(this,Ny,Yy).call(this)}function Yy(){var e=this,t=document.body,n='<div class="modal fade" id="'.concat("deleteoccurrencemodal",'" tabindex="-1" role="dialog" aria-labelledby="').concat("deleteoccurrencemodal",'Title" aria-hidden="true">\n  <div class="modal-dialog modal-dialog-centered" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h5 class="modal-title" id="').concat("deleteoccurrencemodal",'Title">Delete record?</h5>\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n          <span aria-hidden="true">&times;</span>\n        </button>\n      </div>\n      <div class="modal-body">\n        Please confirm that you wish to delete the record.\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-secondary" data-dismiss="modal">Back</button>\n        <button type="button" class="btn btn-danger" data-dismiss="modal" id="').concat("deleteoccurrencemodal",'confirmed">Delete record</button>\n      </div>\n    </div>\n  </div>\n</div>'),r=document.createElement("div");r.innerHTML=n,t.appendChild(r.firstChild),a.default("#".concat("deleteoccurrencemodal")).on("show.bs.modal",(function(e){var t=a.default(e.relatedTarget);if(t&&t.data("occurrenceid")){var n=t.data("occurrenceid");document.getElementById("".concat("deleteoccurrencemodal","confirmed")).setAttribute("data-occurrenceid",n)}})),document.getElementById("".concat("deleteoccurrencemodal","confirmed")).addEventListener("click",(function(t){var n=t.target.closest("button");if(n&&n.hasAttribute("data-occurrenceid")){var r=n.getAttribute("data-occurrenceid");console.log("Deleting occurrence ".concat(r,".")),e.fireEvent(my.EVENT_DELETE_OCCURRENCE,r)}}));var o=document.createElement("div");o.innerHTML='<div class="modal fade" id="'.concat("finishmodal",'" tabindex="-1" role="dialog" aria-labelledby="').concat("finishmodal",'Title" aria-hidden="true">\n  <div class="modal-dialog modal-dialog-centered" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h5 class="modal-title" id="').concat("finishmodal",'Title">Thank you</h5>\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n          <span aria-hidden="true">&times;</span>\n        </button>\n      </div>\n      <div class="modal-body">\n        <p>Thank you! Your form responses have been sent. If you wish, you can continue to make changes and edit or add further records.</p>\n        <p>If you provided an email address, then we will send you a message with a link to this form, so that you can return to it later if needed.</p>\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>\n      </div>\n    </div>\n  </div>\n</div>'),t.appendChild(o.firstChild),t.appendChild(ay.licenseModal());var i=document.createElement("div");i.innerHTML='<div class="modal fade" id="'.concat("imagemodal",'" tabindex="-1" role="dialog" aria-labelledby="').concat("imagemodal",'Title" aria-hidden="true">\n  <div class="modal-dialog modal-dialog-centered" role="document">\n    <div class="modal-content">\n      <div class="modal-header d-none d-md-flex">\n        <h5 class="modal-title" id="').concat("imagemodal",'Title">Photo</h5>\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n          <span aria-hidden="true">&times;</span>\n        </button>\n      </div>\n      <div class="modal-body" style="position: relative;">\n        <picture>\n        </picture>\n      </div>\n      <div class="modal-footer">\n        <button type="button" id="').concat("imagemodaldelete",'" class="btn btn-outline-danger delete-occurrence-button mr-3" data-toggle="modal" data-target="#').concat("deleteimagemodal",'" data-imageid=""><i class="material-icons">delete</i></button>\n        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>\n      </div>\n    </div>\n  </div>\n</div>'),t.appendChild(i.firstChild),document.getElementById("imagemodaldelete").addEventListener("click",(function(t){var n=t.target.closest("button");if(n&&n.hasAttribute("data-imageid")){var r=n.getAttribute("data-imageid");bs(e,Iy).fireEvent("deleteimage",r),a.default("#".concat("imagemodal")).modal("hide")}}))}function Gy(){var e=this;a.default("#".concat("col1panel")).on("show.bs.collapse",(function(t){t.target.dataset.occurrenceid?(console.log({"left panel accordion show event (with occ id)":t}),e.fireEvent(my.EVENT_SELECT_OCCURRENCE,{occurrenceId:t.target.dataset.occurrenceid})):t.target.dataset.sectionkey?(console.log({"left panel accordion show event (with section key)":t}),e.fireEvent(my.EVENT_SELECT_SURVEY_SECTION,{sectionKey:t.target.dataset.sectionkey})):console.log({"left panel accordion show event (other)":t})})).on("hidden.bs.collapse",(function(t){if(console.log({"left panel accordion hide event":t}),t.target.dataset.occurrenceid){var n=e.controller.occurrences.get(t.target.dataset.occurrenceid);n.isNew&&!n.isPristine&&(n.isNew=!1,e.refreshOccurrenceValiditySummary(n)),e.controller.currentOccurrenceId===t.target.dataset.occurrenceid&&e.fireEvent(my.EVENT_SELECT_OCCURRENCE,{occurrenceId:""})}else if(t.target.dataset.sectionkey)if("record"===t.target.dataset.sectionkey)"record"===e.controller.viewSubcontext&&e.fireEvent(my.EVENT_SELECT_SURVEY_SECTION,{sectionKey:""});else if(bs(e,Sy)[t.target.dataset.sectionkey]){var r=bs(e,Sy)[t.target.dataset.sectionkey].validateForm();console.log({"survey section validity":r}),e.controller.surveySection===t.target.dataset.sectionkey&&e.fireEvent(my.EVENT_SELECT_SURVEY_SECTION,{sectionKey:""})}}))}function $y(){var e=document.getElementById(this.leftPanelAccordionId),t=document.createElement("button");t.className="btn btn-primary",t.type="button",t.textContent="get started »",t.setAttribute("data-toggle","collapse"),t.setAttribute("data-target","#survey-0-about");var n=fp.nextId,r=document.createElement("div");r.innerHTML='\x3c!-- begin: templates/welcome.html --\x3e\r\n<p>Using your experience as gardener, please help us identify\r\npotentially invasive plant species in gardens before they become a problem for\r\nbiodiversity and conservation in wild situations in Britain or Ireland.</p>\r\n<p>The survey is divided into three sections and usually takes between 15 and 20 minutes to complete. You can pause and come back\r\n    later at any point.</p>\r\n<p>The information that you provide will be used by the <a href="https://www.coventry.ac.uk/research/areas-of-research/agroecology-water-resilience/" target="_blank" title="CAWR">Centre for Agroecology, Water and Resilience</a> at Coventry University and by\r\n    <a href="https://bsbi.org/" target="_blank" title="Botanical Society of Britain and Ireland">BSBI</a> for a\r\n    study of invasive plants. We\'ll include your plant records in a permanent archive held by BSBI, to help us track\r\n    long term changes in plant distribution.</p>\r\n<p>To follow up any queries about the survey we request that you please provide your name and email address. You can choose whether or not\r\n    to include your name in our archive of plant records. Your email address (if provided) will be\r\nconfidential and won\'t be archived.</p>\r\n<p>A summary of records will appear on the project website, but the full survey details including the exact location of your garden will only be accessible to the research team.</p>\r\n\x3c!-- end: templates/welcome.html --\x3e\r\n',r.appendChild(t);var a=document.createElement("span");a.className="d-md-none pl-2",a.innerHTML='(<a href="/app/list/survey/welcome/help" data-navigo="list/survey/welcome/help">more info</a>)',r.appendChild(a),e.appendChild(this.card({cardId:n,cardHeadingId:fp.nextId,collapsed:"welcome"!==this.controller.surveySection,headingButtonId:fp.nextId,headingHTML:"Welcome",headingNonbuttonHTML:"",headingValidationWarningHTML:"",cardDescriptionId:"survey-welcome",parentContainerId:e.id,bodyContentElement:r,dataAttributes:{sectionkey:"welcome"}}))}function zy(e,t,n){var r=this,o=mp.sections[e],i=new mp(o);bs(this,Sy)[o.sectionNavigationKey]=i;var s=i.formElement,l=document.createElement("button");switch(l.className="btn btn-primary",l.type="button",l.textContent="next »",n){case Fy.NEXT_RECORDS:l.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),r.fireEvent(my.EVENT_NEXT_TO_RECORDS)}));break;case Fy.NEXT_SURVEY_SECTION:var c=mp.sections[e+1];l.setAttribute("data-toggle","collapse"),l.setAttribute("data-target","#survey-".concat(e+1,"-").concat(c.sectionNavigationKey)),l.title=c.sectionTitle;break;case Fy.NEXT_IS_FINAL:l.textContent="finish",l.className="btn btn-primary btn-md-lg mt-2 mb-3",l.type="button",l.addEventListener("click",(function(){r.controller.app.router.navigate("/list/"),a.default("#".concat("finishmodal")).modal()}));break;default:throw new Error("Unrecognized next section keyword '".concat(n,"'"))}s.appendChild(l);var u=fp.nextId;t.appendChild(this.card({cardId:u,cardHeadingId:fp.nextId,collapsed:this.controller.surveySection!==o.sectionNavigationKey,headingButtonId:fp.nextId,headingHTML:o.sectionTitle,headingNonbuttonHTML:'<small class="btn d-md-none" style="margin: 0; padding: 0;">(<a href="/app/list/survey/'.concat(o.sectionNavigationKey,'/help" data-help-link="/list/survey/').concat(o.sectionNavigationKey,'/help">help</a>)</small>'),headingValidationWarningHTML:"Please check the form for some missing responses.",cardDescriptionId:"survey-".concat(e,"-").concat(o.sectionNavigationKey),parentContainerId:t.id,bodyContentElement:s,dataAttributes:{sectionkey:o.sectionNavigationKey}})),this.controller.survey.registerForm(i),i.addListener(mp.EVENT_VALIDATION_STATE_CHANGE,this,(function(e,t,n){var r=document.getElementById(u);n?r.classList.remove("is-invalid"):r.classList.add("is-invalid")}))}function Ky(){var e=document.getElementById(this.leftPanelAccordionId),t=document.createDocumentFragment();t.appendChild(document.createElement("p")).innerHTML='Records of invasive plants in your garden.<small class="d-block d-md-none"><a href="/app/list/record/help">(help)</a></small>';var n=t.appendChild(document.createElement("button"));n.type="button",n.className="btn btn-primary btn-lg mb-2",n.innerText="Add a plant record.",n.addEventListener("click",this.newButtonClickHandler.bind(this)),t.appendChild(document.createElement("div")).id="occurrencelistcontainer",e.appendChild(this.card({cardId:fp.nextId,cardHeadingId:fp.nextId,collapsed:"record"!==this.controller.viewSubcontext,headingButtonId:fp.nextId,headingHTML:"Your plant records",cardDescriptionId:fp.nextId,parentContainerId:e.id,bodyContentElement:t,dataAttributes:{sectionkey:"record"}}))}function Xy(){var e=document.getElementById("occurrencelistcontainer");if(!e)throw new uy("Failed to find list container.");Rs(this,Oy,qy).call(this);var t,n=[],r=gs(vs(this.controller.occurrences.entries()).sort((function(e,t){return t[1].createdStamp-e[1].createdStamp})));try{for(r.s();!(t=r.n()).done;){var o=t.value[1];if(!o.deleted){var i=o.isNew||o.evaluateCompletionStatus(ly.properties).requiredFieldsPresent;n.push('<div class="card'.concat(i?"":" is-invalid",'" id="card_').concat(o.id,'">\n    ').concat(Rs(this,jy,Jy).call(this,o),"\n</div>")),bs(this,ky)[o.id]=o.addListener(cy.EVENT_MODIFIED,this,this.occurrenceChangeHandler,{occurrenceId:o.id})}}}catch(e){r.e(e)}finally{r.f()}e.className="accordion",e.innerHTML=n.join(""),e.addEventListener("click",(function(e){var t=e.target.closest("button");t&&t.hasAttribute("data-toggle")&&"modal"===t.getAttribute("data-toggle")&&(document.getElementById("".concat("deleteoccurrencemodal","confirmed")).setAttribute("data-occurrenceid",t.getAttribute("data-occurrenceid")),a.default(t.getAttribute("data-target")).modal(),e.preventDefault(),e.stopPropagation())}))}function Jy(e){return'<div class="card-header pointer pl-2 pr-2 pt-2 pb-2" id="heading_'.concat(e.id,'" data-toggle="collapse" data-target="#description_').concat(e.id,'">\n    <div class="float-right">\n        <button type="button" class="btn btn-outline-danger delete-occurrence-button" data-toggle="modal" data-target="#').concat("deleteoccurrencemodal",'" data-occurrenceid="').concat(e.id,'"><i class="material-icons">delete</i></button>\n    </div>\n    <h2 class="mb-0 pb-0 mt-0 pt-0 pl-0 ml-0">\n        <button class="btn btn-link').concat(this.controller.currentOccurrenceId===e.id?"":" collapsed",' pt-0 pb-0 pl-0" id="headingbutton_').concat(e.id,'" type="button" data-toggle="collapse" data-target="#description_').concat(e.id,'" aria-expanded="').concat(this.controller.currentOccurrenceId===e.id?"true":"false",'" aria-controls="description_').concat(e.id,'">\n          ').concat(this.occurrenceSummaryHeadingHTML(e),'\n        </button>\n    </h2>\n    <div class="card-invalid-feedback">\n        <small>Please check for errors or missing details.</small>\n    </div>\n</div>\n<div id="description_').concat(e.id,'" class="collapse').concat(this.controller.currentOccurrenceId===e.id?" show":"",'" aria-labelledby="heading_').concat(e.id,'" data-parent="#').concat("occurrencelistcontainer",'" data-occurrenceid="').concat(e.id,'">\n  <div class="card-body">\n    ').concat(this.occurrenceSummaryBodyHTML(e),"\n  </div>\n</div>")}rs(Fy,"NEXT_RECORDS","records"),rs(Fy,"NEXT_SURVEY_SECTION","survey"),rs(Fy,"NEXT_IS_FINAL","last");var Qy=function(e){as(n,e);var t=fs(n);function n(e,r){var a;return es(this,n),rs(us(a=t.call(this)),"route",void 0),a.view=e,a.route=r,a.handle=fy.nextHandle,a}return ns(n,[{key:"routeHandler",value:function(e,t){console.log("reached route handler for StaticContentController.js"),this.app.currentControllerHandle=this.handle,this.view.display()}}]),n}(fy),Zy=function(e){as(n,e);var t=fs(n);function n(){return es(this,n),t.apply(this,arguments)}return ns(n,[{key:"body",value:function(){document.getElementById("body").innerHTML='\x3c!-- begin: templates/helpPage.html --\x3e\r\n<div class="accordion" id="helpaccordion">\r\n    <div class="card">\r\n        <div class="card-header" id="helphelpheadingOne">\r\n            <h5 class="mb-0">\r\n                <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">\r\n                    About the invasive plants survey\r\n                </button>\r\n            </h5>\r\n        </div>\r\n\r\n        <div id="collapseOne" class="collapse show" aria-labelledby="helpheadingOne" data-parent="#helpaccordion">\r\n            <div class="card-body">\r\n                <div style="float: right; padding-left: 12px; margin: 0;" class="d-none d-md-block"><a href="/Plant_Alert_Flyer.pdf" target="_blank" title="Plant Alert introductory leaflet (pdf)"><img src="/img/leaflet_thumb-or8.png" alt="" width="196"><p>download Plant Alert leaflet (pdf)</p></a></div>\r\n                <p>Invasive non-native plants are causing major problems\r\n                for native biodiversity, ecosystems, infrastructure, the\r\n                built environment and human health. Most of our\r\n                invasive plants were introduced as ornamental garden\r\n                    plants but then escaped into the wider environment.</p>\r\n                <p>While maintaining the benefits and contributions of nonnative plants to our gardens we need to know\r\n                    early which plants might endanger natural habitats in the future. Gardeners can play a crucial role\r\n                    as they may be the first to notice any ornamental plants that show signs of invasiveness.</p>\r\n                <p class="d-block d-md-none"><a href="/Plant_Alert_Flyer.pdf" target="_blank" title="Plant Alert introductory leaflet (pdf)">Download the Plant Alert Leaflet</a></p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="card">\r\n        <div class="card-header" id="helpheadingTwo">\r\n            <h5 class="mb-0">\r\n                <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">\r\n                    What happens to my records?\r\n                </button>\r\n            </h5>\r\n        </div>\r\n        <div id="collapseTwo" class="collapse" aria-labelledby="helpheadingTwo" data-parent="#helpaccordion">\r\n            <div class="card-body">\r\n                <p>A list of reported plants can be accessed on the website. At least once a year we will publish a summary of all records received on the webpage and in the <a href="https://bsbi.org/">BSBI\'s newsletter</a>.\r\n                Data collected will be used in risk assessments of species as well as to provide gardeners and nurseries with advice on which plants could also\r\n                    become difficult to manage in gardens.</p>\r\n                <p>The data will also be included in BSBI\'s permanent archive of plant occurrence records.</p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="card">\r\n        <div class="card-header" id="helpheadingwhatreport">\r\n            <h5 class="mb-0">\r\n                <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseWhatReport" aria-expanded="false" aria-controls="collapseThree">\r\n                    Which plants should be reported?\r\n                </button>\r\n            </h5>\r\n        </div>\r\n        <div id="collapseWhatReport" class="collapse" aria-labelledby="helpheadingwhatreport" data-parent="#helpaccordion">\r\n            <div class="card-body">\r\n                <p>Many ornamental plants in your garden will spread\r\n                    and this is a sign that they are growing well. We only\r\n                    want to know about those that are spreading to an\r\n                    extent that you have to control them to prevent them\r\n                    overgrowing other plants or parts of your garden\r\n                    where you do not want them.</p>\r\n                    <p>If you do not know a plant you want to report or are\r\n                    not sure, you can submit photographs we will use to\r\n                    help with identification</p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="card">\r\n        <div class="card-header" id="helpheadingThree">\r\n            <h5 class="mb-0">\r\n                <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">\r\n                    Help and support\r\n                </button>\r\n            </h5>\r\n        </div>\r\n        <div id="collapseThree" class="collapse" aria-labelledby="helpheadingThree" data-parent="#helpaccordion">\r\n            <div class="card-body">\r\n                <p>If you encounter problems, would like to provide feedback about the survey or for more information about Nyph, please contact\r\n                <a href="mailto:support@nyph.bsbi.org">support@nyph.bsbi.org</a>.</p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="card">\r\n        <div class="card-header" id="helpheadingFour">\r\n            <h5 class="mb-0">\r\n                <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseFour" aria-expanded="false" aria-controls="collapseThree">\r\n                    Links to further information\r\n                </button>\r\n            </h5>\r\n        </div>\r\n        <div id="collapseFour" class="collapse" aria-labelledby="helpheadingFour" data-parent="#helpaccordion">\r\n            <div class="card-body">\r\n                <p>Introductory article published in BSBI news.<br>\r\n                    Judith Conroy &amp; Katharina Dehnen-Schmutz. 2018. <a href="/GardenOrnamentals_BSBI_News_2018.pdf" target="_blank">Can gardeners help identify ornamental plants at risk\r\n                    of becoming invasive?</a> BSBI News. <strong>139</strong>: 51.</p>\r\n                <p>The findings of a pilot study for Nyph have been published:<br>\r\n                    Dehnen-Schmutz, K. &amp; Conroy, J. Biol Invasions (2018) <strong>20</strong>: 3069. <a href="https://doi.org/10.1007/s10530-018-1759-3" target="_blank">https://doi.org/10.1007/s10530-018-1759-3</a></p>\r\n                <p>Background information about invasive species can be found on the <a href="http://www.nonnativespecies.org/" target="_blank">GB Non-native Species Secretariat</a> website.</p>\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="card">\r\n        <div class="card-header" id="helpheadingFive">\r\n            <h5 class="mb-0">\r\n                <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseFive" aria-expanded="false" aria-controls="collapseThree">\r\n                    About us\r\n                </button>\r\n            </h5>\r\n        </div>\r\n        <div id="collapseFive" class="collapse" aria-labelledby="helpheadingFive" data-parent="#helpaccordion">\r\n            <div class="card-body">\r\n                Nyph is a collaboration between and the <a href="https://www.coventry.ac.uk/research/areas-of-research/agroecology-water-resilience/" title="CAWR" target="_blank">Centre for Agroecology, Water and Resilience</a> at Coventry University and the <a href="https://bsbi.org/" target="_blank" title="BSBI">Botanical Society of Britain and Ireland</a>.\r\n                <p>For more information, please contact <a href="mailto:support@nyph.bsbi.org">support@nyph.bsbi.org</a>.</p>\r\n                <p>Follow us on twitter <a href="https://twitter.com/Plant_Alert" target="_blank">@Plant_Alert</a></p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\x3c!-- end: templates/helpPage.html --\x3e\r\n<p>Version 1.0.1.1634291514</p>'}}]),n}(sh),eg=Sf.forEach,tg=kp("forEach")?[].forEach:function(e){return eg(this,e,arguments.length>1?arguments[1]:void 0)},ng=l,rg=Vc,ag=Yc,og=tg,ig=Ye,sg=function(e){if(e&&e.forEach!==og)try{ig(e,"forEach",og)}catch(t){e.forEach=og}};for(var lg in rg)rg[lg]&&sg(ng[lg]&&ng[lg].prototype);sg(ag);var cg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function ug(){return!("undefined"==typeof window||!window.history||!window.history.pushState)}function dg(e,t,n){this.root=null,this._routes=[],this._useHash=t,this._hash=void 0===n?"#":n,this._paused=!1,this._destroyed=!1,this._lastRouteResolved=null,this._notFoundHandler=null,this._defaultHandler=null,this._usePushState=!t&&ug(),this._onLocationChange=this._onLocationChange.bind(this),this._genericHooks=null,this._historyAPIUpdateMethod="pushState",e?this.root=t?e.replace(/\/$/,"/"+this._hash):e.replace(/\/$/,""):t&&(this.root=this._cLoc().split(this._hash)[0].replace(/\/$/,"/"+this._hash)),this._listen(),this.updatePageLinks()}function fg(e){return e instanceof RegExp?e:e.replace(/\/+$/,"").replace(/^\/+/,"^/")}function hg(e,t){return 0===t.length?null:e?e.slice(1,e.length).reduce((function(e,n,r){return null===e&&(e={}),e[t[r]]=decodeURIComponent(n),e}),null):null}function pg(e){var t=[];return{regexp:e instanceof RegExp?e:new RegExp(e.replace(dg.PARAMETER_REGEXP,(function(e,n,r){return t.push(r),dg.REPLACE_VARIABLE_REGEXP})).replace(dg.WILDCARD_REGEXP,dg.REPLACE_WILDCARD)+dg.FOLLOWED_BY_SLASH_REGEXP,dg.MATCH_REGEXP_FLAGS),paramNames:t}}function vg(e){return e.replace(/\/$/,"").split("/").length}function mg(e,t){return vg(t)-vg(e)}function yg(e,t){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.map((function(t){var n=pg(fg(t.route)),r=n.regexp,a=n.paramNames,o=e.replace(/^\/+/,"/").match(r),i=hg(o,a);return!!o&&{match:o,route:t,params:i}})).filter((function(e){return e}))}(e,t)[0]||!1}function gg(e,t){var n=t.map((function(t){return""===t.route||"*"===t.route?e:e.split(new RegExp(t.route+"($|/)"))[0]})),r=fg(e);return n.length>1?n.reduce((function(e,t){return e.length>t.length&&(e=t),e}),n[0]):1===n.length?n[0]:r}function bg(e,t,n){var r,a=function(e){return e.split(/\?(.*)?$/)[0]};return void 0===n&&(n="#"),ug()&&!t?a(e).split(n)[0]:(r=e.split(n)).length>1?a(r[1]):a(r[0])}function wg(e,t,n){if(t&&"object"===(void 0===t?"undefined":cg(t))){if(t.before)return void t.before((function(){var r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];r&&(e(),t.after&&t.after(n))}),n);if(t.after)return e(),void(t.after&&t.after(n))}e()}dg.prototype={helpers:{match:yg,root:gg,clean:fg,getOnlyURL:bg},navigate:function(e,t){var n;return e=e||"",this._usePushState?(n=(n=(t?"":this._getRoot()+"/")+e.replace(/^\/+/,"/")).replace(/([^:])(\/{2,})/g,"$1/"),history[this._historyAPIUpdateMethod]({},"",n),this.resolve()):"undefined"!=typeof window&&(e=e.replace(new RegExp("^"+this._hash),""),window.location.href=window.location.href.replace(/#$/,"").replace(new RegExp(this._hash+".*$"),"")+this._hash+e),this},on:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];if("function"==typeof n[0])this._defaultHandler={handler:n[0],hooks:n[1]};else if(n.length>=2)if("/"===n[0]){var a=n[1];"object"===cg(n[1])&&(a=n[1].uses),this._defaultHandler={handler:a,hooks:n[2]}}else this._add(n[0],n[1],n[2]);else if("object"===cg(n[0])){var o=Object.keys(n[0]).sort(mg);o.forEach((function(t){e.on(t,n[0][t])}))}return this},off:function(e){return null!==this._defaultHandler&&e===this._defaultHandler.handler?this._defaultHandler=null:null!==this._notFoundHandler&&e===this._notFoundHandler.handler&&(this._notFoundHandler=null),this._routes=this._routes.reduce((function(t,n){return n.handler!==e&&t.push(n),t}),[]),this},notFound:function(e,t){return this._notFoundHandler={handler:e,hooks:t},this},resolve:function(e){var t,n,r=this,a=(e||this._cLoc()).replace(this._getRoot(),"");this._useHash&&(a=a.replace(new RegExp("^/"+this._hash),"/"));var o=function(e){return e.split(/\?(.*)?$/).slice(1).join("")}(e||this._cLoc()),i=bg(a,this._useHash,this._hash);return!this._paused&&(this._lastRouteResolved&&i===this._lastRouteResolved.url&&o===this._lastRouteResolved.query?(this._lastRouteResolved.hooks&&this._lastRouteResolved.hooks.already&&this._lastRouteResolved.hooks.already(this._lastRouteResolved.params),!1):(n=yg(i,this._routes))?(this._callLeave(),this._lastRouteResolved={url:i,query:o,hooks:n.route.hooks,params:n.params,name:n.route.name},t=n.route.handler,wg((function(){wg((function(){n.route.route instanceof RegExp?t.apply(void 0,n.match.slice(1,n.match.length)):t(n.params,o)}),n.route.hooks,n.params,r._genericHooks)}),this._genericHooks,n.params),n):this._defaultHandler&&(""===i||"/"===i||i===this._hash||function(e,t,n){if(ug()&&!t)return!1;if(!e.match(n))return!1;var r=e.split(n);return r.length<2||""===r[1]}(i,this._useHash,this._hash))?(wg((function(){wg((function(){r._callLeave(),r._lastRouteResolved={url:i,query:o,hooks:r._defaultHandler.hooks},r._defaultHandler.handler(o)}),r._defaultHandler.hooks)}),this._genericHooks),!0):(this._notFoundHandler&&wg((function(){wg((function(){r._callLeave(),r._lastRouteResolved={url:i,query:o,hooks:r._notFoundHandler.hooks},r._notFoundHandler.handler(o)}),r._notFoundHandler.hooks)}),this._genericHooks),!1))},destroy:function(){this._routes=[],this._destroyed=!0,this._lastRouteResolved=null,this._genericHooks=null,clearTimeout(this._listeningInterval),"undefined"!=typeof window&&(window.removeEventListener("popstate",this._onLocationChange),window.removeEventListener("hashchange",this._onLocationChange))},updatePageLinks:function(){var e=this;"undefined"!=typeof document&&this._findLinks().forEach((function(t){t.hasListenerAttached||(t.addEventListener("click",(function(n){if((n.ctrlKey||n.metaKey)&&"a"==n.target.tagName.toLowerCase())return!1;var r=e.getLinkPath(t);e._destroyed||(n.preventDefault(),e.navigate(r.replace(/\/+$/,"").replace(/^\/+/,"/")))})),t.hasListenerAttached=!0)}))},generate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._routes.reduce((function(n,r){var a;if(r.name===e)for(a in n=r.route,t)n=n.toString().replace(":"+a,t[a]);return n}),"");return this._useHash?this._hash+n:n},link:function(e){return this._getRoot()+e},pause:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._paused=e,this._historyAPIUpdateMethod=e?"replaceState":"pushState"},resume:function(){this.pause(!1)},historyAPIUpdateMethod:function(e){return void 0===e?this._historyAPIUpdateMethod:(this._historyAPIUpdateMethod=e,e)},disableIfAPINotAvailable:function(){ug()||this.destroy()},lastRouteResolved:function(){return this._lastRouteResolved},getLinkPath:function(e){return e.getAttribute("href")},hooks:function(e){this._genericHooks=e},_add:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return"string"==typeof e&&(e=encodeURI(e)),this._routes.push("object"===(void 0===t?"undefined":cg(t))?{route:e,handler:t.uses,name:t.as,hooks:n||t.hooks}:{route:e,handler:t,hooks:n}),this._add},_getRoot:function(){return null!==this.root||(this.root=gg(this._cLoc().split("?")[0],this._routes)),this.root},_listen:function(){var e=this;if(this._usePushState)window.addEventListener("popstate",this._onLocationChange);else if("undefined"!=typeof window&&"onhashchange"in window)window.addEventListener("hashchange",this._onLocationChange);else{var t=this._cLoc(),n=void 0,r=void 0;(r=function(){n=e._cLoc(),t!==n&&(t=n,e.resolve()),e._listeningInterval=setTimeout(r,200)})()}},_cLoc:function(){return"undefined"!=typeof window?void 0!==window.__NAVIGO_WINDOW_LOCATION_MOCK__?window.__NAVIGO_WINDOW_LOCATION_MOCK__:fg(window.location.href):""},_findLinks:function(){return[].slice.call(document.querySelectorAll("[data-navigo]"))},_onLocationChange:function(){this.resolve()},_callLeave:function(){var e=this._lastRouteResolved;e&&e.hooks&&e.hooks.leave&&e.hooks.leave(e.params)}},dg.PARAMETER_REGEXP=/([:*])(\w+)/g,dg.WILDCARD_REGEXP=/\*/g,dg.REPLACE_VARIABLE_REGEXP="([^/]+)",dg.REPLACE_WILDCARD="(?:.*)",dg.FOLLOWED_BY_SLASH_REGEXP="(?:/$|$)",dg.MATCH_REGEXP_FLAGS="";var Eg=function(e){as(n,e);var t=fs(n);function n(){return es(this,n),t.apply(this,arguments)}return ns(n,[{key:"updatePageLinks",value:function(){var e=this;if("undefined"!=typeof document){var t=document.createElement("a");t.href=this.root;var n=t.pathname;this._findLinks().forEach((function(t){t.hasListenerAttached||(t.addEventListener("click",(function(r){if((r.ctrlKey||r.metaKey)&&"a"==r.target.tagName.toLowerCase())return!1;if(!e._destroyed){var a=t.pathname.replace(n,"");r.preventDefault(),e.navigate(a)}})),t.hasListenerAttached=!0)}))}}}]),n}(dg),_g=function(e){as(n,e);var t=fs(n);function n(){var e;es(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return rs(us(e=t.call.apply(t,[this].concat(a))),"app",void 0),rs(us(e),"surveysMenuId",void 0),e}return ns(n,[{key:"setApp",value:function(e){this.app=e,e.addListener(dh.EVENT_SURVEYS_CHANGED,this,this.surveysChangedHandler)}},{key:"initialise",value:function(){var e=this;this.refreshSurveysMenu();var t=document.createElement("div");t.innerHTML='\x3c!-- begin: templates/newSurveyModal.html --\x3e\r\n<div class="modal fade" id="newsurveymodal" tabindex="-1" role="dialog" aria-labelledby="newsurveymodalTitle" aria-hidden="true">\r\n    <div class="modal-dialog modal-dialog-centered" role="document">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <h5 class="modal-title" id="newsurveymodalTitle">Start a new survey?</h5>\r\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\r\n                    <span aria-hidden="true">&times;</span>\r\n                </button>\r\n            </div>\r\n            <div class="modal-body">\r\n                Please confirm that you wish to start a new survey. You only need to do this is you wish to send a set of records from a different locality, otherwise please add more records to your current report.\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-secondary" data-dismiss="modal">Back</button>\r\n                <button type="button" class="btn btn-danger" data-dismiss="modal" id="newsurveymodalconfirmed">New survey</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\x3c!-- end: templates/newSurveyModal.html --\x3e\r\n',document.body.appendChild(t.getElementsByTagName("div")[0]),(t=document.createElement("div")).innerHTML='\x3c!-- begin: templates/resetModal.html --\x3e\r\n<div class="modal fade" id="resetmodal" tabindex="-1" role="dialog" aria-labelledby="resetmodalTitle" aria-hidden="true">\r\n    <div class="modal-dialog modal-dialog-centered" role="document">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <h5 class="modal-title" id="resetmodalTitle">Reset?</h5>\r\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\r\n                    <span aria-hidden="true">&times;</span>\r\n                </button>\r\n            </div>\r\n            <div class="modal-body">\r\n                Please confirm that you wish to clear out your survey data.\r\n                <p>Warning: any unsaved changes will be lost.</p>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-secondary" data-dismiss="modal">Back</button>\r\n                <button type="button" class="btn btn-danger" data-dismiss="modal" id="resetmodalconfirmed">Reset</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\x3c!-- end: templates/resetModal.html --\x3e\r\n',document.body.appendChild(t.getElementsByTagName("div")[0]),(t=document.createElement("div")).innerHTML='\x3c!-- begin: templates/syncSuccessModal.html --\x3e\r\n<div class="modal fade" id="saveallsuccess" tabindex="-1" role="dialog" aria-labelledby="saveallsuccessTitle" aria-hidden="true">\r\n    <div class="modal-dialog modal-dialog-centered" role="document">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <h5 class="modal-title" id="saveallsuccessTitle">All records sent</h5>\r\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\r\n                    <span aria-hidden="true">&times;</span>\r\n                </button>\r\n            </div>\r\n            <div class="modal-body">\r\n                Your data has been synchronised with the server.\r\n                <p>Thank you.</p>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\x3c!-- end: templates/syncSuccessModal.html --\x3e\r\n',document.body.appendChild(t.getElementsByTagName("div")[0]),(t=document.createElement("div")).innerHTML='\x3c!-- begin: templates/syncFailureModal.html --\x3e\r\n<div class="modal fade" id="saveallfailure" tabindex="-1" role="dialog" aria-labelledby="saveallfailureTitle" aria-hidden="true">\r\n    <div class="modal-dialog modal-dialog-centered" role="document">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <h5 class="modal-title" id="saveallfailureTitle">One or more records could not be saved</h5>\r\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\r\n                    <span aria-hidden="true">&times;</span>\r\n                </button>\r\n            </div>\r\n            <div class="modal-body">\r\n                Please check your connection to the network and try again.\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\x3c!-- end: templates/syncFailureModal.html --\x3e\r\n',document.body.appendChild(t.getElementsByTagName("div")[0]),setTimeout((function(){document.getElementById("".concat(n.NEW_SURVEY_MODAL_ID,"confirmed")).addEventListener("click",(function(t){e.app.fireEvent(dh.EVENT_ADD_SURVEY_USER_REQUEST)})),document.getElementById("".concat(n.RESET_MODAL_ID,"confirmed")).addEventListener("click",(function(t){e.app.fireEvent(dh.EVENT_RESET_SURVEYS)}))}),100)}},{key:"surveysChangedHandler",value:function(){this.refreshSurveysMenu()}},{key:"refreshSurveysMenu",value:function(){var e,t=document.getElementById(this.surveysMenuId),n=[],r=this.app.currentSurvey?this.app.currentSurvey.id:null,a=gs(this.app.surveys);try{for(a.s();!(e=a.n()).done;){var o=e.value,i=o[1].generateSurveyName()+(o[0]===r?' <span style="color: green">●</span>':"");n[n.length]='<a class="dropdown-item" href="/app/survey/add/'.concat(o[0],'" data-navigo="survey/add/').concat(o[0],'">').concat(i,"</a>")}}catch(e){a.e(e)}finally{a.f()}t.innerHTML='<a class="dropdown-item" href="/app/survey/save" data-navigo="survey/save">save all</a>\n    <div class="dropdown-divider"></div>\n    '.concat(n.join(""),'\n    <div class="dropdown-divider"></div>\n    <a class="dropdown-item" href="/app/survey/new" data-navigo="survey/new">new survey</a>\n    <a class="dropdown-item" href="/app/survey/reset" data-navigo="survey/reset">reset</a>'),this.app.router.updatePageLinks()}}]),n}(ih);rs(_g,"NEW_SURVEY_MODAL_ID","newsurveymodal"),rs(_g,"RESET_MODAL_ID","resetmodal"),rs(_g,"SAVE_ALL_SUCCESS_MODAL_ID","saveallsuccess"),rs(_g,"SAVE_ALL_FAILURE_MODAL_ID","saveallfailure");var xg=function(e){as(n,e);var t=fs(n);function n(e){var r;return es(this,n),rs(us(r=t.call(this)),"route","/survey/:action/:id"),rs(us(r),"title","NYPH survey picker"),rs(us(r),"app",void 0),rs(us(r),"view",void 0),r.view=e,e.controller=us(r),r.handle=fy.nextHandle,r}return ns(n,[{key:"survey",get:function(){return this.app.currentSurvey}},{key:"registerRoute",value:function(e){e.on("/survey",this.mainRouteHandler.bind(this,"survey","",""),{}),e.on("/survey/new",this.newSurveyHandler.bind(this,"survey","new",""),{before:this.beforeNewHandler.bind(this)}),e.on("/survey/reset",this.mainRouteHandler.bind(this,"survey","reset",""),{before:this.beforeResetHandler.bind(this)}),e.on("/survey/save",this.mainRouteHandler.bind(this,"survey","save",""),{before:this.beforeSaveAllHandler.bind(this)}),e.on("/survey/add/:surveyId",this.addSurveyHandler.bind(this,"survey","add","")),this.app.addListener(dh.EVENT_ADD_SURVEY_USER_REQUEST,this,this.addNewSurveyHandler),this.app.addListener(dh.EVENT_RESET_SURVEYS,this,this.resetSurveysHandler)}},{key:"beforeNewHandler",value:function(e){$("#".concat(_g.NEW_SURVEY_MODAL_ID)).modal(),this.app.router.pause(),window.history.back(),this.app.router.resume(),e(!1)}},{key:"beforeResetHandler",value:function(e){$("#".concat(_g.RESET_MODAL_ID)).modal(),this.app.router.pause(),window.history.back(),this.app.router.resume(),e(!1)}},{key:"beforeSaveAllHandler",value:function(e){this.app.syncAll().then((function(e){console.log("In save all handler, success result: ".concat(e)),$("#".concat(_g.SAVE_ALL_SUCCESS_MODAL_ID)).modal()}),(function(e){console.log("In save all handler, failure result: ".concat(e)),$("#".concat(_g.SAVE_ALL_FAILURE_MODAL_ID)).modal()})).finally((function(){})),this.app.router.pause(),window.history.back(),this.app.router.resume(),e(!1)}},{key:"newSurveyHandler",value:function(e,t,n,r){}},{key:"addNewSurveyHandler",value:function(){console.log("reached addNewSurveyHandler"),this.app.currentControllerHandle=this.handle,this.app.clearCurrentSurvey(),this.app.setNewSurvey(),this.app.router.pause(),this.app.router.navigate("/list/survey/welcome").resume(),this.app.router.resolve()}},{key:"resetSurveysHandler",value:function(){var e=this;this.app.clearLocalForage().then((function(){e.app.reset(),e.addNewSurveyHandler()}))}},{key:"addSurveyHandler",value:function(e,t,n,r){var a=this;console.log("reached addSurveyHandler"),console.log({context:e,params:t,query:r}),this.app.currentControllerHandle=this.handle;var o=r.surveyId;if(!o||!o.match(sp))throw new py("Failed to match survey id '".concat(o,"', the id format appears to be incorrect"));o=o.toLowerCase(),this.app.restoreOccurrences(o).then((function(){a.app.markAllNotPristine(),a.app.router.pause(),a.app.router.navigate("/list").resume(),a.app.router.resolve()}),(function(e){console.log({"failed survey restoration":e})}))}},{key:"mainRouteHandler",value:function(e,t,n,r){console.log("reached special route handler for SurveyPickerController.js"),console.log({context:e,params:t,query:r})}}]),n}(fy);rs(xg,"EVENT_BACK","back");var Sg=function(e){as(n,e);var t=fs(n);function n(){return es(this,n),t.apply(this,arguments)}return ns(n,[{key:"body",value:function(){document.getElementById("body").innerHTML="<p>Placeholder survey picker content.</p>"}}]),n}(sh),Ig=function(e){as(n,e);var t=fs(n);function n(){var e;es(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return rs(us(e=t.call.apply(t,[this].concat(a))),"surveysMenuId","surveysmenu"),e}return n}(_g),kg=function(){function e(){es(this,e)}return ns(e,null,[{key:"taxaLoadedEntryPoint",value:function(){for(wp.rawTaxa=BsbiDb.TaxonNames;e.callbackStack.length;){var t=e.callbackStack.shift();try{t()}catch(e){console.log({"Exception after taxon load":e})}}}},{key:"onceTaxaLoaded",value:function(){return BsbiDb.hasOwnProperty("TaxonNames")?Promise.resolve():(BsbiDb.taxonNamesLoadedEntryPoint||(BsbiDb.taxonNamesLoadedEntryPoint=e.taxaLoadedEntryPoint),new Promise((function(t){e.callbackStack.push(t)})))}}]),e}();rs(kg,"callbackStack",[]);var Tg={},Rg=ee;Tg.f=Rg;var Ag=l,Og=_,Cg=Tg,Ng=oe.f,Lg=function(e){var t=Ag.Symbol||(Ag.Symbol={});Og(t,e)||Ng(t,e,{value:Cg.f(e)})},Mg=vr,Pg=l,Hg=O,Dg=ae,jg=V,Fg=F,Bg=_,Ug=Ls,Vg=k,qg=se,Wg=ge,Yg=ve,Gg=b,$g=ln,zg=He,Kg=Oc,Xg=Ve,Jg=Tl,Qg=dl,Zg=yn,eb=bd,tb=qn,nb=Jt,rb=oe,ab=Qt,ob=re.exports,ib=c.exports,sb=st,lb=I,cb=ee,ub=Tg,db=Lg,fb=Tr,hb=Et,pb=Sf.forEach,vb=it("hidden"),mb=cb("toPrimitive"),yb=hb.set,gb=hb.getterFor("Symbol"),bb=Object.prototype,wb=Pg.Symbol,Eb=Hg("JSON","stringify"),_b=nb.f,xb=rb.f,Sb=eb.f,Ib=ab.f,kb=ib("symbols"),Tb=ib("op-symbols"),Rb=ib("string-to-symbol-registry"),Ab=ib("symbol-to-string-registry"),Ob=ib("wks"),Cb=Pg.QObject,Nb=!Cb||!Cb.prototype||!Cb.prototype.findChild,Lb=Dg&&Fg((function(){return 7!=Jg(xb({},"a",{get:function(){return xb(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=_b(bb,t);r&&delete bb[t],xb(e,t,n),r&&e!==bb&&xb(bb,t,r)}:xb,Mb=function(e,t){var n=kb[e]=Jg(wb.prototype);return yb(n,{type:"Symbol",tag:e,description:t}),Dg||(n.description=t),n},Pb=function(e,t,n){e===bb&&Pb(Tb,t,n),Yg(e);var r=zg(t);return Yg(n),Bg(kb,r)?(n.enumerable?(Bg(e,vb)&&e[vb][r]&&(e[vb][r]=!1),n=Jg(n,{enumerable:Xg(0,!1)})):(Bg(e,vb)||xb(e,vb,Xg(1,{})),e[vb][r]=!0),Lb(e,r,n)):xb(e,r,n)},Hb=function(e,t){Yg(e);var n=$g(t),r=Qg(n).concat(Bb(n));return pb(r,(function(t){Dg&&!Db.call(n,t)||Pb(e,t,n[t])})),e},Db=function(e){var t=zg(e),n=Ib.call(this,t);return!(this===bb&&Bg(kb,t)&&!Bg(Tb,t))&&(!(n||!Bg(this,t)||!Bg(kb,t)||Bg(this,vb)&&this[vb][t])||n)},jb=function(e,t){var n=$g(e),r=zg(t);if(n!==bb||!Bg(kb,r)||Bg(Tb,r)){var a=_b(n,r);return!a||!Bg(kb,r)||Bg(n,vb)&&n[vb][r]||(a.enumerable=!0),a}},Fb=function(e){var t=Sb($g(e)),n=[];return pb(t,(function(e){Bg(kb,e)||Bg(sb,e)||n.push(e)})),n},Bb=function(e){var t=e===bb,n=Sb(t?Tb:$g(e)),r=[];return pb(n,(function(e){!Bg(kb,e)||t&&!Bg(bb,e)||r.push(kb[e])})),r};(jg||(ob((wb=function(){if(this instanceof wb)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?Kg(arguments[0]):void 0,t=lb(e),n=function(e){this===bb&&n.call(Tb,e),Bg(this,vb)&&Bg(this[vb],t)&&(this[vb][t]=!1),Lb(this,t,Xg(1,e))};return Dg&&Nb&&Lb(bb,t,{configurable:!0,set:n}),Mb(t,e)}).prototype,"toString",(function(){return gb(this).tag})),ob(wb,"withoutSetter",(function(e){return Mb(lb(e),e)})),ab.f=Db,rb.f=Pb,nb.f=jb,Zg.f=eb.f=Fb,tb.f=Bb,ub.f=function(e){return Mb(cb(e),e)},Dg&&(xb(wb.prototype,"description",{configurable:!0,get:function(){return gb(this).description}}),ob(bb,"propertyIsEnumerable",Db,{unsafe:!0}))),Mg({global:!0,wrap:!0,forced:!jg,sham:!jg},{Symbol:wb}),pb(Qg(Ob),(function(e){db(e)})),Mg({target:"Symbol",stat:!0,forced:!jg},{for:function(e){var t=Kg(e);if(Bg(Rb,t))return Rb[t];var n=wb(t);return Rb[t]=n,Ab[n]=t,n},keyFor:function(e){if(!Wg(e))throw TypeError(e+" is not a symbol");if(Bg(Ab,e))return Ab[e]},useSetter:function(){Nb=!0},useSimple:function(){Nb=!1}}),Mg({target:"Object",stat:!0,forced:!jg,sham:!Dg},{create:function(e,t){return void 0===t?Jg(e):Hb(Jg(e),t)},defineProperty:Pb,defineProperties:Hb,getOwnPropertyDescriptor:jb}),Mg({target:"Object",stat:!0,forced:!jg},{getOwnPropertyNames:Fb,getOwnPropertySymbols:Bb}),Mg({target:"Object",stat:!0,forced:Fg((function(){tb.f(1)}))},{getOwnPropertySymbols:function(e){return tb.f(Gg(e))}}),Eb)&&Mg({target:"JSON",stat:!0,forced:!jg||Fg((function(){var e=wb();return"[null]"!=Eb([e])||"{}"!=Eb({a:e})||"{}"!=Eb(Object(e))}))},{stringify:function(e,t,n){for(var r,a=[e],o=1;arguments.length>o;)a.push(arguments[o++]);if(r=t,(qg(t)||void 0!==e)&&!Wg(e))return Ug(t)||(t=function(e,t){if(Vg(r)&&(t=r.call(this,e,t)),!Wg(t))return t}),a[1]=t,Eb.apply(null,a)}});if(!wb.prototype[mb]){var Ub=wb.prototype.valueOf;ob(wb.prototype,mb,(function(){return Ub.apply(this,arguments)}))}fb(wb,"Symbol"),sb[vb]=!0;var Vb=vr,qb=ae,Wb=l,Yb=_,Gb=k,$b=se,zb=oe.f,Kb=Qn,Xb=Wb.Symbol;if(qb&&Gb(Xb)&&(!("description"in Xb.prototype)||void 0!==Xb().description)){var Jb={},Qb=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof Qb?new Xb(e):void 0===e?Xb():Xb(e);return""===e&&(Jb[t]=!0),t};Kb(Qb,Xb);var Zb=Qb.prototype=Xb.prototype;Zb.constructor=Qb;var ew=Zb.toString,tw="Symbol(test)"==String(Xb("test")),nw=/^Symbol\((.*)\)[^)]+$/;zb(Zb,"description",{configurable:!0,get:function(){var e=$b(this)?this.valueOf():this,t=ew.call(e);if(Yb(Jb,e))return"";var n=tw?t.slice(7,-1):t.replace(nw,"$1");return""===n?void 0:n}}),Vb({global:!0,forced:!0},{Symbol:Qb})}Lg("asyncIterator"),Lg("hasInstance"),Lg("isConcatSpreadable"),Lg("iterator"),Lg("match"),Lg("matchAll"),Lg("replace"),Lg("search"),Lg("species"),Lg("split"),Lg("toPrimitive"),Lg("toStringTag"),Lg("unscopables");var rw=se,aw=Ye,ow=vr,iw=ql,sw=xr,lw=Qn,cw=Tl,uw=Ye,dw=Ve,fw=function(e,t){rw(t)&&"cause"in t&&aw(e,"cause",t.cause)},hw=sa,pw=Oc,vw=function(e,t){var n=this,r=arguments.length>2?arguments[2]:void 0;if(!(n instanceof vw))return new vw(e,t,r);sw&&(n=sw(new Error(void 0),iw(n))),void 0!==t&&uw(n,"message",pw(t)),fw(n,r);var a=[];return hw(e,a.push,{that:a}),uw(n,"errors",a),n};sw?sw(vw,Error):lw(vw,Error),vw.prototype=cw(Error.prototype,{constructor:dw(1,vw),message:dw(1,""),name:dw(1,"AggregateError")}),ow({global:!0},{AggregateError:vw});var mw=b,yw=An,gw=wn,bw=Pl;vr({target:"Array",proto:!0},{at:function(e){var t=mw(this),n=yw(t),r=gw(e),a=r>=0?r:n+r;return a<0||a>=n?void 0:t[a]}}),bw("at");var ww=b,Ew=Sn,_w=An,xw=Math.min,Sw=[].copyWithin||function(e,t){var n=ww(this),r=_w(n),a=Ew(e,r),o=Ew(t,r),i=arguments.length>2?arguments[2]:void 0,s=xw((void 0===i?r:Ew(i,r))-o,r-a),l=1;for(o<a&&a<o+s&&(l=-1,o+=s-1,a+=s-1);s-- >0;)o in n?n[a]=n[o]:delete n[a],a+=l,o+=l;return n},Iw=Pl;vr({target:"Array",proto:!0},{copyWithin:Sw}),Iw("copyWithin");var kw=Sf.every;vr({target:"Array",proto:!0,forced:!kp("every")},{every:function(e){return kw(this,e,arguments.length>1?arguments[1]:void 0)}});var Tw=b,Rw=Sn,Aw=An,Ow=function(e){for(var t=Tw(this),n=Aw(t),r=arguments.length,a=Rw(r>1?arguments[1]:void 0,n),o=r>2?arguments[2]:void 0,i=void 0===o?n:Rw(o,n);i>a;)t[a++]=e;return t},Cw=Pl;vr({target:"Array",proto:!0},{fill:Ow}),Cw("fill");var Nw=Sf.filter;vr({target:"Array",proto:!0,forced:!$s("filter")},{filter:function(e){return Nw(this,e,arguments.length>1?arguments[1]:void 0)}});var Lw=vr,Mw=Sf.findIndex,Pw=Pl,Hw=!0;"findIndex"in[]&&Array(1).findIndex((function(){Hw=!1})),Lw({target:"Array",proto:!0,forced:Hw},{findIndex:function(e){return Mw(this,e,arguments.length>1?arguments[1]:void 0)}}),Pw("findIndex");var Dw=Ls,jw=An,Fw=Br,Bw=function(e,t,n,r,a,o,i,s){for(var l,c,u=a,d=0,f=!!i&&Fw(i,s,3);d<r;){if(d in n){if(l=f?f(n[d],d,t):n[d],o>0&&Dw(l))c=jw(l),u=Bw(e,t,l,c,u,o-1)-1;else{if(u>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[u]=l}u++}d++}return u},Uw=Bw,Vw=Uw,qw=b,Ww=An,Yw=wn,Gw=qs;vr({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=qw(this),n=Ww(t),r=Gw(t,0);return r.length=Vw(r,t,t,n,0,void 0===e?1:Yw(e)),r}});var $w=Uw,zw=_e,Kw=b,Xw=An,Jw=qs;vr({target:"Array",proto:!0},{flatMap:function(e){var t,n=Kw(this),r=Xw(n);return zw(e),(t=Jw(n,0)).length=$w(t,n,n,r,0,1,e,arguments.length>1?arguments[1]:void 0),t}});vr({target:"Array",proto:!0,forced:[].forEach!=tg},{forEach:tg});var Qw=ve,Zw=Qr,eE=Br,tE=b,nE=function(e,t,n,r){try{return r?t(Qw(n)[0],n[1]):t(n)}catch(t){Zw(e,"throw",t)}},rE=jr,aE=Ta,oE=An,iE=Ds,sE=Kr,lE=Yr,cE=function(e){var t=tE(e),n=aE(this),r=arguments.length,a=r>1?arguments[1]:void 0,o=void 0!==a;o&&(a=eE(a,r>2?arguments[2]:void 0,2));var i,s,l,c,u,d,f=lE(t),h=0;if(!f||this==Array&&rE(f))for(i=oE(t),s=n?new this(i):Array(i);i>h;h++)d=o?a(t[h],h):t[h],iE(s,h,d);else for(u=(c=sE(t,f)).next,s=n?new this:[];!(l=u.call(c)).done;h++)d=o?nE(c,a,[l.value,h],!0):l.value,iE(s,h,d);return s.length=h,s},uE=cE;vr({target:"Array",stat:!0,forced:!ma((function(e){Array.from(e)}))},{from:uE});var dE=vr,fE=Mn.indexOf,hE=kp,pE=[].indexOf,vE=!!pE&&1/[1].indexOf(1,-0)<0,mE=hE("indexOf");dE({target:"Array",proto:!0,forced:vE||!mE},{indexOf:function(e){return vE?pE.apply(this,arguments)||0:fE(this,e,arguments.length>1?arguments[1]:void 0)}}),vr({target:"Array",stat:!0},{isArray:Ls});var yE=ln,gE=wn,bE=An,wE=kp,EE=Math.min,_E=[].lastIndexOf,xE=!!_E&&1/[1].lastIndexOf(1,-0)<0,SE=wE("lastIndexOf"),IE=xE||!SE?function(e){if(xE)return _E.apply(this,arguments)||0;var t=yE(this),n=bE(t),r=n-1;for(arguments.length>1&&(r=EE(r,gE(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}:_E;vr({target:"Array",proto:!0,forced:IE!==[].lastIndexOf},{lastIndexOf:IE});var kE=Sf.map;vr({target:"Array",proto:!0,forced:!$s("map")},{map:function(e){return kE(this,e,arguments.length>1?arguments[1]:void 0)}});var TE=Ta,RE=Ds;vr({target:"Array",stat:!0,forced:F((function(){function e(){}return!(Array.of.call(e)instanceof e)}))},{of:function(){for(var e=0,t=arguments.length,n=new(TE(this)?this:Array)(t);t>e;)RE(n,e,arguments[e++]);return n.length=t,n}});var AE=_e,OE=b,CE=an,NE=An,LE=function(e){return function(t,n,r,a){AE(n);var o=OE(t),i=CE(o),s=NE(o),l=e?s-1:0,c=e?-1:1;if(r<2)for(;;){if(l in i){a=i[l],l+=c;break}if(l+=c,e?l<0:s<=l)throw TypeError("Reduce of empty array with no initial value")}for(;e?l>=0:s>l;l+=c)l in i&&(a=n(a,i[l],l,o));return a}},ME={left:LE(!1),right:LE(!0)},PE=ME.left,HE=j,DE=Da;vr({target:"Array",proto:!0,forced:!kp("reduce")||!DE&&HE>79&&HE<83},{reduce:function(e){return PE(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}});var jE=ME.right,FE=j,BE=Da;vr({target:"Array",proto:!0,forced:!kp("reduceRight")||!BE&&FE>79&&FE<83},{reduceRight:function(e){return jE(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}});var UE=Ls,VE=[].reverse,qE=[1,2];vr({target:"Array",proto:!0,forced:String(qE)===String(qE.reverse())},{reverse:function(){return UE(this)&&(this.length=this.length),VE.call(this)}});var WE=Sf.some;vr({target:"Array",proto:!0,forced:!kp("some")},{some:function(e){return WE(this,e,arguments.length>1?arguments[1]:void 0)}}),Nr("Array"),Pl("flat"),Pl("flatMap");var YE="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,GE=wn,$E=Tn,zE=function(e){if(void 0===e)return 0;var t=GE(e),n=$E(t);if(t!==n)throw RangeError("Wrong length or index");return n},KE=Math.abs,XE=Math.pow,JE=Math.floor,QE=Math.log,ZE=Math.LN2,e_=l,t_=ae,n_=YE,r_=Tt,a_=Ye,o_=gr,i_=F,s_=Lr,l_=wn,c_=Tn,u_=zE,d_={pack:function(e,t,n){var r,a,o,i=new Array(n),s=8*n-t-1,l=(1<<s)-1,c=l>>1,u=23===t?XE(2,-24)-XE(2,-77):0,d=e<0||0===e&&1/e<0?1:0,f=0;for((e=KE(e))!=e||e===1/0?(a=e!=e?1:0,r=l):(r=JE(QE(e)/ZE),e*(o=XE(2,-r))<1&&(r--,o*=2),(e+=r+c>=1?u/o:u*XE(2,1-c))*o>=2&&(r++,o/=2),r+c>=l?(a=0,r=l):r+c>=1?(a=(e*o-1)*XE(2,t),r+=c):(a=e*XE(2,c-1)*XE(2,t),r=0));t>=8;i[f++]=255&a,a/=256,t-=8);for(r=r<<t|a,s+=t;s>0;i[f++]=255&r,r/=256,s-=8);return i[--f]|=128*d,i},unpack:function(e,t){var n,r=e.length,a=8*r-t-1,o=(1<<a)-1,i=o>>1,s=a-7,l=r-1,c=e[l--],u=127&c;for(c>>=7;s>0;u=256*u+e[l],l--,s-=8);for(n=u&(1<<-s)-1,u>>=-s,s+=t;s>0;n=256*n+e[l],l--,s-=8);if(0===u)u=1-i;else{if(u===o)return n?NaN:c?-1/0:1/0;n+=XE(2,t),u-=i}return(c?-1:1)*n*XE(2,u-t)}},f_=ql,h_=xr,p_=yn.f,v_=oe.f,m_=Ow,y_=Tr,g_=r_.PROPER,b_=r_.CONFIGURABLE,w_=Et.get,E_=Et.set,__=e_.ArrayBuffer,x_=__,S_=e_.DataView,I_=S_&&S_.prototype,k_=Object.prototype,T_=e_.RangeError,R_=d_.pack,A_=d_.unpack,O_=function(e){return[255&e]},C_=function(e){return[255&e,e>>8&255]},N_=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},L_=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},M_=function(e){return R_(e,23,4)},P_=function(e){return R_(e,52,8)},H_=function(e,t){v_(e.prototype,t,{get:function(){return w_(this)[t]}})},D_=function(e,t,n,r){var a=u_(n),o=w_(e);if(a+t>o.byteLength)throw T_("Wrong index");var i=w_(o.buffer).bytes,s=a+o.byteOffset,l=i.slice(s,s+t);return r?l:l.reverse()},j_=function(e,t,n,r,a,o){var i=u_(n),s=w_(e);if(i+t>s.byteLength)throw T_("Wrong index");for(var l=w_(s.buffer).bytes,c=i+s.byteOffset,u=r(+a),d=0;d<t;d++)l[c+d]=u[o?d:t-d-1]};if(n_){var F_=g_&&"ArrayBuffer"!==__.name;if(i_((function(){__(1)}))&&i_((function(){new __(-1)}))&&!i_((function(){return new __,new __(1.5),new __(NaN),F_&&!b_})))F_&&b_&&a_(__,"name","ArrayBuffer");else{for(var B_,U_=(x_=function(e){return s_(this,x_),new __(u_(e))}).prototype=__.prototype,V_=p_(__),q_=0;V_.length>q_;)(B_=V_[q_++])in x_||a_(x_,B_,__[B_]);U_.constructor=x_}h_&&f_(I_)!==k_&&h_(I_,k_);var W_=new S_(new x_(2)),Y_=I_.setInt8;W_.setInt8(0,2147483648),W_.setInt8(1,2147483649),!W_.getInt8(0)&&W_.getInt8(1)||o_(I_,{setInt8:function(e,t){Y_.call(this,e,t<<24>>24)},setUint8:function(e,t){Y_.call(this,e,t<<24>>24)}},{unsafe:!0})}else x_=function(e){s_(this,x_,"ArrayBuffer");var t=u_(e);E_(this,{bytes:m_.call(new Array(t),0),byteLength:t}),t_||(this.byteLength=t)},S_=function(e,t,n){s_(this,S_,"DataView"),s_(e,x_,"DataView");var r=w_(e).byteLength,a=l_(t);if(a<0||a>r)throw T_("Wrong offset");if(a+(n=void 0===n?r-a:c_(n))>r)throw T_("Wrong length");E_(this,{buffer:e,byteLength:n,byteOffset:a}),t_||(this.buffer=e,this.byteLength=n,this.byteOffset=a)},t_&&(H_(x_,"byteLength"),H_(S_,"buffer"),H_(S_,"byteLength"),H_(S_,"byteOffset")),o_(S_.prototype,{getInt8:function(e){return D_(this,1,e)[0]<<24>>24},getUint8:function(e){return D_(this,1,e)[0]},getInt16:function(e){var t=D_(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=D_(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return L_(D_(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return L_(D_(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return A_(D_(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return A_(D_(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){j_(this,1,e,O_,t)},setUint8:function(e,t){j_(this,1,e,O_,t)},setInt16:function(e,t){j_(this,2,e,C_,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){j_(this,2,e,C_,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){j_(this,4,e,N_,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){j_(this,4,e,N_,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){j_(this,4,e,M_,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){j_(this,8,e,P_,t,arguments.length>2?arguments[2]:void 0)}});y_(x_,"ArrayBuffer"),y_(S_,"DataView");var G_={ArrayBuffer:x_,DataView:S_},$_=Nr,z_=G_.ArrayBuffer;vr({global:!0,forced:l.ArrayBuffer!==z_},{ArrayBuffer:z_}),$_("ArrayBuffer");var K_,X_,J_,Q_=YE,Z_=ae,ex=l,tx=k,nx=se,rx=_,ax=Yt,ox=be,ix=Ye,sx=re.exports,lx=oe.f,cx=ql,ux=xr,dx=ee,fx=I,hx=ex.Int8Array,px=hx&&hx.prototype,vx=ex.Uint8ClampedArray,mx=vx&&vx.prototype,yx=hx&&cx(hx),gx=px&&cx(px),bx=Object.prototype,wx=bx.isPrototypeOf,Ex=dx("toStringTag"),_x=fx("TYPED_ARRAY_TAG"),xx=fx("TYPED_ARRAY_CONSTRUCTOR"),Sx=Q_&&!!ux&&"Opera"!==ax(ex.opera),Ix=!1,kx={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Tx={BigInt64Array:8,BigUint64Array:8},Rx=function(e){if(!nx(e))return!1;var t=ax(e);return rx(kx,t)||rx(Tx,t)};for(K_ in kx)(J_=(X_=ex[K_])&&X_.prototype)?ix(J_,xx,X_):Sx=!1;for(K_ in Tx)(J_=(X_=ex[K_])&&X_.prototype)&&ix(J_,xx,X_);if((!Sx||!tx(yx)||yx===Function.prototype)&&(yx=function(){throw TypeError("Incorrect invocation")},Sx))for(K_ in kx)ex[K_]&&ux(ex[K_],yx);if((!Sx||!gx||gx===bx)&&(gx=yx.prototype,Sx))for(K_ in kx)ex[K_]&&ux(ex[K_].prototype,gx);if(Sx&&cx(mx)!==gx&&ux(mx,gx),Z_&&!rx(gx,Ex))for(K_ in Ix=!0,lx(gx,Ex,{get:function(){return nx(this)?this[_x]:void 0}}),kx)ex[K_]&&ix(ex[K_],_x,K_);var Ax={NATIVE_ARRAY_BUFFER_VIEWS:Sx,TYPED_ARRAY_CONSTRUCTOR:xx,TYPED_ARRAY_TAG:Ix&&_x,aTypedArray:function(e){if(Rx(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(tx(e)&&(!ux||wx.call(yx,e)))return e;throw TypeError(ox(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n){if(Z_){if(n)for(var r in kx){var a=ex[r];if(a&&rx(a.prototype,e))try{delete a.prototype[e]}catch(e){}}gx[e]&&!n||sx(gx,e,n?t:Sx&&px[e]||t)}},exportTypedArrayStaticMethod:function(e,t,n){var r,a;if(Z_){if(ux){if(n)for(r in kx)if((a=ex[r])&&rx(a,e))try{delete a[e]}catch(e){}if(yx[e]&&!n)return;try{return sx(yx,e,n?t:Sx&&yx[e]||t)}catch(e){}}for(r in kx)!(a=ex[r])||a[e]&&!n||sx(a,e,t)}},isView:function(e){if(!nx(e))return!1;var t=ax(e);return"DataView"===t||rx(kx,t)||rx(Tx,t)},isTypedArray:Rx,TypedArray:yx,TypedArrayPrototype:gx};vr({target:"ArrayBuffer",stat:!0,forced:!Ax.NATIVE_ARRAY_BUFFER_VIEWS},{isView:Ax.isView});var Ox=vr,Cx=F,Nx=ve,Lx=Sn,Mx=Tn,Px=Ma,Hx=G_.ArrayBuffer,Dx=G_.DataView,jx=Hx.prototype.slice;Ox({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:Cx((function(){return!new Hx(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(void 0!==jx&&void 0===t)return jx.call(Nx(this),e);for(var n=Nx(this).byteLength,r=Lx(e,n),a=Lx(void 0===t?n:t,n),o=new(Px(this,Hx))(Mx(a-r)),i=new Dx(this),s=new Dx(o),l=0;r<a;)s.setUint8(l++,i.getUint8(r++));return o}}),vr({global:!0,forced:!YE},{DataView:G_.DataView});var Fx=vr,Bx=F((function(){return 120!==new Date(16e11).getYear()})),Ux=Date.prototype.getFullYear;Fx({target:"Date",proto:!0,forced:Bx},{getYear:function(){return Ux.call(this)-1900}}),vr({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}});var Vx=vr,qx=wn,Wx=Date.prototype.getTime,Yx=Date.prototype.setFullYear;Vx({target:"Date",proto:!0},{setYear:function(e){Wx.call(this);var t=qx(e),n=0<=t&&t<=99?t+1900:t;return Yx.call(this,n)}}),vr({target:"Date",proto:!0},{toGMTString:Date.prototype.toUTCString});var Gx=wn,$x=Oc,zx=y,Kx=function(e){var t=$x(zx(this)),n="",r=Gx(e);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n},Xx=Tn,Jx=Oc,Qx=Kx,Zx=y,eS=Math.ceil,tS=function(e){return function(t,n,r){var a,o,i=Jx(Zx(t)),s=Xx(n),l=i.length,c=void 0===r?" ":Jx(r);return s<=l||""==c?i:(a=s-l,(o=Qx.call(c,eS(a/c.length))).length>a&&(o=o.slice(0,a)),e?i+o:o+i)}},nS={start:tS(!1),end:tS(!0)},rS=F,aS=nS.start,oS=Math.abs,iS=Date.prototype,sS=iS.getTime,lS=iS.toISOString,cS=rS((function(){return"0385-07-25T07:06:39.999Z"!=lS.call(new Date(-50000000000001))}))||!rS((function(){lS.call(new Date(NaN))}))?function(){if(!isFinite(sS.call(this)))throw RangeError("Invalid time value");var e=this.getUTCFullYear(),t=this.getUTCMilliseconds(),n=e<0?"-":e>9999?"+":"";return n+aS(oS(e),n?6:4,0)+"-"+aS(this.getUTCMonth()+1,2,0)+"-"+aS(this.getUTCDate(),2,0)+"T"+aS(this.getUTCHours(),2,0)+":"+aS(this.getUTCMinutes(),2,0)+":"+aS(this.getUTCSeconds(),2,0)+"."+aS(t,3,0)+"Z"}:lS;vr({target:"Date",proto:!0,forced:Date.prototype.toISOString!==cS},{toISOString:cS});var uS=b,dS=Le;vr({target:"Date",proto:!0,forced:F((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}))},{toJSON:function(e){var t=uS(this),n=dS(t,"number");return"number"!=typeof n||isFinite(n)?t.toISOString():null}});var fS=ve,hS=Te,pS=re.exports,vS=function(e){if(fS(this),"string"===e||"default"===e)e="string";else if("number"!==e)throw TypeError("Incorrect hint");return hS(this,e)},mS=ee("toPrimitive"),yS=Date.prototype;mS in yS||pS(yS,mS,vS);var gS=re.exports,bS=Date.prototype,wS=bS.toString,ES=bS.getTime;"Invalid Date"!=String(new Date(NaN))&&gS(bS,"toString",(function(){var e=ES.call(this);return e==e?wS.call(this):"Invalid Date"}));var _S=Oc,xS=/[\w*+\-./@]/,SS=function(e,t){for(var n=e.toString(16);n.length<t;)n="0"+n;return n};vr({global:!0},{escape:function(e){for(var t,n,r=_S(e),a="",o=r.length,i=0;i<o;)t=r.charAt(i++),xS.test(t)?a+=t:a+=(n=t.charCodeAt(0))<256?"%"+SS(n,2):"%u"+SS(n,4).toUpperCase();return a}});var IS=_e,kS=se,TS=[].slice,RS={},AS=function(e,t,n){if(!(t in RS)){for(var r=[],a=0;a<t;a++)r[a]="a["+a+"]";RS[t]=Function("C,a","return new C("+r.join(",")+")")}return RS[t](e,n)},OS=Function.bind||function(e){var t=IS(this),n=TS.call(arguments,1),r=function(){var a=n.concat(TS.call(arguments));return this instanceof r?AS(t,a.length,a):t.apply(e,a)};return kS(t.prototype)&&(r.prototype=t.prototype),r};vr({target:"Function",proto:!0},{bind:OS});var CS=k,NS=se,LS=oe,MS=ql,PS=ee("hasInstance"),HS=Function.prototype;PS in HS||LS.f(HS,PS,{value:function(e){if(!CS(this)||!NS(e))return!1;if(!NS(this.prototype))return e instanceof this;for(;e=MS(e);)if(this.prototype===e)return!0;return!1}}),vr({global:!0},{globalThis:l});var DS=vr,jS=F,FS=O("JSON","stringify"),BS=/[\uD800-\uDFFF]/g,US=/^[\uD800-\uDBFF]$/,VS=/^[\uDC00-\uDFFF]$/,qS=function(e,t,n){var r=n.charAt(t-1),a=n.charAt(t+1);return US.test(e)&&!VS.test(a)||VS.test(e)&&!US.test(r)?"\\u"+e.charCodeAt(0).toString(16):e},WS=jS((function(){return'"\\udf06\\ud834"'!==FS("\udf06\ud834")||'"\\udead"'!==FS("\udead")}));FS&&DS({target:"JSON",stat:!0,forced:WS},{stringify:function(e,t,n){var r=FS.apply(null,arguments);return"string"==typeof r?r.replace(BS,qS):r}}),Tr(l.JSON,"JSON",!0);var YS=Math.log,GS=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:YS(1+e)},$S=vr,zS=GS,KS=Math.acosh,XS=Math.log,JS=Math.sqrt,QS=Math.LN2;$S({target:"Math",stat:!0,forced:!KS||710!=Math.floor(KS(Number.MAX_VALUE))||KS(1/0)!=1/0},{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?XS(e)+QS:zS(e-1+JS(e-1)*JS(e+1))}});var ZS=vr,eI=Math.asinh,tI=Math.log,nI=Math.sqrt;ZS({target:"Math",stat:!0,forced:!(eI&&1/eI(0)>0)},{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):tI(t+nI(t*t+1)):t}});var rI=vr,aI=Math.atanh,oI=Math.log;rI({target:"Math",stat:!0,forced:!(aI&&1/aI(-0)<0)},{atanh:function(e){return 0==(e=+e)?e:oI((1+e)/(1-e))/2}});var iI=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1},sI=vr,lI=iI,cI=Math.abs,uI=Math.pow;sI({target:"Math",stat:!0},{cbrt:function(e){return lI(e=+e)*uI(cI(e),1/3)}});var dI=vr,fI=Math.floor,hI=Math.log,pI=Math.LOG2E;dI({target:"Math",stat:!0},{clz32:function(e){return(e>>>=0)?31-fI(hI(e+.5)*pI):32}});var vI=Math.expm1,mI=Math.exp,yI=!vI||vI(10)>22025.465794806718||vI(10)<22025.465794806718||-2e-17!=vI(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:mI(e)-1}:vI,gI=vr,bI=yI,wI=Math.cosh,EI=Math.abs,_I=Math.E;gI({target:"Math",stat:!0,forced:!wI||wI(710)===1/0},{cosh:function(e){var t=bI(EI(e)-1)+1;return(t+1/(t*_I*_I))*(_I/2)}});var xI=yI;vr({target:"Math",stat:!0,forced:xI!=Math.expm1},{expm1:xI});var SI=iI,II=Math.abs,kI=Math.pow,TI=kI(2,-52),RI=kI(2,-23),AI=kI(2,127)*(2-RI),OI=kI(2,-126);vr({target:"Math",stat:!0},{fround:Math.fround||function(e){var t,n,r=II(e),a=SI(e);return r<OI?a*(r/OI/RI+1/TI-1/TI)*OI*RI:(n=(t=(1+RI/TI)*r)-(t-r))>AI||n!=n?a*(1/0):a*n}});var CI=vr,NI=Math.hypot,LI=Math.abs,MI=Math.sqrt;CI({target:"Math",stat:!0,forced:!!NI&&NI(1/0,NaN)!==1/0},{hypot:function(e,t){for(var n,r,a=0,o=0,i=arguments.length,s=0;o<i;)s<(n=LI(arguments[o++]))?(a=a*(r=s/n)*r+1,s=n):a+=n>0?(r=n/s)*r:n;return s===1/0?1/0:s*MI(a)}});var PI=vr,HI=F,DI=Math.imul;PI({target:"Math",stat:!0,forced:HI((function(){return-5!=DI(4294967295,5)||2!=DI.length}))},{imul:function(e,t){var n=+e,r=+t,a=65535&n,o=65535&r;return 0|a*o+((65535&n>>>16)*o+a*(65535&r>>>16)<<16>>>0)}});var jI=vr,FI=Math.log,BI=Math.LOG10E;jI({target:"Math",stat:!0},{log10:function(e){return FI(e)*BI}}),vr({target:"Math",stat:!0},{log1p:GS});var UI=vr,VI=Math.log,qI=Math.LN2;UI({target:"Math",stat:!0},{log2:function(e){return VI(e)/qI}}),vr({target:"Math",stat:!0},{sign:iI});var WI=vr,YI=F,GI=yI,$I=Math.abs,zI=Math.exp,KI=Math.E;WI({target:"Math",stat:!0,forced:YI((function(){return-2e-17!=Math.sinh(-2e-17)}))},{sinh:function(e){return $I(e=+e)<1?(GI(e)-GI(-e))/2:(zI(e-1)-zI(-e-1))*(KI/2)}});var XI=vr,JI=yI,QI=Math.exp;XI({target:"Math",stat:!0},{tanh:function(e){var t=JI(e=+e),n=JI(-e);return t==1/0?1:n==1/0?-1:(t-n)/(QI(e)+QI(-e))}}),Tr(Math,"Math",!0);var ZI=vr,ek=Math.ceil,tk=Math.floor;ZI({target:"Math",stat:!0},{trunc:function(e){return(e>0?tk:ek)(e)}});var nk=1..valueOf,rk=function(e){return nk.call(e)},ak=ae,ok=l,ik=sr,sk=re.exports,lk=_,ck=Vd,uk=ge,dk=Le,fk=F,hk=yn.f,pk=Jt.f,vk=oe.f,mk=rk,yk=Ah.trim,gk=ok.Number,bk=gk.prototype,wk=function(e){var t=dk(e,"number");return"bigint"==typeof t?t:Ek(t)},Ek=function(e){var t,n,r,a,o,i,s,l,c=dk(e,"number");if(uk(c))throw TypeError("Cannot convert a Symbol value to a number");if("string"==typeof c&&c.length>2)if(43===(t=(c=yk(c)).charCodeAt(0))||45===t){if(88===(n=c.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:r=2,a=49;break;case 79:case 111:r=8,a=55;break;default:return+c}for(i=(o=c.slice(2)).length,s=0;s<i;s++)if((l=o.charCodeAt(s))<48||l>a)return NaN;return parseInt(o,r)}return+c};if(ik("Number",!gk(" 0o1")||!gk("0b1")||gk("+0x1"))){for(var _k,xk=function(e){var t=arguments.length<1?0:gk(wk(e)),n=this;return n instanceof xk&&fk((function(){mk(n)}))?ck(Object(t),n,xk):t},Sk=ak?hk(gk):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),Ik=0;Sk.length>Ik;Ik++)lk(gk,_k=Sk[Ik])&&!lk(xk,_k)&&vk(xk,_k,pk(gk,_k));xk.prototype=bk,bk.constructor=xk,sk(ok,"Number",xk)}vr({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)});var kk=l.isFinite;vr({target:"Number",stat:!0},{isFinite:Number.isFinite||function(e){return"number"==typeof e&&kk(e)}});var Tk=se,Rk=Math.floor,Ak=Number.isInteger||function(e){return!Tk(e)&&isFinite(e)&&Rk(e)===e};vr({target:"Number",stat:!0},{isInteger:Ak}),vr({target:"Number",stat:!0},{isNaN:function(e){return e!=e}});var Ok=vr,Ck=Ak,Nk=Math.abs;Ok({target:"Number",stat:!0},{isSafeInteger:function(e){return Ck(e)&&Nk(e)<=9007199254740991}}),vr({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991}),vr({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991});var Lk=l,Mk=F,Pk=Oc,Hk=Ah.trim,Dk=Lk.parseFloat,jk=Lk.Symbol,Fk=jk&&jk.iterator,Bk=1/Dk("\t\n\v\f\r                　\u2028\u2029\ufeff-0")!=-1/0||Fk&&!Mk((function(){Dk(Object(Fk))}))?function(e){var t=Hk(Pk(e)),n=Dk(t);return 0===n&&"-"==t.charAt(0)?-0:n}:Dk,Uk=Bk;vr({target:"Number",stat:!0,forced:Number.parseFloat!=Uk},{parseFloat:Uk});var Vk=l,qk=F,Wk=Oc,Yk=Ah.trim,Gk=Vk.parseInt,$k=Vk.Symbol,zk=$k&&$k.iterator,Kk=/^[+-]?0x/i,Xk=8!==Gk("\t\n\v\f\r                　\u2028\u2029\ufeff08")||22!==Gk("\t\n\v\f\r                　\u2028\u2029\ufeff0x16")||zk&&!qk((function(){Gk(Object(zk))}))?function(e,t){var n=Yk(Wk(e));return Gk(n,t>>>0||(Kk.test(n)?16:10))}:Gk,Jk=Xk;vr({target:"Number",stat:!0,forced:Number.parseInt!=Jk},{parseInt:Jk});var Qk=vr,Zk=wn,eT=rk,tT=Kx,nT=F,rT=1..toFixed,aT=Math.floor,oT=function(e,t,n){return 0===t?n:t%2==1?oT(e,t-1,n*e):oT(e*e,t/2,n)},iT=function(e,t,n){for(var r=-1,a=n;++r<6;)a+=t*e[r],e[r]=a%1e7,a=aT(a/1e7)},sT=function(e,t){for(var n=6,r=0;--n>=0;)r+=e[n],e[n]=aT(r/t),r=r%t*1e7},lT=function(e){for(var t=6,n="";--t>=0;)if(""!==n||0===t||0!==e[t]){var r=String(e[t]);n=""===n?r:n+tT.call("0",7-r.length)+r}return n};Qk({target:"Number",proto:!0,forced:rT&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!nT((function(){rT.call({})}))},{toFixed:function(e){var t,n,r,a,o=eT(this),i=Zk(e),s=[0,0,0,0,0,0],l="",c="0";if(i<0||i>20)throw RangeError("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return String(o);if(o<0&&(l="-",o=-o),o>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(o*oT(2,69,1))-69)<0?o*oT(2,-t,1):o/oT(2,t,1),n*=4503599627370496,(t=52-t)>0){for(iT(s,0,n),r=i;r>=7;)iT(s,1e7,0),r-=7;for(iT(s,oT(10,r,1),0),r=t-1;r>=23;)sT(s,1<<23),r-=23;sT(s,1<<r),iT(s,1,1),sT(s,2),c=lT(s)}else iT(s,0,n),iT(s,1<<-t,0),c=lT(s)+tT.call("0",i);return c=i>0?l+((a=c.length)<=i?"0."+tT.call("0",i-a)+c:c.slice(0,a-i)+"."+c.slice(a-i)):l+c}});var cT=F,uT=rk,dT=1..toPrecision;vr({target:"Number",proto:!0,forced:cT((function(){return"1"!==dT.call(1,void 0)}))||!cT((function(){dT.call({})}))},{toPrecision:function(e){return void 0===e?dT.call(uT(this)):dT.call(uT(this),e)}});var fT=ae,hT=F,pT=dl,vT=qn,mT=Qt,yT=b,gT=an,bT=Object.assign,wT=Object.defineProperty,ET=!bT||hT((function(){if(fT&&1!==bT({b:1},bT(wT({},"a",{enumerable:!0,get:function(){wT(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol();return e[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=bT({},e)[n]||"abcdefghijklmnopqrst"!=pT(bT({},t)).join("")}))?function(e,t){for(var n=yT(e),r=arguments.length,a=1,o=vT.f,i=mT.f;r>a;)for(var s,l=gT(arguments[a++]),c=o?pT(l).concat(o(l)):pT(l),u=c.length,d=0;u>d;)s=c[d++],fT&&!i.call(l,s)||(n[s]=l[s]);return n}:bT,_T=ET;vr({target:"Object",stat:!0,forced:Object.assign!==_T},{assign:_T}),vr({target:"Object",stat:!0,sham:!ae},{create:Tl});var xT=l,ST=Av,IT=!F((function(){if(!(ST&&ST<535)){var e=Math.random();__defineSetter__.call(null,e,(function(){})),delete xT[e]}})),kT=_e,TT=b,RT=oe;ae&&vr({target:"Object",proto:!0,forced:IT},{__defineGetter__:function(e,t){RT.f(TT(this),e,{get:kT(t),enumerable:!0,configurable:!0})}});vr({target:"Object",stat:!0,forced:!ae,sham:!ae},{defineProperties:vl});vr({target:"Object",stat:!0,forced:!ae,sham:!ae},{defineProperty:oe.f});var AT=_e,OT=b,CT=oe;ae&&vr({target:"Object",proto:!0,forced:IT},{__defineSetter__:function(e,t){CT.f(OT(this),e,{set:AT(t),enumerable:!0,configurable:!0})}});var NT=ae,LT=dl,MT=ln,PT=Qt.f,HT=function(e){return function(t){for(var n,r=MT(t),a=LT(r),o=a.length,i=0,s=[];o>i;)n=a[i++],NT&&!PT.call(r,n)||s.push(e?[n,r[n]]:r[n]);return s}},DT={entries:HT(!0),values:HT(!1)},jT=DT.entries;vr({target:"Object",stat:!0},{entries:function(e){return jT(e)}});var FT=vr,BT=Sd,UT=F,VT=se,qT=gd.exports.onFreeze,WT=Object.freeze;FT({target:"Object",stat:!0,forced:UT((function(){WT(1)})),sham:!BT},{freeze:function(e){return WT&&VT(e)?WT(qT(e)):e}});var YT=sa,GT=Ds;vr({target:"Object",stat:!0},{fromEntries:function(e){var t={};return YT(e,(function(e,n){GT(t,e,n)}),{AS_ENTRIES:!0}),t}});var $T=vr,zT=F,KT=ln,XT=Jt.f,JT=ae,QT=zT((function(){XT(1)}));$T({target:"Object",stat:!0,forced:!JT||QT,sham:!JT},{getOwnPropertyDescriptor:function(e,t){return XT(KT(e),t)}});var ZT=$n,eR=ln,tR=Jt,nR=Ds;vr({target:"Object",stat:!0,sham:!ae},{getOwnPropertyDescriptors:function(e){for(var t,n,r=eR(e),a=tR.f,o=ZT(r),i={},s=0;o.length>s;)void 0!==(n=a(r,t=o[s++]))&&nR(i,t,n);return i}});var rR=vr,aR=F,oR=bd.f;rR({target:"Object",stat:!0,forced:aR((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:oR});var iR=b,sR=ql,lR=Hl;vr({target:"Object",stat:!0,forced:F((function(){sR(1)})),sham:!lR},{getPrototypeOf:function(e){return sR(iR(e))}}),vr({target:"Object",stat:!0},{hasOwn:_});var cR=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t};vr({target:"Object",stat:!0},{is:cR});var uR=vr,dR=F,fR=se,hR=Object.isExtensible;uR({target:"Object",stat:!0,forced:dR((function(){hR(1)}))},{isExtensible:function(e){return!!fR(e)&&(!hR||hR(e))}});var pR=vr,vR=F,mR=se,yR=Object.isFrozen;pR({target:"Object",stat:!0,forced:vR((function(){yR(1)}))},{isFrozen:function(e){return!mR(e)||!!yR&&yR(e)}});var gR=vr,bR=F,wR=se,ER=Object.isSealed;gR({target:"Object",stat:!0,forced:bR((function(){ER(1)}))},{isSealed:function(e){return!wR(e)||!!ER&&ER(e)}});var _R=b,xR=dl;vr({target:"Object",stat:!0,forced:F((function(){xR(1)}))},{keys:function(e){return xR(_R(e))}});var SR=vr,IR=ae,kR=IT,TR=b,RR=He,AR=ql,OR=Jt.f;IR&&SR({target:"Object",proto:!0,forced:kR},{__lookupGetter__:function(e){var t,n=TR(this),r=RR(e);do{if(t=OR(n,r))return t.get}while(n=AR(n))}});var CR=vr,NR=ae,LR=IT,MR=b,PR=He,HR=ql,DR=Jt.f;NR&&CR({target:"Object",proto:!0,forced:LR},{__lookupSetter__:function(e){var t,n=MR(this),r=PR(e);do{if(t=DR(n,r))return t.set}while(n=HR(n))}});var jR=vr,FR=se,BR=gd.exports.onFreeze,UR=Sd,VR=F,qR=Object.preventExtensions;jR({target:"Object",stat:!0,forced:VR((function(){qR(1)})),sham:!UR},{preventExtensions:function(e){return qR&&FR(e)?qR(BR(e)):e}});var WR=vr,YR=se,GR=gd.exports.onFreeze,$R=Sd,zR=F,KR=Object.seal;WR({target:"Object",stat:!0,forced:zR((function(){KR(1)})),sham:!$R},{seal:function(e){return KR&&YR(e)?KR(GR(e)):e}}),vr({target:"Object",stat:!0},{setPrototypeOf:xr});var XR=DT.values;vr({target:"Object",stat:!0},{values:function(e){return XR(e)}});vr({global:!0,forced:parseFloat!=Bk},{parseFloat:Bk});vr({global:!0,forced:parseInt!=Xk},{parseInt:Xk});var JR=_e,QR=Oo,ZR=Vo,eA=sa;vr({target:"Promise",stat:!0},{allSettled:function(e){var t=this,n=QR.f(t),r=n.resolve,a=n.reject,o=ZR((function(){var n=JR(t.resolve),a=[],o=0,i=1;eA(e,(function(e){var s=o++,l=!1;a.push(void 0),i++,n.call(t,e).then((function(e){l||(l=!0,a[s]={status:"fulfilled",value:e},--i||r(a))}),(function(e){l||(l=!0,a[s]={status:"rejected",reason:e},--i||r(a))}))})),--i||r(a)}));return o.error&&a(o.value),n.promise}});var tA=_e,nA=O,rA=Oo,aA=Vo,oA=sa;vr({target:"Promise",stat:!0},{any:function(e){var t=this,n=rA.f(t),r=n.resolve,a=n.reject,o=aA((function(){var n=tA(t.resolve),o=[],i=0,s=1,l=!1;oA(e,(function(e){var c=i++,u=!1;o.push(void 0),s++,n.call(t,e).then((function(e){u||l||(l=!0,r(e))}),(function(e){u||l||(u=!0,o[c]=e,--s||a(new(nA("AggregateError"))(o,"No one promise resolved")))}))})),--s||a(new(nA("AggregateError"))(o,"No one promise resolved"))}));return o.error&&a(o.value),n.promise}});var iA=vr,sA=_e,lA=ve,cA=F,uA=O("Reflect","apply"),dA=Function.apply;iA({target:"Reflect",stat:!0,forced:!cA((function(){uA((function(){}))}))},{apply:function(e,t,n){return sA(e),lA(n),uA?uA(e,t,n):dA.call(e,t,n)}});var fA=vr,hA=Oa,pA=ve,vA=se,mA=Tl,yA=OS,gA=F,bA=O("Reflect","construct"),wA=gA((function(){function e(){}return!(bA((function(){}),[],e)instanceof e)})),EA=!gA((function(){bA((function(){}))})),_A=wA||EA;fA({target:"Reflect",stat:!0,forced:_A,sham:_A},{construct:function(e,t){hA(e),pA(t);var n=arguments.length<3?e:hA(arguments[2]);if(EA&&!wA)return bA(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(yA.apply(e,r))}var a=n.prototype,o=mA(vA(a)?a:Object.prototype),i=Function.apply.call(e,o,t);return vA(i)?i:o}});var xA=ae,SA=ve,IA=He,kA=oe;vr({target:"Reflect",stat:!0,forced:F((function(){Reflect.defineProperty(kA.f({},1,{value:1}),1,{value:2})})),sham:!xA},{defineProperty:function(e,t,n){SA(e);var r=IA(t);SA(n);try{return kA.f(e,r,n),!0}catch(e){return!1}}});var TA=vr,RA=ve,AA=Jt.f;TA({target:"Reflect",stat:!0},{deleteProperty:function(e,t){var n=AA(RA(e),t);return!(n&&!n.configurable)&&delete e[t]}});var OA=_,CA=function(e){return void 0!==e&&(OA(e,"value")||OA(e,"writable"))},NA=se,LA=ve,MA=CA,PA=Jt,HA=ql;vr({target:"Reflect",stat:!0},{get:function e(t,n){var r,a,o=arguments.length<3?t:arguments[2];return LA(t)===o?t[n]:(r=PA.f(t,n))?MA(r)?r.value:void 0===r.get?void 0:r.get.call(o):NA(a=HA(t))?e(a,n,o):void 0}});var DA=ve,jA=Jt;vr({target:"Reflect",stat:!0,sham:!ae},{getOwnPropertyDescriptor:function(e,t){return jA.f(DA(e),t)}});var FA=ve,BA=ql;vr({target:"Reflect",stat:!0,sham:!Hl},{getPrototypeOf:function(e){return BA(FA(e))}}),vr({target:"Reflect",stat:!0},{has:function(e,t){return t in e}});var UA=vr,VA=ve,qA=Object.isExtensible;UA({target:"Reflect",stat:!0},{isExtensible:function(e){return VA(e),!qA||qA(e)}}),vr({target:"Reflect",stat:!0},{ownKeys:$n});var WA=O,YA=ve;vr({target:"Reflect",stat:!0,sham:!Sd},{preventExtensions:function(e){YA(e);try{var t=WA("Object","preventExtensions");return t&&t(e),!0}catch(e){return!1}}});var GA=ve,$A=se,zA=CA,KA=oe,XA=Jt,JA=ql,QA=Ve;vr({target:"Reflect",stat:!0,forced:F((function(){var e=function(){},t=KA.f(new e,"a",{configurable:!0});return!1!==Reflect.set(e.prototype,"a",1,t)}))},{set:function e(t,n,r){var a,o,i,s=arguments.length<4?t:arguments[3],l=XA.f(GA(t),n);if(!l){if($A(o=JA(t)))return e(o,n,r,s);l=QA(0)}if(zA(l)){if(!1===l.writable||!$A(s))return!1;if(a=XA.f(s,n)){if(a.get||a.set||!1===a.writable)return!1;a.value=r,KA.f(s,n,a)}else KA.f(s,n,QA(0,r))}else{if(void 0===(i=l.set))return!1;i.call(s,r)}return!0}});var ZA=ve,eO=wr,tO=xr;tO&&vr({target:"Reflect",stat:!0},{setPrototypeOf:function(e,t){ZA(e),eO(t);try{return tO(e,t),!0}catch(e){return!1}}});var nO=l,rO=Tr;vr({global:!0},{Reflect:{}}),rO(nO.Reflect,"Reflect",!0);var aO=ae,oO=xu,iO=oe.f,sO=Et.get,lO=RegExp.prototype;aO&&oO&&iO(lO,"dotAll",{configurable:!0,get:function(){if(this!==lO){if(this instanceof RegExp)return!!sO(this).dotAll;throw TypeError("Incompatible receiver, RegExp required")}}});var cO=oe,uO=yu;ae&&F((function(){return"sy"!==Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get.call({dotAll:!0,sticky:!0})}))&&cO.f(RegExp.prototype,"flags",{configurable:!0,get:uO});var dO=ae,fO=gu.UNSUPPORTED_Y,hO=oe.f,pO=Et.get,vO=RegExp.prototype;dO&&fO&&hO(vO,"sticky",{configurable:!0,get:function(){if(this!==vO){if(this instanceof RegExp)return!!pO(this).sticky;throw TypeError("Incompatible receiver, RegExp required")}}});var mO=vr,yO=k,gO=se,bO=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),wO=/./.test;mO({target:"RegExp",proto:!0,forced:!bO},{test:function(e){var t=this.exec;if(!yO(t))return wO.call(this,e);var n=t.call(this,e);if(null!==n&&!gO(n))throw new Error("RegExp exec method returned something other than an Object or null");return!!n}}),nf("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),mf);var EO=y,_O=wn,xO=Oc;vr({target:"String",proto:!0,forced:F((function(){return"\ud842"!=="𠮷".at(0)}))},{at:function(e){var t=xO(EO(this)),n=t.length,r=_O(e),a=r>=0?r:n+r;return a<0||a>=n?void 0:t.charAt(a)}});var SO=Pc.codeAt;vr({target:"String",proto:!0},{codePointAt:function(e){return SO(this,e)}});var IO,kO=vr,TO=Jt.f,RO=Tn,AO=Oc,OO=uu,CO=y,NO=fu,LO="".endsWith,MO=Math.min,PO=NO("endsWith");kO({target:"String",proto:!0,forced:!!(PO||(IO=TO(String.prototype,"endsWith"),!IO||IO.writable))&&!PO},{endsWith:function(e){var t=AO(CO(this));OO(e);var n=arguments.length>1?arguments[1]:void 0,r=t.length,a=void 0===n?r:MO(RO(n),r),o=AO(e);return LO?LO.call(t,o,a):t.slice(a-o.length,a)===o}});var HO=vr,DO=Sn,jO=String.fromCharCode,FO=String.fromCodePoint;HO({target:"String",stat:!0,forced:!!FO&&1!=FO.length},{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,a=0;r>a;){if(t=+arguments[a++],DO(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?jO(t):jO(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}});var BO=vr,UO=rc,VO=y,qO=Tn,WO=Oc,YO=ve,GO=lu,$O=yu,zO=Se,KO=re.exports,XO=F,JO=Ma,QO=Ju,ZO=nd,eC=Et,tC=ee("matchAll"),nC=eC.set,rC=eC.getterFor("RegExp String Iterator"),aC=RegExp.prototype,oC="".matchAll,iC=!!oC&&!XO((function(){"a".matchAll(/./)})),sC=UO((function(e,t,n,r){nC(this,{type:"RegExp String Iterator",regexp:e,string:t,global:n,unicode:r,done:!1})}),"RegExp String",(function(){var e=rC(this);if(e.done)return{value:void 0,done:!0};var t=e.regexp,n=e.string,r=ZO(t,n);return null===r?{value:void 0,done:e.done=!0}:e.global?(""===WO(r[0])&&(t.lastIndex=QO(n,qO(t.lastIndex),e.unicode)),{value:r,done:!1}):(e.done=!0,{value:r,done:!1})})),lC=function(e){var t,n,r,a,o,i,s=YO(this),l=WO(e);return t=JO(s,RegExp),void 0===(n=s.flags)&&s instanceof RegExp&&!("flags"in aC)&&(n=$O.call(s)),r=void 0===n?"":WO(n),a=new t(t===RegExp?s.source:s,r),o=!!~r.indexOf("g"),i=!!~r.indexOf("u"),a.lastIndex=qO(s.lastIndex),new sC(a,l,o,i)};BO({target:"String",proto:!0,forced:iC},{matchAll:function(e){var t,n,r=VO(this);if(null!=e){if(GO(e)&&!~WO(VO("flags"in aC?e.flags:$O.call(e))).indexOf("g"))throw TypeError("`.matchAll` does not allow non-global regexes");if(iC)return oC.apply(r,arguments);if(n=zO(e,tC))return n.call(e,r)}else if(iC)return oC.apply(r,arguments);return t=WO(r),new RegExp(e,"g")[tC](t)}}),tC in aC||KO(aC,tC,lC);var cC=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(C),uC=nS.end;vr({target:"String",proto:!0,forced:cC},{padEnd:function(e){return uC(this,e,arguments.length>1?arguments[1]:void 0)}});var dC=nS.start;vr({target:"String",proto:!0,forced:cC},{padStart:function(e){return dC(this,e,arguments.length>1?arguments[1]:void 0)}});var fC=vr,hC=ln,pC=b,vC=Oc,mC=An,yC=Array.prototype,gC=yC.push,bC=yC.join;fC({target:"String",stat:!0},{raw:function(e){for(var t=hC(pC(e).raw),n=mC(t),r=arguments.length,a=[],o=0;n>o;){if(gC.call(a,vC(t[o++])),o===n)return bC.call(a,"");o<r&&gC.call(a,vC(arguments[o]))}}}),vr({target:"String",proto:!0},{repeat:Kx});var wC=vr,EC=y,_C=k,xC=lu,SC=Oc,IC=Se,kC=yu,TC=Bh,RC=ee("replace"),AC=RegExp.prototype,OC=Math.max,CC=function(e,t,n){return n>e.length?-1:""===t?n:e.indexOf(t,n)};wC({target:"String",proto:!0},{replaceAll:function(e,t){var n,r,a,o,i,s,l,c=EC(this),u=0,d=0,f="";if(null!=e){if(xC(e)&&!~SC(EC("flags"in AC?e.flags:kC.call(e))).indexOf("g"))throw TypeError("`.replaceAll` does not allow non-global regexes");if(n=IC(e,RC))return n.call(e,c,t)}for(r=SC(c),a=SC(e),(o=_C(t))||(t=SC(t)),i=a.length,s=OC(1,i),u=CC(r,a,0);-1!==u;)l=o?SC(t(a,u,r)):TC(a,r,u,[],void 0,t),f+=r.slice(d,u)+l,d=u+i,u=CC(r,a,u+s);return d<r.length&&(f+=r.slice(d)),f}});var NC=ve,LC=y,MC=cR,PC=Oc,HC=Se,DC=nd;Ku("search",(function(e,t,n){return[function(t){var n=LC(this),r=null==t?void 0:HC(t,e);return r?r.call(t,n):new RegExp(t)[e](PC(n))},function(e){var r=NC(this),a=PC(e),o=n(t,r,a);if(o.done)return o.value;var i=r.lastIndex;MC(i,0)||(r.lastIndex=0);var s=DC(r,a);return MC(r.lastIndex,i)||(r.lastIndex=i),null===s?-1:s.index}]}));var jC=vr,FC=Jt.f,BC=Tn,UC=Oc,VC=uu,qC=y,WC=fu,YC="".startsWith,GC=Math.min,$C=WC("startsWith");jC({target:"String",proto:!0,forced:!(!$C&&!!function(){var e=FC(String.prototype,"startsWith");return e&&!e.writable}())&&!$C},{startsWith:function(e){var t=UC(qC(this));VC(e);var n=BC(GC(arguments.length>1?arguments[1]:void 0,t.length)),r=UC(e);return YC?YC.call(t,r,n):t.slice(n,n+r.length)===r}});var zC=vr,KC=y,XC=wn,JC=Oc,QC="".slice,ZC=Math.max,eN=Math.min;zC({target:"String",proto:!0,forced:!"".substr||"b"!=="ab".substr(-1)},{substr:function(e,t){var n,r,a=JC(KC(this)),o=a.length,i=XC(e);return i===1/0&&(i=0),i<0&&(i=ZC(o+i,0)),(n=void 0===t?o:XC(t))<=0||n===1/0||i>=(r=eN(i+n,o))?"":QC.call(a,i,r)}});var tN=vr,nN=Ah.end,rN=Lh("trimEnd"),aN=rN?function(){return nN(this)}:"".trimEnd;tN({target:"String",proto:!0,name:"trimEnd",forced:rN},{trimEnd:aN,trimRight:aN});var oN=y,iN=Oc,sN=/"/g,lN=function(e,t,n,r){var a=iN(oN(e)),o="<"+t;return""!==n&&(o+=" "+n+'="'+iN(r).replace(sN,"&quot;")+'"'),o+">"+a+"</"+t+">"},cN=F,uN=function(e){return cN((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))},dN=lN;vr({target:"String",proto:!0,forced:uN("anchor")},{anchor:function(e){return dN(this,"a","name",e)}});var fN=lN;vr({target:"String",proto:!0,forced:uN("big")},{big:function(){return fN(this,"big","","")}});var hN=lN;vr({target:"String",proto:!0,forced:uN("blink")},{blink:function(){return hN(this,"blink","","")}});var pN=lN;vr({target:"String",proto:!0,forced:uN("bold")},{bold:function(){return pN(this,"b","","")}});var vN=lN;vr({target:"String",proto:!0,forced:uN("fixed")},{fixed:function(){return vN(this,"tt","","")}});var mN=lN;vr({target:"String",proto:!0,forced:uN("fontcolor")},{fontcolor:function(e){return mN(this,"font","color",e)}});var yN=lN;vr({target:"String",proto:!0,forced:uN("fontsize")},{fontsize:function(e){return yN(this,"font","size",e)}});var gN=lN;vr({target:"String",proto:!0,forced:uN("italics")},{italics:function(){return gN(this,"i","","")}});var bN=lN;vr({target:"String",proto:!0,forced:uN("link")},{link:function(e){return bN(this,"a","href",e)}});var wN=lN;vr({target:"String",proto:!0,forced:uN("small")},{small:function(){return wN(this,"small","","")}});var EN=lN;vr({target:"String",proto:!0,forced:uN("strike")},{strike:function(){return EN(this,"strike","","")}});var _N=lN;vr({target:"String",proto:!0,forced:uN("sub")},{sub:function(){return _N(this,"sub","","")}});var xN=lN;vr({target:"String",proto:!0,forced:uN("sup")},{sup:function(){return xN(this,"sup","","")}});var SN={exports:{}},IN=l,kN=F,TN=ma,RN=Ax.NATIVE_ARRAY_BUFFER_VIEWS,AN=IN.ArrayBuffer,ON=IN.Int8Array,CN=!RN||!kN((function(){ON(1)}))||!kN((function(){new ON(-1)}))||!TN((function(e){new ON,new ON(null),new ON(1.5),new ON(e)}),!0)||kN((function(){return 1!==new ON(new AN(2),1,void 0).length})),NN=wn,LN=function(e){var t=NN(e);if(t<0)throw RangeError("The argument can't be less than 0");return t},MN=function(e,t){var n=LN(e);if(n%t)throw RangeError("Wrong offset");return n},PN=Oa,HN=b,DN=An,jN=Kr,FN=Yr,BN=jr,UN=Br,VN=Ax.aTypedArrayConstructor,qN=function(e){var t,n,r,a,o,i,s=PN(this),l=HN(e),c=arguments.length,u=c>1?arguments[1]:void 0,d=void 0!==u,f=FN(l);if(f&&!BN(f))for(i=(o=jN(l,f)).next,l=[];!(a=i.call(o)).done;)l.push(a.value);for(d&&c>2&&(u=UN(u,arguments[2],2)),n=DN(l),r=new(VN(s))(n),t=0;n>t;t++)r[t]=d?u(l[t],t):l[t];return r},WN=vr,YN=l,GN=ae,$N=CN,zN=Ax,KN=G_,XN=Lr,JN=Ve,QN=Ye,ZN=Ak,eL=Tn,tL=zE,nL=MN,rL=He,aL=_,oL=Yt,iL=se,sL=ge,lL=Tl,cL=xr,uL=yn.f,dL=qN,fL=Sf.forEach,hL=Nr,pL=oe,vL=Jt,mL=Vd,yL=Et.get,gL=Et.set,bL=pL.f,wL=vL.f,EL=Math.round,_L=YN.RangeError,xL=KN.ArrayBuffer,SL=KN.DataView,IL=zN.NATIVE_ARRAY_BUFFER_VIEWS,kL=zN.TYPED_ARRAY_CONSTRUCTOR,TL=zN.TYPED_ARRAY_TAG,RL=zN.TypedArray,AL=zN.TypedArrayPrototype,OL=zN.aTypedArrayConstructor,CL=zN.isTypedArray,NL=function(e,t){for(var n=0,r=t.length,a=new(OL(e))(r);r>n;)a[n]=t[n++];return a},LL=function(e,t){bL(e,t,{get:function(){return yL(this)[t]}})},ML=function(e){var t;return e instanceof xL||"ArrayBuffer"==(t=oL(e))||"SharedArrayBuffer"==t},PL=function(e,t){return CL(e)&&!sL(t)&&t in e&&ZN(+t)&&t>=0},HL=function(e,t){return t=rL(t),PL(e,t)?JN(2,e[t]):wL(e,t)},DL=function(e,t,n){return t=rL(t),!(PL(e,t)&&iL(n)&&aL(n,"value"))||aL(n,"get")||aL(n,"set")||n.configurable||aL(n,"writable")&&!n.writable||aL(n,"enumerable")&&!n.enumerable?bL(e,t,n):(e[t]=n.value,e)};GN?(IL||(vL.f=HL,pL.f=DL,LL(AL,"buffer"),LL(AL,"byteOffset"),LL(AL,"byteLength"),LL(AL,"length")),WN({target:"Object",stat:!0,forced:!IL},{getOwnPropertyDescriptor:HL,defineProperty:DL}),SN.exports=function(e,t,n){var r=e.match(/\d+$/)[0]/8,a=e+(n?"Clamped":"")+"Array",o="get"+e,i="set"+e,s=YN[a],l=s,c=l&&l.prototype,u={},d=function(e,t){bL(e,t,{get:function(){return function(e,t){var n=yL(e);return n.view[o](t*r+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,a){var o=yL(e);n&&(a=(a=EL(a))<0?0:a>255?255:255&a),o.view[i](t*r+o.byteOffset,a,!0)}(this,t,e)},enumerable:!0})};IL?$N&&(l=t((function(e,t,n,o){return XN(e,l,a),mL(iL(t)?ML(t)?void 0!==o?new s(t,nL(n,r),o):void 0!==n?new s(t,nL(n,r)):new s(t):CL(t)?NL(l,t):dL.call(l,t):new s(tL(t)),e,l)})),cL&&cL(l,RL),fL(uL(s),(function(e){e in l||QN(l,e,s[e])})),l.prototype=c):(l=t((function(e,t,n,o){XN(e,l,a);var i,s,c,u=0,f=0;if(iL(t)){if(!ML(t))return CL(t)?NL(l,t):dL.call(l,t);i=t,f=nL(n,r);var h=t.byteLength;if(void 0===o){if(h%r)throw _L("Wrong length");if((s=h-f)<0)throw _L("Wrong length")}else if((s=eL(o)*r)+f>h)throw _L("Wrong length");c=s/r}else c=tL(t),i=new xL(s=c*r);for(gL(e,{buffer:i,byteOffset:f,byteLength:s,length:c,view:new SL(i)});u<c;)d(e,u++)})),cL&&cL(l,RL),c=l.prototype=lL(AL)),c.constructor!==l&&QN(c,"constructor",l),QN(c,kL,l),TL&&QN(c,TL,a),u[a]=l,WN({global:!0,forced:l!=s,sham:!IL},u),"BYTES_PER_ELEMENT"in l||QN(l,"BYTES_PER_ELEMENT",r),"BYTES_PER_ELEMENT"in c||QN(c,"BYTES_PER_ELEMENT",r),hL(a)}):SN.exports=function(){},(0,SN.exports)("Float32",(function(e){return function(t,n,r){return e(this,t,n,r)}})),(0,SN.exports)("Float64",(function(e){return function(t,n,r){return e(this,t,n,r)}})),(0,SN.exports)("Int8",(function(e){return function(t,n,r){return e(this,t,n,r)}})),(0,SN.exports)("Int16",(function(e){return function(t,n,r){return e(this,t,n,r)}})),(0,SN.exports)("Int32",(function(e){return function(t,n,r){return e(this,t,n,r)}})),(0,SN.exports)("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}})),(0,SN.exports)("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}),!0),(0,SN.exports)("Uint16",(function(e){return function(t,n,r){return e(this,t,n,r)}})),(0,SN.exports)("Uint32",(function(e){return function(t,n,r){return e(this,t,n,r)}}));var jL=An,FL=wn,BL=Ax.aTypedArray;(0,Ax.exportTypedArrayMethod)("at",(function(e){var t=BL(this),n=jL(t),r=FL(e),a=r>=0?r:n+r;return a<0||a>=n?void 0:t[a]}));var UL=Sw,VL=Ax.aTypedArray;(0,Ax.exportTypedArrayMethod)("copyWithin",(function(e,t){return UL.call(VL(this),e,t,arguments.length>2?arguments[2]:void 0)}));var qL=Sf.every,WL=Ax.aTypedArray;(0,Ax.exportTypedArrayMethod)("every",(function(e){return qL(WL(this),e,arguments.length>1?arguments[1]:void 0)}));var YL=Ow,GL=Ax.aTypedArray;(0,Ax.exportTypedArrayMethod)("fill",(function(e){return YL.apply(GL(this),arguments)}));var $L=Ma,zL=Ax.TYPED_ARRAY_CONSTRUCTOR,KL=Ax.aTypedArrayConstructor,XL=function(e){return KL($L(e,e[zL]))},JL=function(e,t){for(var n=0,r=t.length,a=new e(r);r>n;)a[n]=t[n++];return a},QL=XL,ZL=Sf.filter,eM=function(e,t){return JL(QL(e),t)},tM=Ax.aTypedArray;(0,Ax.exportTypedArrayMethod)("filter",(function(e){var t=ZL(tM(this),e,arguments.length>1?arguments[1]:void 0);return eM(this,t)}));var nM=Sf.find,rM=Ax.aTypedArray;(0,Ax.exportTypedArrayMethod)("find",(function(e){return nM(rM(this),e,arguments.length>1?arguments[1]:void 0)}));var aM=Sf.findIndex,oM=Ax.aTypedArray;(0,Ax.exportTypedArrayMethod)("findIndex",(function(e){return aM(oM(this),e,arguments.length>1?arguments[1]:void 0)}));var iM=Sf.forEach,sM=Ax.aTypedArray;(0,Ax.exportTypedArrayMethod)("forEach",(function(e){iM(sM(this),e,arguments.length>1?arguments[1]:void 0)})),(0,Ax.exportTypedArrayStaticMethod)("from",qN,CN);var lM=Mn.includes,cM=Ax.aTypedArray;(0,Ax.exportTypedArrayMethod)("includes",(function(e){return lM(cM(this),e,arguments.length>1?arguments[1]:void 0)}));var uM=Mn.indexOf,dM=Ax.aTypedArray;(0,Ax.exportTypedArrayMethod)("indexOf",(function(e){return uM(dM(this),e,arguments.length>1?arguments[1]:void 0)}));var fM=l,hM=Tt.PROPER,pM=Ax,vM=Rc,mM=ee("iterator"),yM=fM.Uint8Array,gM=vM.values,bM=vM.keys,wM=vM.entries,EM=pM.aTypedArray,_M=pM.exportTypedArrayMethod,xM=yM&&yM.prototype[mM],SM=!!xM&&"values"===xM.name,IM=function(){return gM.call(EM(this))};_M("entries",(function(){return wM.call(EM(this))})),_M("keys",(function(){return bM.call(EM(this))})),_M("values",IM,hM&&!SM),_M(mM,IM,hM&&!SM);var kM=Ax.aTypedArray,TM=[].join;(0,Ax.exportTypedArrayMethod)("join",(function(e){return TM.apply(kM(this),arguments)}));var RM=IE,AM=Ax.aTypedArray;(0,Ax.exportTypedArrayMethod)("lastIndexOf",(function(e){return RM.apply(AM(this),arguments)}));var OM=Sf.map,CM=XL,NM=Ax.aTypedArray;(0,Ax.exportTypedArrayMethod)("map",(function(e){return OM(NM(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(CM(e))(t)}))}));var LM=Ax.aTypedArrayConstructor;(0,Ax.exportTypedArrayStaticMethod)("of",(function(){for(var e=0,t=arguments.length,n=new(LM(this))(t);t>e;)n[e]=arguments[e++];return n}),CN);var MM=ME.left,PM=Ax.aTypedArray;(0,Ax.exportTypedArrayMethod)("reduce",(function(e){return MM(PM(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}));var HM=ME.right,DM=Ax.aTypedArray;(0,Ax.exportTypedArrayMethod)("reduceRight",(function(e){return HM(DM(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}));var jM=Ax.aTypedArray,FM=Ax.exportTypedArrayMethod,BM=Math.floor;FM("reverse",(function(){for(var e,t=jM(this).length,n=BM(t/2),r=0;r<n;)e=this[r],this[r++]=this[--t],this[t]=e;return this}));var UM=An,VM=MN,qM=b,WM=Ax.aTypedArray;(0,Ax.exportTypedArrayMethod)("set",(function(e){WM(this);var t=VM(arguments.length>1?arguments[1]:void 0,1),n=this.length,r=qM(e),a=UM(r),o=0;if(a+t>n)throw RangeError("Wrong length");for(;o<a;)this[t+o]=r[o++]}),F((function(){new Int8Array(1).set({})})));var YM=XL,GM=Ax.aTypedArray,$M=[].slice;(0,Ax.exportTypedArrayMethod)("slice",(function(e,t){for(var n=$M.call(GM(this),e,t),r=YM(this),a=0,o=n.length,i=new r(o);o>a;)i[a]=n[a++];return i}),F((function(){new Int8Array(1).slice()})));var zM=Sf.some,KM=Ax.aTypedArray;(0,Ax.exportTypedArrayMethod)("some",(function(e){return zM(KM(this),e,arguments.length>1?arguments[1]:void 0)}));var XM=F,JM=_e,QM=An,ZM=Sv,eP=kv,tP=Tv,nP=j,rP=Av,aP=Ax.aTypedArray,oP=Ax.exportTypedArrayMethod,iP=l.Uint16Array,sP=iP&&iP.prototype.sort,lP=!!sP&&!XM((function(){var e=new iP(2);e.sort(null),e.sort({})})),cP=!!sP&&!XM((function(){if(nP)return nP<74;if(eP)return eP<67;if(tP)return!0;if(rP)return rP<602;var e,t,n=new iP(516),r=Array(516);for(e=0;e<516;e++)t=e%4,n[e]=515-e,r[e]=e-2*t+3;for(n.sort((function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(n[e]!==r[e])return!0}));oP("sort",(function(e){if(void 0!==e&&JM(e),cP)return sP.call(this,e);aP(this);var t,n=QM(this),r=Array(n);for(t=0;t<n;t++)r[t]=this[t];for(r=ZM(this,function(e){return function(t,n){return void 0!==e?+e(t,n)||0:n!=n?-1:t!=t?1:0===t&&0===n?1/t>0&&1/n<0?1:-1:t>n}}(e)),t=0;t<n;t++)this[t]=r[t];return this}),!cP||lP);var uP=Tn,dP=Sn,fP=XL,hP=Ax.aTypedArray;(0,Ax.exportTypedArrayMethod)("subarray",(function(e,t){var n=hP(this),r=n.length,a=dP(e,r);return new(fP(n))(n.buffer,n.byteOffset+a*n.BYTES_PER_ELEMENT,uP((void 0===t?r:dP(t,r))-a))}));var pP=Ax,vP=F,mP=l.Int8Array,yP=pP.aTypedArray,gP=pP.exportTypedArrayMethod,bP=[].toLocaleString,wP=[].slice,EP=!!mP&&vP((function(){bP.call(new mP(1))}));gP("toLocaleString",(function(){return bP.apply(EP?wP.call(yP(this)):yP(this),arguments)}),vP((function(){return[1,2].toLocaleString()!=new mP([1,2]).toLocaleString()}))||!vP((function(){mP.prototype.toLocaleString.call([1,2])})));var _P=Ax.exportTypedArrayMethod,xP=F,SP=l.Uint8Array,IP=SP&&SP.prototype||{},kP=[].toString,TP=[].join;xP((function(){kP.call({})}))&&(kP=function(){return TP.call(this)});var RP=IP.toString!=kP;_P("toString",kP,RP);var AP=vr,OP=Oc,CP=String.fromCharCode,NP=/^[\da-f]{2}$/i,LP=/^[\da-f]{4}$/i;AP({global:!0},{unescape:function(e){for(var t,n,r=OP(e),a="",o=r.length,i=0;i<o;){if("%"===(t=r.charAt(i++)))if("u"===r.charAt(i)){if(n=r.slice(i+1,i+5),LP.test(n)){a+=CP(parseInt(n,16)),i+=5;continue}}else if(n=r.slice(i,i+2),NP.test(n)){a+=CP(parseInt(n,16)),i+=2;continue}a+=t}return a}});var MP=l,PP=fo;vr({global:!0,bind:!0,enumerable:!0,forced:!MP.setImmediate||!MP.clearImmediate},{setImmediate:PP.set,clearImmediate:PP.clear});var HP=vr,DP=Ao,jP=Da,FP=l.process;HP({global:!0,enumerable:!0,noTargetGet:!0},{queueMicrotask:function(e){var t=jP&&FP.domain;DP(t?t.bind(e):e)}});var BP=l,UP=k,VP=[].slice,qP=function(e){return function(t,n){var r=arguments.length>2,a=r?VP.call(arguments,2):void 0;return e(r?function(){(UP(t)?t:Function(t)).apply(this,a)}:t,n)}};vr({global:!0,bind:!0,forced:/MSIE .\./.test(C)},{setTimeout:qP(BP.setTimeout),setInterval:qP(BP.setInterval)});var WP=F,YP=ee("iterator"),GP=!WP((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[YP]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})),$P=/[^\0-\u007E]/,zP=/[.\u3002\uFF0E\uFF61]/g,KP="Overflow: input needs wider integers to process",XP=Math.floor,JP=String.fromCharCode,QP=function(e){return e+22+75*(e<26)},ZP=function(e,t,n){var r=0;for(e=n?XP(e/700):e>>1,e+=XP(e/t);e>455;r+=36)e=XP(e/35);return XP(r+36*e/(e+38))},eH=function(e){var t,n,r=[],a=(e=function(e){for(var t=[],n=0,r=e.length;n<r;){var a=e.charCodeAt(n++);if(a>=55296&&a<=56319&&n<r){var o=e.charCodeAt(n++);56320==(64512&o)?t.push(((1023&a)<<10)+(1023&o)+65536):(t.push(a),n--)}else t.push(a)}return t}(e)).length,o=128,i=0,s=72;for(t=0;t<e.length;t++)(n=e[t])<128&&r.push(JP(n));var l=r.length,c=l;for(l&&r.push("-");c<a;){var u=2147483647;for(t=0;t<e.length;t++)(n=e[t])>=o&&n<u&&(u=n);var d=c+1;if(u-o>XP((2147483647-i)/d))throw RangeError(KP);for(i+=(u-o)*d,o=u,t=0;t<e.length;t++){if((n=e[t])<o&&++i>2147483647)throw RangeError(KP);if(n==o){for(var f=i,h=36;;h+=36){var p=h<=s?1:h>=s+26?26:h-s;if(f<p)break;var v=f-p,m=36-p;r.push(JP(QP(p+v%m))),f=XP(v/m)}r.push(JP(QP(f))),s=ZP(i,d,c==l),i=0,++c}}++i,++o}return r.join("")},tH=vr,nH=O,rH=GP,aH=re.exports,oH=gr,iH=Tr,sH=rc,lH=Et,cH=Lr,uH=k,dH=_,fH=Br,hH=Yt,pH=ve,vH=se,mH=Oc,yH=Tl,gH=Ve,bH=Kr,wH=Yr,EH=ee,_H=nH("fetch"),xH=nH("Request"),SH=xH&&xH.prototype,IH=nH("Headers"),kH=EH("iterator"),TH=lH.set,RH=lH.getterFor("URLSearchParams"),AH=lH.getterFor("URLSearchParamsIterator"),OH=/\+/g,CH=Array(4),NH=function(e){return CH[e-1]||(CH[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},LH=function(e){try{return decodeURIComponent(e)}catch(t){return e}},MH=function(e){var t=e.replace(OH," "),n=4;try{return decodeURIComponent(t)}catch(e){for(;n;)t=t.replace(NH(n--),LH);return t}},PH=/[!'()~]|%20/g,HH={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},DH=function(e){return HH[e]},jH=function(e){return encodeURIComponent(e).replace(PH,DH)},FH=function(e,t){if(t)for(var n,r,a=t.split("&"),o=0;o<a.length;)(n=a[o++]).length&&(r=n.split("="),e.push({key:MH(r.shift()),value:MH(r.join("="))}))},BH=function(e){this.entries.length=0,FH(this.entries,e)},UH=function(e,t){if(e<t)throw TypeError("Not enough arguments")},VH=sH((function(e,t){TH(this,{type:"URLSearchParamsIterator",iterator:bH(RH(e).entries),kind:t})}),"Iterator",(function(){var e=AH(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n})),qH=function(){cH(this,qH,"URLSearchParams");var e,t,n,r,a,o,i,s,l,c=arguments.length>0?arguments[0]:void 0,u=this,d=[];if(TH(u,{type:"URLSearchParams",entries:d,updateURL:function(){},updateSearchParams:BH}),void 0!==c)if(vH(c))if(e=wH(c))for(n=(t=bH(c,e)).next;!(r=n.call(t)).done;){if((i=(o=(a=bH(pH(r.value))).next).call(a)).done||(s=o.call(a)).done||!o.call(a).done)throw TypeError("Expected sequence with length 2");d.push({key:mH(i.value),value:mH(s.value)})}else for(l in c)dH(c,l)&&d.push({key:l,value:mH(c[l])});else FH(d,"string"==typeof c?"?"===c.charAt(0)?c.slice(1):c:mH(c))},WH=qH.prototype;if(oH(WH,{append:function(e,t){UH(arguments.length,2);var n=RH(this);n.entries.push({key:mH(e),value:mH(t)}),n.updateURL()},delete:function(e){UH(arguments.length,1);for(var t=RH(this),n=t.entries,r=mH(e),a=0;a<n.length;)n[a].key===r?n.splice(a,1):a++;t.updateURL()},get:function(e){UH(arguments.length,1);for(var t=RH(this).entries,n=mH(e),r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){UH(arguments.length,1);for(var t=RH(this).entries,n=mH(e),r=[],a=0;a<t.length;a++)t[a].key===n&&r.push(t[a].value);return r},has:function(e){UH(arguments.length,1);for(var t=RH(this).entries,n=mH(e),r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){UH(arguments.length,1);for(var n,r=RH(this),a=r.entries,o=!1,i=mH(e),s=mH(t),l=0;l<a.length;l++)(n=a[l]).key===i&&(o?a.splice(l--,1):(o=!0,n.value=s));o||a.push({key:i,value:s}),r.updateURL()},sort:function(){var e,t,n,r=RH(this),a=r.entries,o=a.slice();for(a.length=0,n=0;n<o.length;n++){for(e=o[n],t=0;t<n;t++)if(a[t].key>e.key){a.splice(t,0,e);break}t===n&&a.push(e)}r.updateURL()},forEach:function(e){for(var t,n=RH(this).entries,r=fH(e,arguments.length>1?arguments[1]:void 0,3),a=0;a<n.length;)r((t=n[a++]).value,t.key,this)},keys:function(){return new VH(this,"keys")},values:function(){return new VH(this,"values")},entries:function(){return new VH(this,"entries")}},{enumerable:!0}),aH(WH,kH,WH.entries,{name:"entries"}),aH(WH,"toString",(function(){for(var e,t=RH(this).entries,n=[],r=0;r<t.length;)e=t[r++],n.push(jH(e.key)+"="+jH(e.value));return n.join("&")}),{enumerable:!0}),iH(qH,"URLSearchParams"),tH({global:!0,forced:!rH},{URLSearchParams:qH}),!rH&&uH(IH)){var YH=function(e){if(vH(e)){var t,n=e.body;if("URLSearchParams"===hH(n))return(t=e.headers?new IH(e.headers):new IH).has("content-type")||t.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),yH(e,{body:gH(0,String(n)),headers:gH(0,t)})}return e};if(uH(_H)&&tH({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return _H(e,arguments.length>1?YH(arguments[1]):{})}}),uH(xH)){var GH=function(e){return cH(this,GH,"Request"),new xH(e,arguments.length>1?YH(arguments[1]):{})};SH.constructor=GH,GH.prototype=SH,tH({global:!0,forced:!0},{Request:GH})}}var $H,zH={URLSearchParams:qH,getState:RH},KH=vr,XH=ae,JH=GP,QH=l,ZH=vl,eD=re.exports,tD=Lr,nD=_,rD=ET,aD=cE,oD=Pc.codeAt,iD=function(e){var t,n,r=[],a=e.toLowerCase().replace(zP,".").split(".");for(t=0;t<a.length;t++)n=a[t],r.push($P.test(n)?"xn--"+eH(n):n);return r.join(".")},sD=Oc,lD=Tr,cD=zH,uD=Et,dD=QH.URL,fD=cD.URLSearchParams,hD=cD.getState,pD=uD.set,vD=uD.getterFor("URL"),mD=Math.floor,yD=Math.pow,gD=/[a-z]/i,bD=/[\d+-.a-z]/i,wD=/\d/,ED=/^0x/i,_D=/^[0-7]+$/,xD=/^\d+$/,SD=/^[\da-f]+$/i,ID=/[\0\t\n\r #%/:<>?@[\\\]^|]/,kD=/[\0\t\n\r #/:<>?@[\\\]^|]/,TD=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,RD=/[\t\n\r]/g,AD=function(e,t){var n,r,a;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return"Invalid host";if(!(n=CD(t.slice(1,-1))))return"Invalid host";e.host=n}else if(FD(e)){if(t=iD(t),ID.test(t))return"Invalid host";if(null===(n=OD(t)))return"Invalid host";e.host=n}else{if(kD.test(t))return"Invalid host";for(n="",r=aD(t),a=0;a<r.length;a++)n+=DD(r[a],LD);e.host=n}},OD=function(e){var t,n,r,a,o,i,s,l=e.split(".");if(l.length&&""==l[l.length-1]&&l.pop(),(t=l.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(a=l[r]))return e;if(o=10,a.length>1&&"0"==a.charAt(0)&&(o=ED.test(a)?16:8,a=a.slice(8==o?1:2)),""===a)i=0;else{if(!(10==o?xD:8==o?_D:SD).test(a))return e;i=parseInt(a,o)}n.push(i)}for(r=0;r<t;r++)if(i=n[r],r==t-1){if(i>=yD(256,5-t))return null}else if(i>255)return null;for(s=n.pop(),r=0;r<n.length;r++)s+=n[r]*yD(256,3-r);return s},CD=function(e){var t,n,r,a,o,i,s,l=[0,0,0,0,0,0,0,0],c=0,u=null,d=0,f=function(){return e.charAt(d)};if(":"==f()){if(":"!=e.charAt(1))return;d+=2,u=++c}for(;f();){if(8==c)return;if(":"!=f()){for(t=n=0;n<4&&SD.test(f());)t=16*t+parseInt(f(),16),d++,n++;if("."==f()){if(0==n)return;if(d-=n,c>6)return;for(r=0;f();){if(a=null,r>0){if(!("."==f()&&r<4))return;d++}if(!wD.test(f()))return;for(;wD.test(f());){if(o=parseInt(f(),10),null===a)a=o;else{if(0==a)return;a=10*a+o}if(a>255)return;d++}l[c]=256*l[c]+a,2!=++r&&4!=r||c++}if(4!=r)return;break}if(":"==f()){if(d++,!f())return}else if(f())return;l[c++]=t}else{if(null!==u)return;d++,u=++c}}if(null!==u)for(i=c-u,c=7;0!=c&&i>0;)s=l[c],l[c--]=l[u+i-1],l[u+--i]=s;else if(8!=c)return;return l},ND=function(e){var t,n,r,a;if("number"==typeof e){for(t=[],n=0;n<4;n++)t.unshift(e%256),e=mD(e/256);return t.join(".")}if("object"==typeof e){for(t="",r=function(e){for(var t=null,n=1,r=null,a=0,o=0;o<8;o++)0!==e[o]?(a>n&&(t=r,n=a),r=null,a=0):(null===r&&(r=o),++a);return a>n&&(t=r,n=a),t}(e),n=0;n<8;n++)a&&0===e[n]||(a&&(a=!1),r===n?(t+=n?":":"::",a=!0):(t+=e[n].toString(16),n<7&&(t+=":")));return"["+t+"]"}return e},LD={},MD=rD({},LD,{" ":1,'"':1,"<":1,">":1,"`":1}),PD=rD({},MD,{"#":1,"?":1,"{":1,"}":1}),HD=rD({},PD,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),DD=function(e,t){var n=oD(e,0);return n>32&&n<127&&!nD(t,e)?e:encodeURIComponent(e)},jD={ftp:21,file:null,http:80,https:443,ws:80,wss:443},FD=function(e){return nD(jD,e.scheme)},BD=function(e){return""!=e.username||""!=e.password},UD=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},VD=function(e,t){var n;return 2==e.length&&gD.test(e.charAt(0))&&(":"==(n=e.charAt(1))||!t&&"|"==n)},qD=function(e){var t;return e.length>1&&VD(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},WD=function(e){var t=e.path,n=t.length;!n||"file"==e.scheme&&1==n&&VD(t[0],!0)||t.pop()},YD=function(e){return"."===e||"%2e"===e.toLowerCase()},GD={},$D={},zD={},KD={},XD={},JD={},QD={},ZD={},ej={},tj={},nj={},rj={},aj={},oj={},ij={},sj={},lj={},cj={},uj={},dj={},fj={},hj=function(e,t,n,r){var a,o,i,s,l,c=n||GD,u=0,d="",f=!1,h=!1,p=!1;for(n||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(TD,"")),t=t.replace(RD,""),a=aD(t);u<=a.length;){switch(o=a[u],c){case GD:if(!o||!gD.test(o)){if(n)return"Invalid scheme";c=zD;continue}d+=o.toLowerCase(),c=$D;break;case $D:if(o&&(bD.test(o)||"+"==o||"-"==o||"."==o))d+=o.toLowerCase();else{if(":"!=o){if(n)return"Invalid scheme";d="",c=zD,u=0;continue}if(n&&(FD(e)!=nD(jD,d)||"file"==d&&(BD(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=d,n)return void(FD(e)&&jD[e.scheme]==e.port&&(e.port=null));d="","file"==e.scheme?c=oj:FD(e)&&r&&r.scheme==e.scheme?c=KD:FD(e)?c=ZD:"/"==a[u+1]?(c=XD,u++):(e.cannotBeABaseURL=!0,e.path.push(""),c=uj)}break;case zD:if(!r||r.cannotBeABaseURL&&"#"!=o)return"Invalid scheme";if(r.cannotBeABaseURL&&"#"==o){e.scheme=r.scheme,e.path=r.path.slice(),e.query=r.query,e.fragment="",e.cannotBeABaseURL=!0,c=fj;break}c="file"==r.scheme?oj:JD;continue;case KD:if("/"!=o||"/"!=a[u+1]){c=JD;continue}c=ej,u++;break;case XD:if("/"==o){c=tj;break}c=cj;continue;case JD:if(e.scheme=r.scheme,o==$H)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query;else if("/"==o||"\\"==o&&FD(e))c=QD;else if("?"==o)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query="",c=dj;else{if("#"!=o){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.path.pop(),c=cj;continue}e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query,e.fragment="",c=fj}break;case QD:if(!FD(e)||"/"!=o&&"\\"!=o){if("/"!=o){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,c=cj;continue}c=tj}else c=ej;break;case ZD:if(c=ej,"/"!=o||"/"!=d.charAt(u+1))continue;u++;break;case ej:if("/"!=o&&"\\"!=o){c=tj;continue}break;case tj:if("@"==o){f&&(d="%40"+d),f=!0,i=aD(d);for(var v=0;v<i.length;v++){var m=i[v];if(":"!=m||p){var y=DD(m,HD);p?e.password+=y:e.username+=y}else p=!0}d=""}else if(o==$H||"/"==o||"?"==o||"#"==o||"\\"==o&&FD(e)){if(f&&""==d)return"Invalid authority";u-=aD(d).length+1,d="",c=nj}else d+=o;break;case nj:case rj:if(n&&"file"==e.scheme){c=sj;continue}if(":"!=o||h){if(o==$H||"/"==o||"?"==o||"#"==o||"\\"==o&&FD(e)){if(FD(e)&&""==d)return"Invalid host";if(n&&""==d&&(BD(e)||null!==e.port))return;if(s=AD(e,d))return s;if(d="",c=lj,n)return;continue}"["==o?h=!0:"]"==o&&(h=!1),d+=o}else{if(""==d)return"Invalid host";if(s=AD(e,d))return s;if(d="",c=aj,n==rj)return}break;case aj:if(!wD.test(o)){if(o==$H||"/"==o||"?"==o||"#"==o||"\\"==o&&FD(e)||n){if(""!=d){var g=parseInt(d,10);if(g>65535)return"Invalid port";e.port=FD(e)&&g===jD[e.scheme]?null:g,d=""}if(n)return;c=lj;continue}return"Invalid port"}d+=o;break;case oj:if(e.scheme="file","/"==o||"\\"==o)c=ij;else{if(!r||"file"!=r.scheme){c=cj;continue}if(o==$H)e.host=r.host,e.path=r.path.slice(),e.query=r.query;else if("?"==o)e.host=r.host,e.path=r.path.slice(),e.query="",c=dj;else{if("#"!=o){qD(a.slice(u).join(""))||(e.host=r.host,e.path=r.path.slice(),WD(e)),c=cj;continue}e.host=r.host,e.path=r.path.slice(),e.query=r.query,e.fragment="",c=fj}}break;case ij:if("/"==o||"\\"==o){c=sj;break}r&&"file"==r.scheme&&!qD(a.slice(u).join(""))&&(VD(r.path[0],!0)?e.path.push(r.path[0]):e.host=r.host),c=cj;continue;case sj:if(o==$H||"/"==o||"\\"==o||"?"==o||"#"==o){if(!n&&VD(d))c=cj;else if(""==d){if(e.host="",n)return;c=lj}else{if(s=AD(e,d))return s;if("localhost"==e.host&&(e.host=""),n)return;d="",c=lj}continue}d+=o;break;case lj:if(FD(e)){if(c=cj,"/"!=o&&"\\"!=o)continue}else if(n||"?"!=o)if(n||"#"!=o){if(o!=$H&&(c=cj,"/"!=o))continue}else e.fragment="",c=fj;else e.query="",c=dj;break;case cj:if(o==$H||"/"==o||"\\"==o&&FD(e)||!n&&("?"==o||"#"==o)){if(".."===(l=(l=d).toLowerCase())||"%2e."===l||".%2e"===l||"%2e%2e"===l?(WD(e),"/"==o||"\\"==o&&FD(e)||e.path.push("")):YD(d)?"/"==o||"\\"==o&&FD(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&VD(d)&&(e.host&&(e.host=""),d=d.charAt(0)+":"),e.path.push(d)),d="","file"==e.scheme&&(o==$H||"?"==o||"#"==o))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==o?(e.query="",c=dj):"#"==o&&(e.fragment="",c=fj)}else d+=DD(o,PD);break;case uj:"?"==o?(e.query="",c=dj):"#"==o?(e.fragment="",c=fj):o!=$H&&(e.path[0]+=DD(o,LD));break;case dj:n||"#"!=o?o!=$H&&("'"==o&&FD(e)?e.query+="%27":e.query+="#"==o?"%23":DD(o,LD)):(e.fragment="",c=fj);break;case fj:o!=$H&&(e.fragment+=DD(o,MD))}u++}},pj=function(e){var t,n,r=tD(this,pj,"URL"),a=arguments.length>1?arguments[1]:void 0,o=sD(e),i=pD(r,{type:"URL"});if(void 0!==a)if(a instanceof pj)t=vD(a);else if(n=hj(t={},sD(a)))throw TypeError(n);if(n=hj(i,o,null,t))throw TypeError(n);var s=i.searchParams=new fD,l=hD(s);l.updateSearchParams(i.query),l.updateURL=function(){i.query=String(s)||null},XH||(r.href=mj.call(r),r.origin=yj.call(r),r.protocol=gj.call(r),r.username=bj.call(r),r.password=wj.call(r),r.host=Ej.call(r),r.hostname=_j.call(r),r.port=xj.call(r),r.pathname=Sj.call(r),r.search=Ij.call(r),r.searchParams=kj.call(r),r.hash=Tj.call(r))},vj=pj.prototype,mj=function(){var e=vD(this),t=e.scheme,n=e.username,r=e.password,a=e.host,o=e.port,i=e.path,s=e.query,l=e.fragment,c=t+":";return null!==a?(c+="//",BD(e)&&(c+=n+(r?":"+r:"")+"@"),c+=ND(a),null!==o&&(c+=":"+o)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?i[0]:i.length?"/"+i.join("/"):"",null!==s&&(c+="?"+s),null!==l&&(c+="#"+l),c},yj=function(){var e=vD(this),t=e.scheme,n=e.port;if("blob"==t)try{return new pj(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&FD(e)?t+"://"+ND(e.host)+(null!==n?":"+n:""):"null"},gj=function(){return vD(this).scheme+":"},bj=function(){return vD(this).username},wj=function(){return vD(this).password},Ej=function(){var e=vD(this),t=e.host,n=e.port;return null===t?"":null===n?ND(t):ND(t)+":"+n},_j=function(){var e=vD(this).host;return null===e?"":ND(e)},xj=function(){var e=vD(this).port;return null===e?"":String(e)},Sj=function(){var e=vD(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},Ij=function(){var e=vD(this).query;return e?"?"+e:""},kj=function(){return vD(this).searchParams},Tj=function(){var e=vD(this).fragment;return e?"#"+e:""},Rj=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(XH&&ZH(vj,{href:Rj(mj,(function(e){var t=vD(this),n=sD(e),r=hj(t,n);if(r)throw TypeError(r);hD(t.searchParams).updateSearchParams(t.query)})),origin:Rj(yj),protocol:Rj(gj,(function(e){var t=vD(this);hj(t,sD(e)+":",GD)})),username:Rj(bj,(function(e){var t=vD(this),n=aD(sD(e));if(!UD(t)){t.username="";for(var r=0;r<n.length;r++)t.username+=DD(n[r],HD)}})),password:Rj(wj,(function(e){var t=vD(this),n=aD(sD(e));if(!UD(t)){t.password="";for(var r=0;r<n.length;r++)t.password+=DD(n[r],HD)}})),host:Rj(Ej,(function(e){var t=vD(this);t.cannotBeABaseURL||hj(t,sD(e),nj)})),hostname:Rj(_j,(function(e){var t=vD(this);t.cannotBeABaseURL||hj(t,sD(e),rj)})),port:Rj(xj,(function(e){var t=vD(this);UD(t)||(""==(e=sD(e))?t.port=null:hj(t,e,aj))})),pathname:Rj(Sj,(function(e){var t=vD(this);t.cannotBeABaseURL||(t.path=[],hj(t,sD(e),lj))})),search:Rj(Ij,(function(e){var t=vD(this);""==(e=sD(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",hj(t,e,dj)),hD(t.searchParams).updateSearchParams(t.query)})),searchParams:Rj(kj),hash:Rj(Tj,(function(e){var t=vD(this);""!=(e=sD(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",hj(t,e,fj)):t.fragment=null}))}),eD(vj,"toJSON",(function(){return mj.call(this)}),{enumerable:!0}),eD(vj,"toString",(function(){return mj.call(this)}),{enumerable:!0}),dD){var Aj=dD.createObjectURL,Oj=dD.revokeObjectURL;Aj&&eD(pj,"createObjectURL",(function(e){return Aj.apply(dD,arguments)})),Oj&&eD(pj,"revokeObjectURL",(function(e){return Oj.apply(dD,arguments)}))}lD(pj,"URL"),KH({global:!0,forced:!JH,sham:!XH},{URL:pj}),vr({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}}),op.config({name:"Nyph App"}),Promise.prototype.finally||(Promise.prototype.finally=function(e){return this.then(e).catch(e)}),console.log("if you have sourcemaps enabled in your devtools, click on main.js:5 --\x3e"),navigator.serviceWorker&&(navigator.serviceWorker.register("/app/serviceworker.js",{}),navigator.serviceWorker.addEventListener("controllerchange",(function(){window.location.reload(!0)})));var Cj=new dy;Cj.router=new Eg("https://nyphtest.bsbi.org/app/"),Cj.containerId="appcontainer",Cj.setLayout(new Ig),Cj.registerController(new Qy(new Zy,"/help")),Cj.registerController(new my(new Fy)),Cj.registerController(new xg(new Sg)),Cj.restoreOccurrences().then((function(e){console.log({"result from restoreOccurrences":e})}),(function(e){console.log({"failed result from restoreOccurrences":e})})).finally((function(){kg.onceTaxaLoaded().then((function(){Cj.initialise(),Cj.display()}))}))}(BsbiDb,$);
//# sourceMappingURL=nyph.js.map
